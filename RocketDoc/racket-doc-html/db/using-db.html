<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>1&nbsp;使用数据库连接</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">DB:<span class="mywbr"> &nbsp;</span> &#25968;&#25454;&#24211;&#36830;&#25509;</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">&#20351;&#29992;&#25968;&#25454;&#24211;&#36830;&#25509;</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="connect.html" class="tocviewlink" data-pltdoc="x">Connections</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="query-api.html" class="tocviewlink" data-pltdoc="x">&#26597;&#35810;</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="sql-types.html" class="tocviewlink" data-pltdoc="x">SQL &#31867;&#22411;&#36716;&#25442;</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="util.html" class="tocviewlink" data-pltdoc="x">&#23454;&#29992;&#24037;&#20855;</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="notes.html" class="tocviewlink" data-pltdoc="x">&#31508;&#35760;</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">&#20351;&#29992;&#25968;&#25454;&#24211;&#36830;&#25509;</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="#%28part._intro-basic%29" class="tocviewlink" data-pltdoc="x">&#20351;&#29992;&#25968;&#25454;&#24211;&#36830;&#25509;&#30340;&#20171;&#32461;</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="#%28part._dbsec%29" class="tocviewlink" data-pltdoc="x">&#25968;&#25454;&#24211;&#23433;&#20840;</a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="#%28part._dbperf%29" class="tocviewlink" data-pltdoc="x">&#25968;&#25454;&#24211;&#24615;&#33021;</a></td></tr><tr><td align="right">1.4&nbsp;</td><td><a href="#%28part._intro-servlets%29" class="tocviewlink" data-pltdoc="x">&#25968;&#25454;&#24211;&#21644; Web Servlets</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._intro-basic%29" class="tocsubseclink" data-pltdoc="x">&#20351;&#29992;&#25968;&#25454;&#24211;&#36830;&#25509;&#30340;&#20171;&#32461;</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._dbsec%29" class="tocsubseclink" data-pltdoc="x">&#25968;&#25454;&#24211;&#23433;&#20840;</a></td></tr><tr><td><span class="tocsublinknumber">1.2.1<tt>&nbsp;</tt></span><a href="#%28part._dbsec-sql-injection%29" class="tocsubseclink" data-pltdoc="x">SQL &#27880;&#20837;</a></td></tr><tr><td><span class="tocsublinknumber">1.2.2<tt>&nbsp;</tt></span><a href="#%28part._dbsec-xss%29" class="tocsubseclink" data-pltdoc="x">&#36328;&#31449;&#33050;&#26412; (XSS)</a></td></tr><tr><td><span class="tocsublinknumber">1.2.3<tt>&nbsp;</tt></span><a href="#%28part._dbsec-connect%29" class="tocsubseclink" data-pltdoc="x">&#23433;&#20840;&#22320;&#24314;&#31435;&#25968;&#25454;&#24211;&#36830;&#25509;</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._dbperf%29" class="tocsubseclink" data-pltdoc="x">&#25968;&#25454;&#24211;&#24615;&#33021;</a></td></tr><tr><td><span class="tocsublinknumber">1.3.1<tt>&nbsp;</tt></span><a href="#%28part._dbperf-n%2B1%29" class="tocsubseclink" data-pltdoc="x">N+<span class="mywbr"> &nbsp;</span>1 &#36873;&#25321;&#38382;&#39064;</a></td></tr><tr><td><span class="tocsublinknumber">1.3.2<tt>&nbsp;</tt></span><a href="#%28part._dbperf-update-tx%29" class="tocsubseclink" data-pltdoc="x">&#26356;&#26032;&#21644;&#20132;&#26131;</a></td></tr><tr><td><span class="tocsublinknumber">1.3.3<tt>&nbsp;</tt></span><a href="#%28part._dbperf-pstcache%29" class="tocsubseclink" data-pltdoc="x">&#35821;&#21477;&#32531;&#23384;</a></td></tr><tr><td><span class="tocsublinknumber">1.3.4<tt>&nbsp;</tt></span><a href="#%28part._dbperf-testing%29" class="tocsubseclink" data-pltdoc="x">&#27979;&#35797;&#22522;&#20110;&#25968;&#25454;&#24211;&#30340;&#31243;&#24207;&#30340;&#24615;&#33021;</a></td></tr><tr><td><span class="tocsublinknumber">1.3.5<tt>&nbsp;</tt></span><a href="#%28part._dbperf-concurrency%29" class="tocsubseclink" data-pltdoc="x">&#20107;&#21153;&#21644;&#24182;&#21457;&#24615;</a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part._intro-servlets%29" class="tocsubseclink" data-pltdoc="x">&#25968;&#25454;&#24211;&#21644; Web Servlets</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.9&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;DB: 数据库连接&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;DB: 数据库连接&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="connect.html" title="forward to &quot;2 Connections&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;using-db&quot;">1<tt>&nbsp;</tt><a name="(part._using-db)"></a>&#20351;&#29992;&#25968;&#25454;&#24211;&#36830;&#25509;</h3><p>&#26412;&#33410;&#20171;&#32461;&#20102;&#36825;&#20010;&#24211;&#30340;&#22522;&#26412;&#21151;&#33021;,&#24182;&#28085;&#30422;&#20102;&#19968;&#33324;&#30340;&#25968;&#25454;&#24211;&#32534;&#31243;,&#29305;&#21035;&#26159;&#36825;&#20010;&#24211;&#30340;&#19968;&#20123;&#23454;&#38469;&#38382;&#39064;&#12290;</p><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;intro-basic&quot;">1.1<tt>&nbsp;</tt><a name="(part._intro-basic)"></a>&#20351;&#29992;&#25968;&#25454;&#24211;&#36830;&#25509;&#30340;&#20171;&#32461;</h4><p>&#19979;&#38754;&#30340;&#27880;&#37322;&#31243;&#24207;&#28436;&#31034;&#20102;&#22914;&#20309;&#36830;&#25509;&#21040;&#19968;&#20010;&#25968;&#25454;&#24211;&#24182;&#36827;&#34892;&#31616;&#21333;&#30340;&#26597;&#35810;&#12290;
&#19979;&#38754;&#20351;&#29992;&#30340;&#19968;&#20123; SQL &#35821;&#27861;&#26159; PostgreSQL &#29305;&#26377;&#30340;,&#27604;&#22914;&#26597;&#35810;&#21442;&#25968;&#30340;&#35821;&#27861;
(<span class="RktInBG"><span class="hspace"></span><span class="RktIn">$1</span><span class="hspace"></span></span> ,&#32780;&#19981;&#26159; <span class="RktInBG"><span class="hspace"></span><span class="RktIn">?</span><span class="hspace"></span></span>)&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#39318;&#20808;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;&#36830;&#25509;&#12290;
&#23558;&#19979;&#38754;&#30340; <span class="RktVar">user</span>, <span class="RktVar">db</span> &#21644; <span class="RktVar">password</span> &#26367;&#25442;&#25104;&#36866;&#21512;&#20320;&#30340;&#37197;&#32622;&#30340;&#20540;
(&#20851;&#20110;&#20854;&#20182;&#36830;&#25509;&#30340;&#20363;&#23376;,&#35831;&#30475; <a href="connect.html#%28part._creating-connections%29" data-pltdoc="x">&#22522;&#30784;&#36830;&#25509;</a> ):</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fmain..rkt%29._postgresql-connect%29%29" class="RktValLink" data-pltdoc="x">postgresql-connect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:user</span><span class="hspace">&nbsp;</span><span class="RktVar">user</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:database</span><span class="hspace">&nbsp;</span><span class="RktVar">db</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:password</span><span class="hspace">&nbsp;</span><span class="RktVar">password</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote><p>&#20351;&#29992; <span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="RktValLink" data-pltdoc="x">query-exec</a></span> &#26041;&#27861;&#26469;&#25191;&#34892;&#19968;&#20010; SQL &#35821;&#21477;&#30340;&#25928;&#26524;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="RktValLink" data-pltdoc="x">query-exec</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktVal">"create temporary table the_numbers (n integer, d varchar(20))"</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="RktValLink" data-pltdoc="x">query-exec</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"insert into the_numbers values (0, 'nothing')"</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="RktValLink" data-pltdoc="x">query-exec</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"insert into the_numbers values (1, 'the loneliest number')"</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote><p>&#24403;&#26597;&#35810;&#21253;&#21547;&#19968;&#20010;&#19981;&#26159;&#24120;&#37327;&#30340; SQL &#20540;&#26102;,&#36890;&#36807; "&#26597;&#35810;&#21442;&#25968;" &#26469;&#24341;&#29992;&#23427;,
&#32780;&#19981;&#26159;&#36890;&#36807;&#21160;&#24577;&#35745;&#31639; SQL &#26597;&#35810;&#23383;&#31526;&#20018;(&#21442;&#35265; <a href="#%28part._dbsec-sql-injection%29" data-pltdoc="x">SQL &#27880;&#20837;</a>) &#12290;
&#21482;&#35201;&#22312;&#26597;&#35810;&#20989;&#25968;&#35843;&#29992;&#20013;&#30340; SQL &#35821;&#21477;&#21518;&#25552;&#20379;&#21442;&#25968;&#20540;&#21363;&#21487;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="RktValLink" data-pltdoc="x">query-exec</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"insert into the_numbers values ($1, $2)"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"company"</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote><p>&#27599;&#20010;&#26631;&#20934;&#30340;&#26597;&#35810;&#20989;&#25968;&#37117;&#25509;&#21463;&#26597;&#35810;&#21442;&#25968;&#12290;
&#26597;&#35810;&#21442;&#25968;&#30340; SQL &#35821;&#27861;&#21462;&#20915;&#20110;&#25968;&#25454;&#24211;&#31995;&#32479;(&#35265; <a href="query-api.html#%28part._query-statements%29" data-pltdoc="x">&#35821;&#21477;</a>)&#12290;
 &#19979;&#38754;&#23558;&#35752;&#35770;&#36816;&#34892;&#21442;&#25968;&#21270;&#26597;&#35810;&#30340;&#20854;&#20182;&#36873;&#39033;&#12290;</p><p><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query%29%29" class="RktValLink" data-pltdoc="x">query</a></span> &#20989;&#25968;&#26159;&#25191;&#34892;&#35821;&#21477;&#30340;&#19968;&#31181;&#26356;&#26222;&#36941;&#30340;&#26041;&#24335;&#12290;
&#23427;&#36820;&#22238;&#19968;&#20010;&#23553;&#35013;&#20102;&#35813;&#35821;&#21477;&#25191;&#34892;&#20449;&#24687;&#30340;&#32467;&#26500;&#12290;
(&#20294;&#20854;&#20013;&#30340;&#19968;&#20123;&#20449;&#24687;&#22240;&#31995;&#32479;&#32780;&#24322;,&#32780;&#19988;&#21487;&#33021;&#20250;&#26377;&#21464;&#21270;)&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query%29%29" class="RktValLink" data-pltdoc="x">query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"insert into the_numbers values (3, 'a crowd')"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(simple-result '((insert-id . #f) (affected-rows . 1)))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query%29%29" class="RktValLink" data-pltdoc="x">query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select n, d from the_numbers where n % 2 = 0"</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">(rows-result</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">'(((name . "n") (typeid . 23) (type-size . 4) (type-mod . -1))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">((name . "d") (typeid . 1043) (type-size . -1) (type-mod . 24)))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">'(#(0 "nothing") #(2 "company")))</span></p></td></tr></table></td></tr></table></blockquote><p>&#24403;&#26597;&#35810;&#24050;&#30693;&#35201;&#36820;&#22238;&#34892;,&#24182;&#19988;&#19981;&#38656;&#35201;&#23383;&#27573;&#25551;&#36848;&#26102;,&#20351;&#29992; <span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-rows%29%29" class="RktValLink" data-pltdoc="x">query-rows</a></span> &#20989;&#25968;&#20250;&#26356;&#26041;&#20415;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-rows%29%29" class="RktValLink" data-pltdoc="x">query-rows</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select n, d from the_numbers where n % 2 = 0"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(#(0 "nothing") #(2 "company"))</span></p></td></tr></table></blockquote><p>&#20351;&#29992; <span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-row%29%29" class="RktValLink" data-pltdoc="x">query-row</a></span> &#26469;&#26597;&#35810;&#37027;&#20123;&#24050;&#30693;&#20250;&#20934;&#30830;&#36820;&#22238;&#19968;&#26465;&#35760;&#24405;&#30340;&#26597;&#35810;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-row%29%29" class="RktValLink" data-pltdoc="x">query-row</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select * from the_numbers where n = 0"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'#(0 "nothing")</span></p></td></tr></table></blockquote><p>&#21516;&#26679;&#22320;,&#23545;&#20110;&#20135;&#29983;&#27491;&#22909;&#26159;&#19968;&#21015;&#30340;&#34892;&#30340;&#26597;&#35810;,&#20351;&#29992; <span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span> &#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select d from the_numbers order by n"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'("nothing" "the loneliest number" "company" "a crowd")</span></p></td></tr></table></blockquote><p>&#24403;&#19968;&#20010;&#26597;&#35810;&#24050;&#30693;&#20250;&#36820;&#22238;&#19968;&#20010;&#21333;&#19968;&#30340;&#20540;(&#19968;&#34892;&#21644;&#19968;&#21015;)&#26102;,&#20351;&#29992; <span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span> &#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select count(*) from the_numbers"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">4</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select d from the_numbers where n = 5"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">query-value: query returned wrong number of rows</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">statement: "select d from the_numbers where n = 5"</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">expected: 1</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">got: 0</span></p></td></tr></table></blockquote><p>&#24403;&#19968;&#20010;&#26597;&#35810;&#21487;&#33021;&#36820;&#22238; 0 &#25110; 1 &#34892;,&#22914;&#26368;&#21518;&#19968;&#20010;&#20363;&#23376;,
&#20351;&#29992; <span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-maybe-row%29%29" class="RktValLink" data-pltdoc="x">query-maybe-row</a></span> &#25110; <span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-maybe-value%29%29" class="RktValLink" data-pltdoc="x">query-maybe-value</a></span> &#20195;&#26367;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-maybe-value%29%29" class="RktValLink" data-pltdoc="x">query-maybe-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select d from the_numbers where n = 5"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr></table></blockquote><p><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="RktValLink" data-pltdoc="x">in-query</a></span> &#20989;&#25968;&#20135;&#29983;&#19968;&#20010;&#24207;&#21015;,&#21487;&#20197;&#19982; Racket &#30340;&#36845;&#20195;&#24418;&#24335;&#19968;&#36215;&#20351;&#29992;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">for</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="RktValLink" data-pltdoc="x">in-query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select * from the_numbers where n &lt; 4"</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"~a: ~a\n"</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">0: nothing</span></p></td></tr><tr><td><p><span class="RktOut">1: the loneliest number</span></p></td></tr><tr><td><p><span class="RktOut">2: company</span></p></td></tr><tr><td><p><span class="RktOut">3: a crowd</span></p></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%252Ffold%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">for/fold</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="RktValLink" data-pltdoc="x">in-query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select n from the_numbers"</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">6</span></p></td></tr></table></blockquote><p>&#26597;&#35810;&#20013;&#30340;&#38169;&#35823;&#19968;&#33324;&#19981;&#20250;&#23548;&#33268;&#36830;&#25509;&#26029;&#24320;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._with-handlers%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">with-handlers</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exn%7E3afail%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">exn:fail?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"~a~n"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exn-message%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">exn-message</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select NoSuchField from NoSuchTable"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select 'okay to proceed!'"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">query-value: relation "nosuchtable" does not exist</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">SQLSTATE: 42P01</span></p></td></tr></table></td></tr><tr><td><p><span class="RktRes">"okay to proceed!"</span></p></td></tr></table></blockquote><p>&#26597;&#35810;&#21487;&#33021;&#21253;&#21547;&#21442;&#25968;&#12290;&#25191;&#34892;&#21442;&#25968;&#21270;&#26597;&#35810;&#30340;&#26368;&#31616;&#21333;&#26041;&#27861;&#26159;&#22312;&#26597;&#35810;&#20989;&#25968;&#35843;&#29992;&#20013;&#30340; SQL &#35821;&#21477;&#21518; "&#20869;&#32852;" &#25552;&#20379;&#21442;&#25968;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktVal">"select d from the_numbers where n = $1"</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">"company"</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktVal">"select n from the_numbers where n &gt; $1 and n &lt; $2"</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'(1 2)</span></p></td></tr></table></blockquote><p>&#21478;&#22806;,&#20063;&#21487;&#20197;&#20107;&#20808;&#20934;&#22791;&#22909;&#21442;&#25968;&#21270;&#26597;&#35810;,&#20197;&#21518;&#20877;&#25191;&#34892;&#12290;
<a href="query-api.html#%28tech._prepared._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">Prepared statements</span></a> &#21487;&#20197;&#29992;&#19981;&#21516;&#30340;&#21442;&#25968;&#20540;&#22810;&#27425;&#25191;&#34892;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">get-less-than-pst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._prepare%29%29" class="RktValLink" data-pltdoc="x">prepare</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select n from the_numbers where n &lt; $1"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktSym">get-less-than-pst</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(0)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._bind-prepared-statement%29%29" class="RktValLink" data-pltdoc="x">bind-prepared-statement</a></span><span class="hspace">&nbsp;</span><span class="RktSym">get-less-than-pst</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">2</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(0 1)</span></p></td></tr></table></blockquote><p>&#24403;&#19968;&#20010;&#36830;&#25509;&#30340;&#24037;&#20316;&#23436;&#25104;&#21518;,&#23427;&#24212;&#35813;&#34987;&#26029;&#24320;&#36830;&#25509;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._disconnect%29%29" class="RktValLink" data-pltdoc="x">disconnect</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="RktPn">)</span></td></tr></table></blockquote><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;dbsec&quot;">1.2<tt>&nbsp;</tt><a name="(part._dbsec)"></a>&#25968;&#25454;&#24211;&#23433;&#20840;</h4><p>&#25968;&#25454;&#24211;&#30340;&#23433;&#20840;&#35201;&#27714;&#26082;&#35201;&#20445;&#35777;&#25968;&#25454;&#24211;&#21518;&#31471;&#30340;&#23433;&#20840;,&#38450;&#27490;&#26410;&#32463;&#25480;&#26435;&#30340;&#20351;&#29992;,&#21448;&#35201;&#20445;&#35777;&#25480;&#26435;&#30340;&#23458;&#25143;&#19981;&#34987;&#27450;&#39575;&#25110;&#39072;&#35206;,&#20174;&#32780;&#20405;&#29359;&#25968;&#25454;&#24211;&#30340;&#23433;&#20840;&#12290;</p><p>&#30830;&#20445;&#25968;&#25454;&#24211;&#21518;&#31471;&#23433;&#20840;&#20027;&#35201;&#36229;&#20986;&#20102;&#26412;&#25163;&#20876;&#30340;&#33539;&#22260;&#12290;
&#31616;&#32780;&#35328;&#20043;:&#36873;&#25321;&#36275;&#22815;&#24378;&#22823;&#30340;&#35748;&#35777;&#26041;&#27861;,&#20445;&#25345;&#35777;&#20070;&#30340;&#23433;&#20840;&#24615;,&#24182;&#36981;&#24490;
<a href="http://en.wikipedia.org/wiki/Principle_of_least_privilege">principle of least privilege</a>:
&#21019;&#24314;&#21644;&#20351;&#29992;&#20855;&#26377;&#26368;&#23567;&#26435;&#38480;&#30340;&#35282;&#33394;&#12290;</p><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#19982;&#25968;&#25454;&#24211; <span class="emph">client</span> &#32534;&#31243;&#26377;&#20851;&#30340;&#23433;&#20840;&#38382;&#39064;&#30340;&#19981;&#23436;&#25972;&#21015;&#34920;&#12290;</p><h5 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;dbsec-sql-injection&quot;">1.2.1<tt>&nbsp;</tt><a name="(part._dbsec-sql-injection)"></a>SQL &#27880;&#20837;</h5><p>&#24403; SQL &#35821;&#21477;&#30340;&#19968;&#37096;&#20998;&#26412;&#26469;&#26159;&#20316;&#20026; SQL &#23383;&#38754;&#25968;&#25454;&#30340;,
&#21364;&#34987;&#35299;&#37322;&#20026; SQL &#20195;&#30721;&ndash;&#21487;&#33021;&#26159; <a href="http://xkcd.com/327/">malicious</a> &#30340; SQL &#20195;&#30721;&#26102;,
&#23601;&#20250;&#21457;&#29983; <a href="http://en.wikipedia.org/wiki/SQL_injection">SQL injection</a> &#12290;</p><p>&#36991;&#20813;&#36890;&#36807;&#23383;&#31526;&#20018;&#36830;&#25509;&#25110;&#25554;&#20540;(&#20363;&#22914;,&#20351;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-append</a></span> &#25110; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">format</a></span>)&#26469;&#21160;&#24577;&#22320;&#21019;&#24314; SQL &#26597;&#35810;&#23383;&#31526;&#20018;&#12290;
 &#22312;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;,&#21487;&#20197;&#20351;&#29992; <a href="query-api.html#%28tech._parameterized._query%29" class="techoutside" data-pltdoc="x"><span class="techinside">parameterized queries</span></a> &#26469;&#20195;&#26367;&#12290;&#20363;&#22914;,&#19981;&#20351;&#29992;&#36825;&#20010;</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">WRONG! DANGER!</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="RktValLink" data-pltdoc="x">query-exec</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"UPDATE users SET passwd='~a' WHERE user='~a'"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">user</span><span class="hspace">&nbsp;</span><span class="RktSym">new-passwd</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">&#32780;&#20889;&#25104;&#19979;&#38754;&#30340;&#19968;&#31181;&#26041;&#24335;(&#21462;&#20915;&#20110; SQL &#26041;&#35328;):
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">for PostgreSQL, SQLite</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="RktValLink" data-pltdoc="x">query-exec</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktVal">"UPDATE users SET passwd=$1 WHERE user=$2"</span><span class="hspace">&nbsp;</span><span class="RktSym">user</span><span class="hspace">&nbsp;</span><span class="RktSym">new-passwd</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">for MySQL, SQLite, ODBC</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="RktValLink" data-pltdoc="x">query-exec</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktVal">"UPDATE users SET passwd=? WHERE user=?"</span><span class="hspace">&nbsp;</span><span class="RktSym">user</span><span class="hspace">&nbsp;</span><span class="RktSym">new-passwd</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>&#31532;&#19968;&#31181;&#24418;&#24335;&#20250;&#34987; <span class="RktVal">"Patrick O'Connor"</span> &#36825;&#26679;&#30340;&#21517;&#23383;&#22094;&#20303;&#12290;
&#26356;&#31967;&#31957;&#30340;&#26159;,&#23427;&#24456;&#23481;&#26131;&#21463;&#21040;&#20687; <span class="RktVal">"me' OR user='root'"</span> &#36825;&#26679;&#30340;&#24694;&#24847;&#36755;&#20837;&#30340;&#25915;&#20987;,&#20174;&#32780;&#20135;&#29983;&#20197;&#19979; SQL &#35821;&#21477;:</p><p><span class="stt">UPDATE users SET passwd='whatever' WHERE user='me' OR user='root'</span></p><p>&#30456;&#27604;&#20043;&#19979;,&#20351;&#29992; <a href="query-api.html#%28tech._parameterized._query%29" class="techoutside" data-pltdoc="x"><span class="techinside">parameterized query</span></a> &#20250;&#23548;&#33268;&#21442;&#25968;&#21270;&#30340; SQL &#21644;&#23427;&#30340;&#21442;&#25968;&#34987;&#21333;&#29420;&#25552;&#20132;&#32473;&#21518;&#31471;;
&#28982;&#21518;&#21518;&#31471;&#20250;&#23558;&#23427;&#20204;&#23433;&#20840;&#22320;&#32467;&#21512;&#36215;&#26469;&#12290;</p><p>&#21482;&#26377; SQL &#30340;&#23383;&#38754;&#20215;&#20540;&#21487;&#20197;&#29992;&#21442;&#25968;&#21344;&#20301;&#31526;&#26469;&#20195;&#26367;;&#20363;&#22914;,&#19968;&#20010; SQL &#35821;&#21477;&#19981;&#33021;&#36890;&#36807;&#21015;&#21517;&#25110;&#25490;&#24207;&#39034;&#24207;&#36827;&#34892;&#21442;&#25968;&#21270;&#12290;
 &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;,&#21160;&#24577;&#22320;&#26500;&#24314;&#26597;&#35810;&#21487;&#33021;&#26159;&#21807;&#19968;&#21487;&#34892;&#30340;&#35299;&#20915;&#26041;&#26696;&#12290;
 &#20294;&#26159;,&#34429;&#28982;&#26597;&#35810;&#30340;&#26500;&#24314;&#21487;&#33021;&#20250;&#21463;&#21040;&#22806;&#37096;&#36755;&#20837;&#30340;&#24433;&#21709;,&#20294;&#23427;&#32477;&#19981;&#24212;&#35813;&#22312;&#27809;&#26377;&#39564;&#35777;&#30340;&#24773;&#20917;&#19979;&#30452;&#25509;&#32435;&#20837;&#22806;&#37096;&#36755;&#20837;&#12290;
&#20063;&#23601;&#26159;&#35828;,&#19981;&#35201;&#20570;&#20197;&#19979;&#20107;&#24773;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">WRONG! DANGER!</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-rows%29%29" class="RktValLink" data-pltdoc="x">query-rows</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"SELECT name, ~a FROM contestants"</span><span class="hspace">&nbsp;</span><span class="RktSym">column</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"SELECT name FROM contestants ORDER BY score ~a"</span><span class="hspace">&nbsp;</span><span class="RktSym">direction</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#30456;&#21453;,&#20174;&#24050;&#30693;&#30340;&#22909;&#30340;&#26367;&#20195;&#21697;&#20013;&#36873;&#25321;&#25554;&#20837;&#30340; SQL:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BETTER</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-rows%29%29" class="RktValLink" data-pltdoc="x">query-rows</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"SELECT name, ~a FROM contestants"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._cond%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">cond</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._member%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">member</a></span><span class="hspace">&nbsp;</span><span class="RktSym">column</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"wins"</span><span class="hspace">&nbsp;</span><span class="RktVal">"losses"</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">column</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._else%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._error%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="RktSym">....</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"SELECT name FROM contestants ORDER BY score ~a"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktSym">ascending?</span><span class="hspace">&nbsp;</span><span class="RktVal">"ASC"</span><span class="hspace">&nbsp;</span><span class="RktVal">"DESC"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h5 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;dbsec-xss&quot;">1.2.2<tt>&nbsp;</tt><a name="(part._dbsec-xss)"></a>&#36328;&#31449;&#33050;&#26412; (XSS)</h5><p><a href="http://en.wikipedia.org/wiki/Cross-site_scripting">Cross-site scripting</a>&#8212;<wbr></wbr>
&#21487;&#33021;&#24212;&#35813;&#34987;&#31216;&#20026; &ldquo;HTML injection&rdquo; &#25110; &ldquo;markup injection&rdquo;&#8212;<wbr></wbr>
&#26159;&#25351;&#26469;&#33258;&#19981;&#21463;&#20449;&#20219;&#30340;&#26469;&#28304;&#30340;&#20219;&#24847;&#25991;&#26412;&#22312;&#27809;&#26377;&#36716;&#20041;&#30340;&#24773;&#20917;&#19979;&#34987;&#23884;&#20837;&#21040; HTML &#39029;&#38754;&#20013;&#12290;
<span class="emph">unstructured text from the untrusted source</span> &#34987;&#37325;&#26032;&#35299;&#37322;&#20026;
<span class="emph">markup from the web server</span>;
&#22914;&#26524;&#37325;&#26032;&#35299;&#37322;&#30340;&#26631;&#35760;&#21253;&#21547;&#23884;&#20837;&#30340; Javascript &#20195;&#30721;,&#23427;&#23558;&#20197;&#19982;&#32593;&#32476;&#26381;&#21153;&#22120;&#30340;&#22495;&#30456;&#20851;&#30340;&#23433;&#20840;&#26435;&#38480;&#25191;&#34892;&#12290;</p><p>&#36825;&#20010;&#38382;&#39064;&#19982;&#25968;&#25454;&#24211;&#30340;&#24863;&#30693;&#27809;&#26377;&#20160;&#20040;&#20851;&#31995;,&#21482;&#26159;&#36825;&#31181;&#25991;&#26412;&#32463;&#24120;&#34987;&#23384;&#20648;&#22312;&#25968;&#25454;&#24211;&#20013;&#12290;
 &#36825;&#20010;&#38382;&#39064;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992; SXML &#25110; X &#34920;&#36798;&#24335;(xexprs)&#31561;&#32467;&#26500;&#21270;&#26631;&#35760;&#34920;&#31034;&#27861;&#26469;&#32531;&#35299;,
&#22240;&#20026;&#23427;&#20204;&#20250;&#33258;&#21160;&#36716;&#20041;&#23884;&#20837;&#25991;&#26412;&#20013;&#30340; &ldquo;markup&rdquo; &#23383;&#31526;&#12290;</p><h5 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;dbsec-connect&quot;">1.2.3<tt>&nbsp;</tt><a name="(part._dbsec-connect)"></a>&#23433;&#20840;&#22320;&#24314;&#31435;&#25968;&#25454;&#24211;&#36830;&#25509;</h5><p>&#24403;&#36890;&#36807;&#32593;&#32476;&#36830;&#25509;&#21040;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;&#26102;,&#35831;&#20351;&#29992; TLS/SSL,&#24182;&#37319;&#21462;&#24517;&#35201;&#30340;&#25514;&#26045;&#26469;&#23433;&#20840;&#22320;&#20351;&#29992;&#23427;&#12290;
&#22914;&#26524;&#27809;&#26377; TLS,&#20320;&#30340;&#25968;&#25454;&#21644;&#21487;&#33021;(&#21462;&#20915;&#20110;&#25152;&#20351;&#29992;&#30340;&#35748;&#35777;&#26426;&#21046;)&#20320;&#30340;&#36830;&#25509;&#20973;&#35777;&#23601;&#20250;&#26292;&#38706;&#32473;&#20219;&#20309;&#33021;&#22815;&#36827;&#20837;&#32593;&#32476;&#30340;&#25915;&#20987;&#32773;&#12290;</p><p><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fmain..rkt%29._postgresql-connect%29%29" class="RktValLink" data-pltdoc="x">postgresql-connect</a></span> &#21644; <span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fmain..rkt%29._mysql-connect%29%29" class="RktValLink" data-pltdoc="x">mysql-connect</a></span> &#37117;&#25903;&#25345; TLS;
&#29992; <span class="RktPn">#:ssl</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">yes</span> &#21644; <span class="RktPn">#:ssl-context</span><span class="stt"> </span><span class="RktVar">secure-context</span> &#36830;&#25509;,&#20854;&#20013;</p><ul><li><p>&#22914;&#26524;&#26381;&#21153;&#22120;&#26377;&#19968;&#20010;&#30001;&#30693;&#21517;&#30340;&#12289;&#21463;&#20449;&#20219;&#30340;&#35777;&#20070;&#39041;&#21457;&#26426;&#26500;(CA)&#39041;&#21457;&#30340;&#35777;&#20070;,
&#20320;&#21487;&#33021;&#21482;&#38656;&#35201;&#20351;&#29992; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=openssl&amp;rel=index.html%23%2528def._%2528%2528lib._openssl%252Fmain..rkt%2529._ssl-secure-client-context%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">ssl-secure-client-context</a></span><span class="RktPn">)</span> &#21644;&#25805;&#20316;&#31995;&#32479;&#31649;&#29702;&#30340;&#40664;&#35748;&#39564;&#35777;&#28304;&#12290;</p></li><li><p>&#21542;&#21017;,&#20320;&#24517;&#39035;&#21019;&#24314;&#19968;&#20010;&#20449;&#20219;&#20320;&#26381;&#21153;&#22120;&#35777;&#20070;&#30340;&#19978;&#19979;&#25991;&#12290;
  &#33719;&#21462;&#26381;&#21153;&#22120;&#30340;&#35777;&#20070;&#25110;&#20854; CA &#30340;&#35777;&#20070;&#20316;&#20026;&#19968;&#20010; PEM &#25991;&#20214;;
  &#20551;&#35774;&#35813;&#25991;&#20214;&#20301;&#20110; <span class="RktVal">"/path/to/server-cert.pem"</span> &#12290;
 &#25353;&#22914;&#19979;&#26041;&#24335;&#21019;&#24314;&#19978;&#19979;&#25991;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._parameterize%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">parameterize</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=openssl&amp;rel=index.html%23%2528def._%2528%2528lib._openssl%252Fmain..rkt%2529._ssl-default-verify-sources%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">ssl-default-verify-sources</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"/path/to/server-cert.pem"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=openssl&amp;rel=index.html%23%2528def._%2528%2528lib._openssl%252Fmain..rkt%2529._ssl-secure-client-context%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">ssl-secure-client-context</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#20851;&#20110;&#20854;&#20182;&#31867;&#22411;&#30340;&#39564;&#35777;&#28304;,&#20063;&#35831;&#21442;&#35265; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=openssl&amp;rel=index.html%23%2528def._%2528%2528lib._openssl%252Fmain..rkt%2529._ssl-load-verify-source%2521%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">ssl-load-verify-source!</a></span> &#12290;</p></li></ul><p>&#23545;&#20110; ODBC &#36830;&#25509;,&#20687;&#24448;&#24120;&#19968;&#26679;,&#35831;&#21442;&#32771;&#21518;&#31471;&#21644; ODBC &#39537;&#21160;&#25991;&#26723;&#12290;</p><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;dbperf&quot;">1.3<tt>&nbsp;</tt><a name="(part._dbperf)"></a>&#25968;&#25454;&#24211;&#24615;&#33021;</h4><p>&#23454;&#29616;&#33391;&#22909;&#30340;&#25968;&#25454;&#24211;&#24615;&#33021;&#20027;&#35201;&#21253;&#25324;&#33391;&#22909;&#30340;&#25968;&#25454;&#24211;&#35774;&#35745;&#21644;&#26234;&#33021;&#23458;&#25143;&#34892;&#20026;&#12290;</p><p>&#22312;&#25968;&#25454;&#24211;&#35774;&#35745;&#26041;&#38754;,&#26368;&#37325;&#35201;&#30340;&#26159;&#26126;&#26234;&#22320;&#20351;&#29992;&#32034;&#24341;&#21644;&#36873;&#25321;&#36866;&#24403;&#30340;&#25968;&#25454;&#34920;&#31034;&#26041;&#27861;&#12290;
 &#20316;&#20026;&#21518;&#32773;&#30340;&#19968;&#20010;&#20363;&#23376;,&#23545;&#20110;&#22823;&#22411;&#25968;&#25454;&#38598;&#26469;&#35828;,&#20351;&#29992; <span class="stt">LIKE</span> &#30340;&#22522;&#20110; regexp &#30340;&#25628;&#32034;&#21487;&#33021;&#20250;&#27604;&#19987;&#38376;&#30340;
<a href="http://www.postgresql.org/docs/9.0/static/textsearch.html">full-text search</a> &#21151;&#33021;&#24930;&#12290;
 &#35831;&#26597;&#38405;&#20320;&#30340;&#25968;&#25454;&#24211;&#21518;&#31471;&#25163;&#20876;&#20197;&#33719;&#24471;&#26356;&#22810;&#30340;&#24615;&#33021;&#24314;&#35758;&#12290;</p><p>&#19979;&#38754;&#30340;&#31456;&#33410;&#25551;&#36848;&#20102;&#19968;&#20123;&#23458;&#25143;&#31471;&#30340;&#24615;&#33021;&#38382;&#39064;&#12290;</p><h5 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;dbperf-n+1&quot;">1.3.1<tt>&nbsp;</tt><a name="(part._dbperf-n+1)"></a>N+1 &#36873;&#25321;&#38382;&#39064;</h5><p>&#19968;&#20010;&#24120;&#35265;&#30340;&#38169;&#35823;&#26159;&#36890;&#36807;&#36816;&#34892;&#26597;&#35810;&#26469;&#33719;&#21462;&#22823;&#37327;&#30340;&#25968;&#25454;,&#24471;&#21040;&#19968;&#32452;&#21021;&#22987;&#35760;&#24405;,
&#28982;&#21518;&#22312;&#19968;&#20010;&#24490;&#29615;&#20013;&#36816;&#34892;&#21478;&#19968;&#20010;&#26597;&#35810;,&#23545;&#27599;&#19968;&#20010;&#21021;&#22987;&#35760;&#24405;&#36827;&#34892;&#36845;&#20195;&#12290;
 &#36825;&#26377;&#26102;&#34987;&#31216;&#20026; "n+1&#36873;&#25321;&#38382;&#39064;"&#12290;&#27604;&#22914;&#35828;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%252Flist%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">for/list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="RktValLink" data-pltdoc="x">in-query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktVal">"SELECT name, id FROM contestants"</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">wins</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktVal">"SELECT contest FROM contests WHERE winner = $1"</span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-contestant-record</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">wins</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#36890;&#36807;&#25191;&#34892; <span class="stt">LEFT OUTER JOIN</span> &#24182;&#23558;&#32467;&#26524;&#20998;&#32452;,&#21487;&#20197;&#22312;&#19968;&#20010;&#26597;&#35810;&#20013;&#26816;&#32034;&#21040;&#30456;&#21516;&#30340;&#20449;&#24687;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%252Flist%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">for/list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktSym">wins</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="RktValLink" data-pltdoc="x">in-query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"SELECT name, id, contest "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"FROM contestants LEFT OUTER JOIN contests "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"ON contestants.id = contests.winner"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:group</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"name"</span><span class="hspace">&nbsp;</span><span class="RktVal">"id"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:group-mode</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">list</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-contestant-record</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">wins</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#24403;&#25968;&#25454;&#24211;&#36890;&#20449;&#20855;&#26377;&#39640;&#24310;&#36831;&#26102;,&#21333;&#27425;&#26597;&#35810;&#30340;&#24418;&#24335;&#20250;&#34920;&#29616;&#24471;&#26356;&#22909;&#12290;
 &#21478;&#19968;&#26041;&#38754;,&#23427;&#21487;&#33021;&#20250;&#37325;&#22797;&#38750;&#38190; <span class="stt">name</span> &#21015;&#30340;&#20869;&#23481;,&#20351;&#29992;&#26356;&#22810;&#30340;&#24102;&#23485;&#12290;
 &#21478;&#19968;&#31181;&#26041;&#27861;&#26159;&#36827;&#34892;&#20004;&#27425;&#26597;&#35810;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">id=&gt;name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._rows-~3edict%29%29" class="RktValLink" data-pltdoc="x">rows-&gt;dict</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:key</span><span class="hspace">&nbsp;</span><span class="RktVal">"id"</span><span class="hspace">&nbsp;</span><span class="RktPn">#:value</span><span class="hspace">&nbsp;</span><span class="RktVal">"name"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._query%29%29" class="RktValLink" data-pltdoc="x">query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktVal">"SELECT id, name FROM contestants"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%252Flist%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">for/list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktSym">wins</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="RktValLink" data-pltdoc="x">in-query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"SELECT id, contest "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"FROM contestants LEFT OUTER JOIN contests "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"ON contestants.id = contests.winner"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:group</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"id"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:group-mode</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">list</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-contestant-record</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=dicts.html%23%2528def._%2528%2528lib._racket%252Fdict..rkt%2529._dict-ref%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">dict-ref</a></span><span class="hspace">&nbsp;</span><span class="RktSym">id=&gt;name</span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">wins</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#19982;&#21333;&#26597;&#35810;&#24418;&#24335;&#30456;&#27604;,&#21452;&#26597;&#35810;&#24418;&#24335;&#38656;&#35201;&#39069;&#22806;&#30340;&#36890;&#20449;,&#20294;&#23427;&#36991;&#20813;&#20102;&#22312; <span class="stt">OUTER JOIN</span> &#32467;&#26524;&#20013;&#37325;&#22797; <span class="stt">name</span> &#20540;&#12290;
&#22914;&#26524;&#35201;&#26816;&#32034;&#39069;&#22806;&#30340;&#38750;&#38190; <span class="stt">contestant</span> &#23383;&#27573;,&#36825;&#31181;&#26041;&#27861;&#33410;&#30465;&#30340;&#24102;&#23485;&#29978;&#33267;&#26356;&#22823;&#12290;</p><p>&#35831;&#21442;&#35265; <a href="#%28part._dbperf-testing%29" data-pltdoc="x">&#27979;&#35797;&#22522;&#20110;&#25968;&#25454;&#24211;&#30340;&#31243;&#24207;&#30340;&#24615;&#33021;</a> &#12290;</p><h5 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;dbperf-update-tx&quot;">1.3.2<tt>&nbsp;</tt><a name="(part._dbperf-update-tx)"></a>&#26356;&#26032;&#21644;&#20132;&#26131;</h5><p>&#20351;&#29992;&#20107;&#21153;&#21487;&#20197;&#26497;&#22823;&#22320;&#25552;&#39640;&#22823;&#37327;&#25968;&#25454;&#24211;&#25805;&#20316;&#30340;&#24615;&#33021;,&#29305;&#21035;&#26159; <span class="stt">UPDATE</span> &#21644; <span class="stt">INSERT</span> &#35821;&#21477;&#12290;
 &#20316;&#20026;&#19968;&#20010;&#26497;&#31471;&#30340;&#20363;&#23376;,&#22312; 2012 &#24180;&#30340;&#21830;&#21697;&#30828;&#20214;&#19978;,SQLite &#33021;&#22815;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;&#27599;&#31186;&#25191;&#34892;&#25968;&#21315;&#26465; <span class="stt">INSERT</span> &#35821;&#21477;,
&#20294;&#23427;&#27599;&#31186;&#21482;&#33021;&#25191;&#34892;&#20960;&#21313;&#26465;&#21333;&#19968;&#30340; <span class="stt">INSERT</span> &#20107;&#21153;&#12290;</p><h5 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;dbperf-pstcache&quot;">1.3.3<tt>&nbsp;</tt><a name="(part._dbperf-pstcache)"></a>&#35821;&#21477;&#32531;&#23384;</h5><p>&#36830;&#25509;&#20250;&#32531;&#23384;&#38544;&#21547;&#30340;&#20934;&#22791;&#22909;&#30340;&#35821;&#21477;(&#20063;&#23601;&#26159;&#20197;&#23383;&#31526;&#20018;&#24418;&#24335;&#30452;&#25509;&#32473;&#21040;&#26597;&#35810;&#20989;&#25968;&#30340;&#35821;&#21477;)&#12290;
 &#32531;&#23384;&#30340;&#20316;&#29992;&#26159;&#28040;&#38500;&#21040;&#26381;&#21153;&#22120;&#30340;&#39069;&#22806;&#24448;&#36820;(&#21457;&#36865;&#35821;&#21477;&#21644;&#25509;&#25910;&#20934;&#22791;&#22909;&#30340;&#35821;&#21477;&#21477;&#26564;),&#27599;&#27425;&#25191;&#34892;&#21482;&#30041;&#19979;&#19968;&#27425;&#24448;&#36820;(&#21457;&#36865;&#21442;&#25968;&#21644;&#25509;&#25910;&#32467;&#26524;)&#12290;</p><p>&#30446;&#21069;,&#20934;&#22791;&#22909;&#30340;&#35821;&#21477;&#21482;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;&#34987;&#32531;&#23384;&#12290;
 &#35821;&#21477;&#32531;&#23384;&#22312;&#36827;&#20837;&#25110;&#31163;&#24320;&#20107;&#21153;&#20197;&#21450;&#25191;&#34892; DDL &#35821;&#21477;&#26102;&#34987;&#21047;&#26032;&#12290;</p><h5 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;dbperf-testing&quot;">1.3.4<tt>&nbsp;</tt><a name="(part._dbperf-testing)"></a>&#27979;&#35797;&#22522;&#20110;&#25968;&#25454;&#24211;&#30340;&#31243;&#24207;&#30340;&#24615;&#33021;</h5><p>&#24403;&#27979;&#35797;&#25968;&#25454;&#24211;&#25903;&#25345;&#30340;&#31243;&#24207;&#30340;&#24615;&#33021;&#26102;,&#35760;&#20303;&#35201;&#22312;&#23454;&#38469;&#30340;&#24310;&#36831;&#21644;&#24102;&#23485;&#29615;&#22659;&#20013;&#27979;&#35797;&#23427;&#20204;&#12290;
&#39640;&#24310;&#36831;&#29615;&#22659;&#21487;&#20197;&#29992; <span class="RktSym"><a href="util.html#%28def._%28%28lib._db%2Futil%2Ftesting..rkt%29._high-latency-connection%29%29" class="RktValLink" data-pltdoc="x">high-latency-connection</a></span> &#20989;&#25968;&#26469;&#31895;&#30053;&#27169;&#25311;,&#20294;&#26159;&#30495;&#23454;&#30340;&#29615;&#22659;&#26159;&#26080;&#27861;&#26367;&#20195;&#30340;&#12290;</p><h5 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;dbperf-concurrency&quot;">1.3.5<tt>&nbsp;</tt><a name="(part._dbperf-concurrency)"></a>&#20107;&#21153;&#21644;&#24182;&#21457;&#24615;</h5><p>&#25968;&#25454;&#24211;&#31995;&#32479;&#20351;&#29992;
<a href="http://en.wikipedia.org/wiki/Database_transaction">transactions</a>
&#26469;&#20445;&#35777;
<a href="http://en.wikipedia.org/wiki/ACID">atomicity and isolation</a> &#31561;&#23646;&#24615;,
&#21516;&#26102;&#23481;&#32435;&#25968;&#25454;&#24211;&#23458;&#25143;&#31471;&#30340;&#24182;&#21457;&#35835;&#20889;&#12290;
&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;,&#23458;&#25143;&#19982;&#20854;&#20182;&#23458;&#25143;&#30340;&#34892;&#20026;&#26159;&#38548;&#31163;&#30340;,
&#20294;&#26159;&#22914;&#26524;&#25968;&#25454;&#24211;&#31995;&#32479;&#19981;&#33021;&#23558;&#20854;&#19982;&#20854;&#20182;&#24182;&#21457;&#30340;&#20132;&#20114;&#36827;&#34892;&#21327;&#35843;,&#35813;&#20107;&#21153;&#21487;&#33021;&#20250;&#34987;&#20013;&#27490;&#21644;&#22238;&#28378;&#12290;
&#19968;&#20123;&#25968;&#25454;&#24211;&#31995;&#32479;&#27604;&#20854;&#20182;&#31995;&#32479;&#26356;&#21892;&#20110;&#35843;&#21644;&#20107;&#21153;,&#32780;&#19988;&#22823;&#22810;&#25968;&#25968;&#25454;&#24211;&#31995;&#32479;&#20801;&#35768;&#36890;&#36807;&#25351;&#23450; <span class="emph">isolation levels</span> &#26469;&#35843;&#25972;&#35843;&#21644;&#12290;</p><p>PostgreSQL &#25903;&#25345;&#38750;&#24120;
<a href="http://www.postgresql.org/docs/9.2/static/mvcc.html">very fine-grained reconciliation</a>:
&#20004;&#20010;&#21516;&#26102;&#35835;&#21462;&#21644;&#20462;&#25913;&#21516;&#19968;&#20010;&#34920;&#30340;&#20107;&#21153;,&#22914;&#26524;&#23427;&#20204;&#28041;&#21450;&#21040;&#19981;&#30456;&#24178;&#30340;&#34892;&#38598;,&#21487;&#33021;&#37117;&#34987;&#20801;&#35768;&#23436;&#25104;&#12290;
 &#28982;&#32780;,&#23458;&#25143;&#24212;&#35813;&#20934;&#22791;&#37325;&#35797;&#37027;&#20123;&#20197; SQLSTATE &#21305;&#37197; <span class="RktVal">#rx"^40...$"</span> &#30340; <span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._exn~3afail~3asql%29%29" class="RktValLink" data-pltdoc="x">exn:fail:sql</a></span>
&#24322;&#24120;&#32780;&#22833;&#36133;&#30340;&#20107;&#21153;&ndash;&#36890;&#24120;&#26159; <span class="RktVal">"40001"</span>, "&#30001;&#20110;&#24182;&#21457;&#26356;&#26032;,&#26080;&#27861;&#24207;&#21015;&#21270;&#35775;&#38382;"&#12290;</p><p>MySQL &#30340;&#20107;&#21153;&#34892;&#20026;&#26681;&#25454;&#20351;&#29992;&#30340;&#23384;&#20648;&#39537;&#21160;&#31243;&#24207;&#32780;&#21464;&#21270;&#12290;
&#23458;&#25143;&#31471;&#24212;&#35813;&#20934;&#22791;&#37325;&#35797;&#37027;&#20123;&#20197; <span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._exn~3afail~3asql%29%29" class="RktValLink" data-pltdoc="x">exn:fail:sql</a></span> &#24322;&#24120;&#21644; SQLSTATE &#21305;&#37197; <span class="RktVal">#rx"^40...$"</span> &#32780;&#22833;&#36133;&#30340;&#20107;&#21153;&#12290;</p><p>SQLite &#25191;&#34892;&#19968;&#20010;
<a href="http://www.sqlite.org/lockingv3.html">very coarse-grained policy</a>:
&#27599;&#27425;&#21482;&#20801;&#35768;&#19968;&#20010;&#20107;&#21153;&#20889;&#20837;&#25968;&#25454;&#24211;,&#22240;&#27492;&#24182;&#21457;&#30340;&#20889;&#20837;&#32773;&#24456;&#21487;&#33021;&#21457;&#29983;&#20914;&#31361;&#12290;
&#23458;&#25143;&#31471;&#24212;&#35813;&#20934;&#22791;&#22909;&#37325;&#35797;&#37027;&#20123;&#20197; <span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._exn~3afail~3asql%29%29" class="RktValLink" data-pltdoc="x">exn:fail:sql</a></span> &#24322;&#24120;&#21644;SQLSTATE&#20026; <span class="RktVal">'</span><span class="RktVal">busy</span> &#32780;&#22833;&#36133;&#30340;&#20107;&#21153;&#12290;</p><p>&#38500;&#20102;&#37325;&#35797;&#25972;&#20010; SQLite &#20107;&#21153;&#22806;,&#36824;&#26377;&#19968;&#31181;&#26041;&#27861;&#26159;&#20197;&#36866;&#24403;&#30340;&#38145;&#32423;&#21035;&#21551;&#21160;&#27599;&#20010;&#20107;&#21153;,&#22240;&#20026;&#24403;&#19968;&#20010;&#20107;&#21153;&#26080;&#27861;&#21319;&#32423;&#20854;&#38145;&#32423;&#21035;&#26102;,&#36890;&#24120;&#20250;&#22833;&#36133;&#12290;
&#20197;&#40664;&#35748;&#27169;&#24335;&#21551;&#21160;&#19968;&#20010;&#21482;&#25191;&#34892;&#35835;&#30340;&#20107;&#21153;,
&#24182;&#20197; <span class="RktVal">'</span><span class="RktVal">immediate</span> &#27169;&#24335;&#21551;&#21160;&#19968;&#20010;&#21487;&#33021;&#25191;&#34892;&#20889;&#30340;&#20107;&#21153;(&#35265; <span class="RktSym"><a href="query-api.html#%28def._%28%28lib._db%2Fbase..rkt%29._start-transaction%29%29" class="RktValLink" data-pltdoc="x">start-transaction</a></span>)&#12290;
 &#36825;&#23601;&#25226;&#37325;&#35797;&#25972;&#20010;&#20107;&#21153;&#30340;&#38382;&#39064;&#36716;&#21270;&#20026;&#37325;&#35797;&#26368;&#21021;&#30340; <span class="stt">BEGIN TRANSACTION</span> &#35821;&#21477;&#30340;&#38382;&#39064;,
&#32780;&#19988;&#36825;&#20010;&#24211;&#24050;&#32463;&#33258;&#21160;&#37325;&#35797;&#20102;&#22240; <span class="RktVal">'</span><span class="RktVal">busy</span> &#38169;&#35823;&#32780;&#22833;&#36133;&#30340;&#21333;&#20010;&#35821;&#21477;&#12290;
&#26681;&#25454;&#20132;&#26131;&#30340;&#38271;&#24230;&#21644;&#39057;&#29575;,&#20320;&#21487;&#33021;&#38656;&#35201;&#35843;&#25972; <span class="RktVar">busy-retry-limit</span> (&#35265; <span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fmain..rkt%29._sqlite3-connect%29%29" class="RktValLink" data-pltdoc="x">sqlite3-connect</a></span>)&#12290;</p><p>ODBC &#30340;&#34892;&#20026;&#22240;&#39537;&#21160;&#21644;&#21518;&#31471;&#19981;&#21516;&#32780;&#19981;&#21516;&#12290;&#21442;&#35265;&#30456;&#24212;&#30340;&#25968;&#25454;&#24211;&#31995;&#32479;&#30340;&#25991;&#26723;&#12290;</p><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;intro-servlets&quot;">1.4<tt>&nbsp;</tt><a name="(part._intro-servlets)"></a>&#25968;&#25454;&#24211;&#21644; Web Servlets</h4><p>&#22312; Web servlet &#20013;&#20351;&#29992;&#25968;&#25454;&#24211;&#36830;&#25509;&#27604;&#22312;&#29420;&#31435;&#31243;&#24207;&#20013;&#26356;&#22797;&#26434;&#12290;
&#19968;&#20010; Servlet &#26377;&#21487;&#33021;&#21516;&#26102;&#20026;&#35768;&#22810;&#35831;&#27714;&#25552;&#20379;&#26381;&#21153;,&#27599;&#20010;&#35831;&#27714;&#37117;&#22312;&#19968;&#20010;&#21333;&#29420;&#30340;&#35831;&#27714;&#22788;&#29702;&#32447;&#31243;&#20013;&#12290;
&#27492;&#22806;,&#20351;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=stateless.html%23%2528def._%2528%2528lib._web-server%252Flang%252Fweb..rkt%2529._send%252Fsuspend%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend</a></span>,<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=stateless.html%23%2528def._%2528%2528lib._web-server%252Flang%252Fweb..rkt%2529._send%252Fsuspend%252Fdispatch%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend/dispatch</a></span>
&#31561;&#24847;&#21619;&#30528;&#26377;&#35768;&#22810;&#22320;&#26041;&#30340; servlet &#21487;&#33021;&#24320;&#22987;&#21644;&#20572;&#27490;&#25191;&#34892;,&#20197;&#26381;&#21153;&#20110;&#19968;&#20010;&#35831;&#27714;&#12290;</p><p>&#20026;&#20160;&#20040;&#19981;&#20351;&#29992;&#19968;&#20010;&#21333;&#19968;&#30340;&#36830;&#25509;&#26469;&#22788;&#29702;&#19968;&#20010; servlet &#30340;&#25152;&#26377;&#35831;&#27714;?
 &#20063;&#23601;&#26159;&#35828;,&#19982; servlet &#23454;&#20363;&#19968;&#36215;&#21019;&#24314;&#36830;&#25509;,&#24182;&#19988;&#27704;&#36828;&#19981;&#35201;&#26029;&#24320;&#36830;&#25509;&#12290;
 &#36825;&#26679;&#30340;&#19968;&#20010; servlet &#30475;&#36215;&#26469;&#23601;&#20687;&#19979;&#38754;&#36825;&#26679;:</p><blockquote class="SCodeFlow"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"bad-servlet.rkt"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=stateless.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db-conn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fmain..rkt%29._postgresql-connect%29%29" class="RktValLink" data-pltdoc="x">postgresql-connect</a></span><span class="hspace">&nbsp;</span><span class="RktSym">....</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktSym">req</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">....</span><span class="hspace">&nbsp;</span><span class="RktSym">db-conn</span><span class="hspace">&nbsp;</span><span class="RktSym">....</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><p>&#23545;&#25152;&#26377;&#35831;&#27714;&#20351;&#29992;&#19968;&#20010;&#36830;&#25509;&#30340;&#20027;&#35201;&#38382;&#39064;&#26159;,&#35775;&#38382;&#21516;&#19968;&#36830;&#25509;&#30340;&#22810;&#20010;&#32447;&#31243;&#27809;&#26377;&#34987;&#36866;&#24403;&#22320;
<a href="http://en.wikipedia.org/wiki/Isolation_%28database_systems%29">isolated</a> &#12290;
&#20363;&#22914;,&#22914;&#26524;&#19968;&#20010;&#32447;&#31243;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;&#35775;&#38382;&#36830;&#25509;,&#32780;&#21478;&#19968;&#20010;&#32447;&#31243;&#21457;&#20986;&#26597;&#35810;,
&#31532;&#20108;&#20010;&#32447;&#31243;&#21487;&#33021;&#20250;&#30475;&#21040;&#26080;&#25928;&#30340;&#25968;&#25454;,&#29978;&#33267;&#25200;&#20081;&#31532;&#19968;&#20010;&#32447;&#31243;&#30340;&#24037;&#20316;&#12290;</p><p>&#31532;&#20108;&#20010;&#38382;&#39064;&#26159;&#24615;&#33021;&#38382;&#39064;&#12290;
&#19968;&#20010;&#36830;&#25509;&#19968;&#27425;&#21482;&#33021;&#25191;&#34892;&#19968;&#20010;&#26597;&#35810;,&#32780;&#22823;&#22810;&#25968;&#25968;&#25454;&#24211;&#31995;&#32479;&#37117;&#33021;&#22815;&#36827;&#34892;&#24182;&#21457;&#26597;&#35810;&#22788;&#29702;&#12290;</p><p>&#22312; servlet &#20013;&#20351;&#29992;&#25968;&#25454;&#24211;&#36830;&#25509;&#30340;&#27491;&#30830;&#26041;&#27861;&#26159;&#20026;&#27599;&#20010;&#35831;&#27714;&#21019;&#24314;&#19968;&#20010;&#36830;&#25509;,&#24182;&#22312;&#22788;&#29702;&#23436;&#35831;&#27714;&#21518;&#26029;&#24320;&#36830;&#25509;&#12290;
&#20294;&#26159;,&#30001;&#20110;&#19968;&#20010;&#35831;&#27714;&#32447;&#31243;&#21487;&#33021;&#22312;&#24456;&#22810;&#22320;&#26041;&#24320;&#22987;&#21644;&#20572;&#27490;&#25191;&#34892;(&#30001;&#20110; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=stateless.html%23%2528def._%2528%2528lib._web-server%252Flang%252Fweb..rkt%2529._send%252Fsuspend%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend</a></span> &#31561;&#21407;&#22240;),
&#22312;&#36866;&#24403;&#30340;&#22320;&#26041;&#25554;&#20837;&#36830;&#25509;&#21644;&#26029;&#24320;&#30340;&#20195;&#30721;&#21487;&#33021;&#26159;&#20855;&#26377;&#25361;&#25112;&#24615;&#30340;,&#32780;&#19988;&#24456;&#28151;&#20081;&#12290;</p><p>&#19968;&#20010;&#26356;&#22909;&#30340;&#35299;&#20915;&#26041;&#26696;&#26159;&#20351;&#29992; <a href="connect.html#%28tech._virtual._connection%29" class="techoutside" data-pltdoc="x"><span class="techinside">virtual connection</span></a>,
&#26681;&#25454;&#38656;&#35201;&#33258;&#21160;&#21019;&#24314;&#19968;&#20010;&#29305;&#23450;&#20110;&#35831;&#27714;&#30340;(&#21363;&#29305;&#23450;&#20110;&#32447;&#31243;&#30340;)"&#23454;&#38469;&#36830;&#25509;",&#24182;&#22312;&#35831;&#27714;&#22788;&#29702;&#23436;&#27605;&#21518;(&#21363;&#32447;&#31243;&#32456;&#27490;&#26102;)&#26029;&#24320;&#36830;&#25509;&#12290;
&#20351;&#29992;&#21516;&#19968;&#34394;&#25311;&#36830;&#25509;&#30340;&#19981;&#21516;&#35831;&#27714;&#22788;&#29702;&#32447;&#31243;&#34987;&#20998;&#37197;&#20102;&#19981;&#21516;&#30340;&#23454;&#38469;&#36830;&#25509;,&#22240;&#27492;&#35831;&#27714;&#34987;&#36866;&#24403;&#38548;&#31163;&#12290;</p><blockquote class="SCodeFlow"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"better-servlet.rkt"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=stateless.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db-conn</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._virtual-connection%29%29" class="RktValLink" data-pltdoc="x">virtual-connection</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fmain..rkt%29._postgresql-connect%29%29" class="RktValLink" data-pltdoc="x">postgresql-connect</a></span><span class="hspace">&nbsp;</span><span class="RktSym">....</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktSym">req</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">....</span><span class="hspace">&nbsp;</span><span class="RktSym">db-conn</span><span class="hspace">&nbsp;</span><span class="RktSym">....</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><p>&#36825;&#20010;&#35299;&#20915;&#26041;&#26696;&#20445;&#30041;&#20102;&#22825;&#30495;&#30340;&#35299;&#20915;&#26041;&#26696;&#30340;&#31616;&#21333;&#24615;,&#24182;&#35299;&#20915;&#20102;&#38548;&#31163;&#38382;&#39064;,&#20294;&#20195;&#20215;&#26159;&#35201;&#21019;&#24314;&#35768;&#22810;&#30701;&#26242;&#30340;&#25968;&#25454;&#24211;&#36830;&#25509;&#12290;
&#36825;&#20010;&#20195;&#20215;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;&#19968;&#20010; <a href="connect.html#%28tech._connection._pool%29" class="techoutside" data-pltdoc="x"><span class="techinside">connection pool</span></a> &#26469;&#28040;&#38500;:</p><blockquote class="SCodeFlow"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"best-servlet.rkt"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=stateless.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db-conn</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._virtual-connection%29%29" class="RktValLink" data-pltdoc="x">virtual-connection</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection-pool%29%29" class="RktValLink" data-pltdoc="x">connection-pool</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fmain..rkt%29._postgresql-connect%29%29" class="RktValLink" data-pltdoc="x">postgresql-connect</a></span><span class="hspace">&nbsp;</span><span class="RktSym">....</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktSym">req</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">....</span><span class="hspace">&nbsp;</span><span class="RktSym">db-conn</span><span class="hspace">&nbsp;</span><span class="RktSym">....</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><p>&#36890;&#36807;&#20351;&#29992;&#30001;&#36830;&#25509;&#27744;&#25903;&#25345;&#30340;&#34394;&#25311;&#36830;&#25509;,servlet &#21487;&#20197;&#21516;&#26102;&#23454;&#29616;&#31616;&#21333;&#24615;&#12289;&#38548;&#31163;&#24615;&#21644;&#24615;&#33021;&#12290;</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.9&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;DB: 数据库连接&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;DB: 数据库连接&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="connect.html" title="forward to &quot;2 Connections&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>