<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>继续:  Racket 中的 Web 应用</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">继续:<span class="mywbr"> &nbsp;</span>  Racket &#20013;&#30340; Web &#24212;&#29992;</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._~e5~bc~80~e5~a7~8b~e4~bd~bf~e7~94~a8%29" class="tocviewlink" data-pltdoc="x">&#24320;&#22987;&#20351;&#29992;</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._~e5~ba~94~e7~94~a8~e7~a8~8b~e5~ba~8f%29" class="tocviewlink" data-pltdoc="x">&#24212;&#29992;&#31243;&#24207;</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._~e5~9f~ba~e6~9c~ac~e5~8d~9a~e5~ae~a2%29" class="tocviewlink" data-pltdoc="x">&#22522;&#26412;&#21338;&#23458;</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._~e6~b8~b2~e6~9f~93_.H.T.M.L%29" class="tocviewlink" data-pltdoc="x">&#28210;&#26579; HTML</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._~e6~a3~80~e6~9f~a5~e8~af~b7~e6~b1~82%29" class="tocviewlink" data-pltdoc="x">&#26816;&#26597;&#35831;&#27714;</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._~e9~ab~98~e7~ba~a7~e6~8e~a7~e5~88~b6~e6~b5~81%29" class="tocviewlink" data-pltdoc="x">&#39640;&#32423;&#25511;&#21046;&#27969;</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._~e5~88~86~e4~ba~ab~e5~92~8c~e5~90~8c~e4~ba~ab%29" class="tocviewlink" data-pltdoc="x">&#20998;&#20139;&#21644;&#21516;&#20139;</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="#%28part._~e6~89~a9~e5~b1~95~e6~a8~a1~e5~9e~8b%29" class="tocviewlink" data-pltdoc="x">&#25193;&#23637;&#27169;&#22411;</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="#%28part._~e6~89~93~e7~a0~b4~e6~98~be~e7~a4~ba%29" class="tocviewlink" data-pltdoc="x">&#25171;&#30772;&#26174;&#31034;</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="#%28part._~e6~b7~bb~e5~8a~a0~e4~b8~80~e4~b8~aa~e8~bf~94~e5~9b~9e~e6~8c~89~e9~92~ae%29" class="tocviewlink" data-pltdoc="x">&#28155;&#21152;&#19968;&#20010;&#36820;&#22238;&#25353;&#38062;</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="#%28part._~e7~94~a8~e9~a3~8e~e6~a0~bc~e8~a3~85~e9~a5~b0_%29" class="tocviewlink" data-pltdoc="x">&#29992;&#39118;&#26684;&#35013;&#39280;!</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="#%28part._~e5~8f~8c~e9~87~8d~e6~8f~90~e4~ba~a4~e9~94~99~e8~af~af%29" class="tocviewlink" data-pltdoc="x">&#21452;&#37325;&#25552;&#20132;&#38169;&#35823;</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="#%28part._~e6~8a~bd~e8~b1~a1~e5~8c~96~e7~9a~84~e6~a8~a1~e5~9e~8b%29" class="tocviewlink" data-pltdoc="x">&#25277;&#35937;&#21270;&#30340;&#27169;&#22411;</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="#%28part._~e4~b8~80~e4~b8~aa~e6~8c~81~e4~b9~85~e7~9a~84~e6~a8~a1~e5~9e~8b%29" class="tocviewlink" data-pltdoc="x">&#19968;&#20010;&#25345;&#20037;&#30340;&#27169;&#22411;</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="#%28part._~e4~bd~bf~e7~94~a8~e4~b8~80~e4~b8~aa_.S.Q.L_~e6~95~b0~e6~8d~ae~e5~ba~93%29" class="tocviewlink" data-pltdoc="x">&#20351;&#29992;&#19968;&#20010; SQL &#25968;&#25454;&#24211;</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="#%28part._~e4~bd~bf~e7~94~a8_.Formlets%29" class="tocviewlink" data-pltdoc="x">&#20351;&#29992; Formlets</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="#%28part._~e7~a6~bb~e5~bc~80_.Dr.Racket%29" class="tocviewlink" data-pltdoc="x">离开 Dr<span class="mywbr"> &nbsp;</span>Racket</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="#%28part._~e4~bd~bf~e7~94~a8_.H.T.T.P.S%29" class="tocviewlink" data-pltdoc="x">&#20351;&#29992; HTTPS</a></td></tr><tr><td align="right">19&nbsp;</td><td><a href="#%28part._~e5~90~91~e5~89~8d~e8~bf~88~e8~bf~9b%29" class="tocviewlink" data-pltdoc="x">&#21521;&#21069;&#36808;&#36827;</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">继续:<span class="mywbr"> &nbsp;</span>  Racket &#20013;&#30340; Web &#24212;&#29992;</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._~e5~bc~80~e5~a7~8b~e4~bd~bf~e7~94~a8%29" class="tocsubseclink" data-pltdoc="x">&#24320;&#22987;&#20351;&#29992;</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._~e5~ba~94~e7~94~a8~e7~a8~8b~e5~ba~8f%29" class="tocsubseclink" data-pltdoc="x">&#24212;&#29992;&#31243;&#24207;</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._~e5~9f~ba~e6~9c~ac~e5~8d~9a~e5~ae~a2%29" class="tocsubseclink" data-pltdoc="x">&#22522;&#26412;&#21338;&#23458;</a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-1..rkt%29._post%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">post</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-1..rkt%29._blog%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">blog</span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._~e6~b8~b2~e6~9f~93_.H.T.M.L%29" class="tocsubseclink" data-pltdoc="x">&#28210;&#26579; HTML</a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-1..rkt%29._render-post%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">render-<wbr></wbr>post</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-1..rkt%29._render-posts%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">render-<wbr></wbr>posts</span></a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._~e6~a3~80~e6~9f~a5~e8~af~b7~e6~b1~82%29" class="tocsubseclink" data-pltdoc="x">&#26816;&#26597;&#35831;&#27714;</a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._request-bindings%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">request-<wbr></wbr>bindings</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._extract-binding%2Fsingle%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">extract-<wbr></wbr>binding/<span class="mywbr"> &nbsp;</span>single</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._exists-binding~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">exists-<wbr></wbr>binding?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-2..rkt%29._can-parse-post~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">can-<wbr></wbr>parse-<wbr></wbr>post?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-2..rkt%29._parse-post%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">parse-<wbr></wbr>post</span></a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._~e9~ab~98~e7~ba~a7~e6~8e~a7~e5~88~b6~e6~b5~81%29" class="tocsubseclink" data-pltdoc="x">&#39640;&#32423;&#25511;&#21046;&#27969;</a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._~e5~88~86~e4~ba~ab~e5~92~8c~e5~90~8c~e4~ba~ab%29" class="tocsubseclink" data-pltdoc="x">&#20998;&#20139;&#21644;&#21516;&#20139;</a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-4..rkt%29._blog%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">blog</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-4..rkt%29._set-blog-posts%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">set-<wbr></wbr>blog-<wbr></wbr>posts!</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-4..rkt%29._blog-insert-post%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">blog-<wbr></wbr>insert-<wbr></wbr>post!</span></a></td></tr><tr><td><span class="tocsublinknumber">8<tt>&nbsp;</tt></span><a href="#%28part._~e6~89~a9~e5~b1~95~e6~a8~a1~e5~9e~8b%29" class="tocsubseclink" data-pltdoc="x">&#25193;&#23637;&#27169;&#22411;</a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-5..rkt%29._post%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">post</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-5..rkt%29._post-insert-comment%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">post-<wbr></wbr>insert-<wbr></wbr>comment!</span></a></td></tr><tr><td><span class="tocsublinknumber">9<tt>&nbsp;</tt></span><a href="#%28part._~e6~89~93~e7~a0~b4~e6~98~be~e7~a4~ba%29" class="tocsubseclink" data-pltdoc="x">&#25171;&#30772;&#26174;&#31034;</a></td></tr><tr><td><span class="tocsublinknumber">10<tt>&nbsp;</tt></span><a href="#%28part._~e6~b7~bb~e5~8a~a0~e4~b8~80~e4~b8~aa~e8~bf~94~e5~9b~9e~e6~8c~89~e9~92~ae%29" class="tocsubseclink" data-pltdoc="x">&#28155;&#21152;&#19968;&#20010;&#36820;&#22238;&#25353;&#38062;</a></td></tr><tr><td><span class="tocsublinknumber">11<tt>&nbsp;</tt></span><a href="#%28part._~e7~94~a8~e9~a3~8e~e6~a0~bc~e8~a3~85~e9~a5~b0_%29" class="tocsubseclink" data-pltdoc="x">&#29992;&#39118;&#26684;&#35013;&#39280;!</a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-7..rkt%29._static-files-path%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">static-<wbr></wbr>files-<wbr></wbr>path</span></a></td></tr><tr><td><span class="tocsublinknumber">12<tt>&nbsp;</tt></span><a href="#%28part._~e5~8f~8c~e9~87~8d~e6~8f~90~e4~ba~a4~e9~94~99~e8~af~af%29" class="tocsubseclink" data-pltdoc="x">&#21452;&#37325;&#25552;&#20132;&#38169;&#35823;</a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._redirect%2Fget%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">redirect/<span class="mywbr"> &nbsp;</span>get</span></span></a></td></tr><tr><td><span class="tocsublinknumber">13<tt>&nbsp;</tt></span><a href="#%28part._~e6~8a~bd~e8~b1~a1~e5~8c~96~e7~9a~84~e6~a8~a1~e5~9e~8b%29" class="tocsubseclink" data-pltdoc="x">&#25277;&#35937;&#21270;&#30340;&#27169;&#22411;</a></td></tr><tr><td><span class="tocsublinknumber">14<tt>&nbsp;</tt></span><a href="#%28part._~e4~b8~80~e4~b8~aa~e6~8c~81~e4~b9~85~e7~9a~84~e6~a8~a1~e5~9e~8b%29" class="tocsubseclink" data-pltdoc="x">&#19968;&#20010;&#25345;&#20037;&#30340;&#27169;&#22411;</a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-9..rkt%29._blog%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">blog</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-9..rkt%29._blog-insert-post%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">blog-<wbr></wbr>insert-<wbr></wbr>post!</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fiteration-9..rkt%29._post-insert-comment%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">post-<wbr></wbr>insert-<wbr></wbr>comment!</span></a></td></tr><tr><td><span class="tocsublinknumber">15<tt>&nbsp;</tt></span><a href="#%28part._~e4~bd~bf~e7~94~a8~e4~b8~80~e4~b8~aa_.S.Q.L_~e6~95~b0~e6~8d~ae~e5~ba~93%29" class="tocsubseclink" data-pltdoc="x">&#20351;&#29992;&#19968;&#20010; SQL &#25968;&#25454;&#24211;</a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fdummy-10..rkt%29._blog%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">blog</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fscribblings%2Ftutorial%2Fexamples%2Fdummy-10..rkt%29._post%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">post</span></a></td></tr><tr><td><span class="tocsublinknumber">16<tt>&nbsp;</tt></span><a href="#%28part._~e4~bd~bf~e7~94~a8_.Formlets%29" class="tocsubseclink" data-pltdoc="x">&#20351;&#29992; Formlets</a></td></tr><tr><td><span class="tocsublinknumber">17<tt>&nbsp;</tt></span><a href="#%28part._~e7~a6~bb~e5~bc~80_.Dr.Racket%29" class="tocsubseclink" data-pltdoc="x">离开 Dr<span class="mywbr"> &nbsp;</span>Racket</a></td></tr><tr><td><span class="tocsublinknumber">18<tt>&nbsp;</tt></span><a href="#%28part._~e4~bd~bf~e7~94~a8_.H.T.T.P.S%29" class="tocsubseclink" data-pltdoc="x">&#20351;&#29992; HTTPS</a></td></tr><tr><td><span class="tocsublinknumber">19<tt>&nbsp;</tt></span><a href="#%28part._~e5~90~91~e5~89~8d~e8~bf~88~e8~bf~9b%29" class="tocsubseclink" data-pltdoc="x">&#21521;&#21069;&#36808;&#36827;</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.9</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.9&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._~e7~bb~a7~e7~bb~ad___.Racket_~e4~b8~ad~e7~9a~84_.Web_~e5~ba~94~e7~94~a8)"></a>&#32487;&#32493;:  Racket &#20013;&#30340; Web &#24212;&#29992;</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Danny Yoo &lt;<a href="mailto:dyoo@hashcollision.org">dyoo@hashcollision.org</a>&gt;<br/>and Jay McCarthy &lt;<a href="mailto:jay@racket-lang.org">jay@racket-lang.org</a>&gt;</p></span></div><p>&#25105;&#20204;&#22914;&#20309;&#32534;&#20889;&#21160;&#24577; Web &#24212;&#29992;&#31243;&#24207;? &#22312;&#26412;&#25945;&#31243;&#20013;,&#25105;&#20204;&#23558;&#23637;&#31034;&#22914;&#20309;&#20351;&#29992; Racket &#23454;&#29616;&#36825;&#19968;&#30446;&#26631;&#12290;
&#25105;&#20204;&#35299;&#37322;&#22914;&#20309;&#21551;&#21160; Web &#26381;&#21153;&#22120;,&#22914;&#20309;&#29983;&#25104;&#21160;&#24577; Web &#20869;&#23481;,&#20197;&#21450;&#22914;&#20309;&#19982;&#29992;&#25143;&#20132;&#20114;&#12290; &#25105;&#20204;&#30340;&#24037;&#20316;&#31034;&#20363;&#23558;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;&#32593;&#32476;&#26085;&#35760;&#8212;&#8212;&#19968;&#20010; &#8220;&#21338;&#23458;&#8221;&#12290;</p><p>&#26412;&#25945;&#31243;&#38754;&#21521;&#37027;&#20123;&#24050;&#38405;&#35835;&#24182;&#36275;&#22815;&#25484;&#25569;
<span style="font-style: italic"><a href="http://www.htdp.org/">How to Design Programs</a></span> &#30340;&#23398;&#29983;,&#20197;&#20102;&#35299;&#22914;&#20309;&#20351;&#29992;&#32467;&#26500;,&#39640;&#38454;&#20989;&#25968;&#21644;&#19968;&#28857;&#28857;&#21464;&#21160;&#12290;</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;开始使用&quot;">1<tt>&nbsp;</tt><a name="(part._~e5~bc~80~e5~a7~8b~e4~bd~bf~e7~94~a8)"></a>&#24320;&#22987;&#20351;&#29992;</h3><p>&#26412;&#25945;&#31243;&#20013;&#25152;&#38656;&#30340;&#19968;&#20999;&#37117;&#22312; <a href="http://racket-lang.org/">Racket</a> &#20013;&#25552;&#20379;; &#25105;&#20204;&#23558;&#20351;&#29992; DrRacket &#27169;&#22359;&#35821;&#35328;&#12290;</p><p>&#22312; DrRacket &#30340; Definitions &#31383;&#21475;&#20013;&#36755;&#20837;&#20197;&#19979;&#20869;&#23481;,&#28982;&#21518;&#25353; <span class="ssansserif">Run</span> &#25353;&#38062;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fxexpr..rkt%2529._response%252Fxexpr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response/xexpr</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">html</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Under construction"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#22914;&#26524;&#32593;&#32476;&#27983;&#35272;&#22120;&#20986;&#29616; &#8220;Under construction&#8221; &#39029;&#38754;,&#37027;&#20040;&#35831;&#39640;&#20852;&#22320;&#25293;&#25163;,&#22240;&#20026;&#20320;&#24050;&#32463;&#26500;&#24314;&#20102;&#31532;&#19968;&#20010;&#32593;&#32476;&#24212;&#29992;&#31243;&#24207;!
&#25105;&#20204;&#36824;&#27809;&#26377;&#20570;&#21040;&#36825;&#19968;&#28857;,&#20294;&#25105;&#20204;&#20250;&#21040;&#37027;&#37324;&#12290;
&#29616;&#22312;,&#25353; <span class="ssansserif">Stop</span> &#25353;&#38062;&#20851;&#38381;&#26381;&#21153;&#22120;&#12290;</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;应用程序&quot;">2<tt>&nbsp;</tt><a name="(part._~e5~ba~94~e7~94~a8~e7~a8~8b~e5~ba~8f)"></a>&#24212;&#29992;&#31243;&#24207;</h3><p>&#25105;&#20204;&#24076;&#26395;&#36890;&#36807;&#23637;&#31034;&#22914;&#20309;&#24320;&#21457;&#21338;&#23458;&#26469;&#35762;&#25480;&#26412;&#25945;&#31243;&#12290;
&#21338;&#23458;&#30340;&#29992;&#25143;&#24212;&#35813;&#33021;&#22815;&#21019;&#24314;&#26032;&#24086;&#23376;&#24182;&#21521;&#29616;&#26377;&#24086;&#23376;&#28155;&#21152;&#35780;&#35770;&#12290;
&#25105;&#20204;&#23558;&#36845;&#20195;&#22320;&#25509;&#36817;&#20219;&#21153;,&#25351;&#20986;&#27839;&#36884;&#30340;&#19968;&#20004;&#20010;&#38519;&#38449;&#12290; &#35745;&#21010;&#22823;&#33268;&#22914;&#19979;:</p><ul><li><p>&#26174;&#31034;&#24086;&#23376;&#30340;&#38745;&#24577;&#21015;&#34920;&#12290;</p></li><li><p>&#20801;&#35768;&#29992;&#25143;&#21521;&#31995;&#32479;&#28155;&#21152;&#26032;&#24086;&#23376;&#12290;</p></li><li><p>&#25193;&#23637;&#27169;&#22411;&#20197;&#20801;&#35768;&#29992;&#25143;&#21521;&#24086;&#23376;&#28155;&#21152;&#27880;&#37322;&#12290;</p></li><li><p>&#20801;&#35768;&#25152;&#26377;&#29992;&#25143;&#20849;&#20139;&#21516;&#19968;&#32452;&#24086;&#23376;&#12290;</p></li><li><p>&#23558;&#25105;&#20204;&#30340;&#25968;&#25454;&#32467;&#26500;&#24207;&#21015;&#21270;&#21040;&#30913;&#30424;&#12290;</p></li></ul><p>&#21040;&#26412;&#25945;&#31243;&#32467;&#26463;&#26102;,&#25105;&#20204;&#23558;&#26377;&#19968;&#20010;&#31616;&#21333;&#30340;&#21338;&#23458;&#24212;&#29992;&#31243;&#24207;&#21551;&#21160;&#24182;&#36816;&#34892;&#12290;</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;基本博客&quot;">3<tt>&nbsp;</tt><a name="(part._~e5~9f~ba~e6~9c~ac~e5~8d~9a~e5~ae~a2)"></a>&#22522;&#26412;&#21338;&#23458;</h3><p>&#25105;&#20204;&#39318;&#20808;&#23450;&#20041;&#24517;&#35201;&#30340;&#25968;&#25454;&#32467;&#26500;&#12290; &#24086;&#23376;&#26159;:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-1..rkt)._post-body))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-1..rkt)._post-title))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-1..rkt)._post~3f))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-1..rkt)._struct~3apost))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-1..rkt)._post))"></a><span class="RktSym"><span class="RktSymDef RktSym">post</span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">title</span><span class="stt"> </span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote><p><br/></p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#20030;&#20960;&#20010;&#24086;&#23376;&#30340;&#20363;&#23376;&#12290;</p><p>&#25509;&#19979;&#26469;,&#25105;&#20204;&#36890;&#36807;&#19968;&#20010;&#24086;&#23376;&#21015;&#34920;&#23450;&#20041;&#19968;&#20010;&#21338;&#23458;:</p><p><br/></p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-1..rkt)._blog))"></a><span class="RktSym"><span class="RktSymDef RktSym">blog</span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">post?</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p>&#36825;&#37324;,&#26159;&#19968;&#20010;&#38750;&#24120;&#31616;&#21333;&#30340;&#21338;&#23458;&#31034;&#20363;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post!"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Hey, this is my first post!"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#29616;&#22312;&#35753;&#25105;&#20204;&#30340; Web &#24212;&#29992;&#31243;&#24207;&#26174;&#31034;&#23427;&#12290;</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;渲染_HTML&quot;">4<tt>&nbsp;</tt><a name="(part._~e6~b8~b2~e6~9f~93_.H.T.M.L)"></a>&#28210;&#26579; HTML</h3><p>&#24403; Web &#27983;&#35272;&#22120;&#35775;&#38382;&#25105;&#20204;&#30340;&#21338;&#23458;&#30340; URL &#26102;,&#27983;&#35272;&#22120;&#26500;&#36896;&#19968;&#20010;&#35831;&#27714;&#32467;&#26500;&#24182;&#36890;&#36807;&#32593;&#32476;&#21457;&#36865;&#21040;&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#12290;
&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;&#20989;&#25968;,&#25105;&#20204;&#31216;&#20043;&#20026; <span class="RktSym">start</span>, &#26469;&#21709;&#24212;&#36825;&#20123;&#35831;&#27714;&#24182;&#20135;&#29983;&#21709;&#24212;&#12290;
&#19968;&#20010;&#22522;&#26412;&#30340;&#21709;&#24212;&#26159;&#26174;&#31034;&#19968;&#20010; HTML &#39029;&#38754;; &#36825;&#26159;&#36890;&#36807;&#20989;&#25968; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fxexpr..rkt%2529._response%252Fxexpr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response/xexpr</a></span> &#26469;&#23436;&#25104;&#30340;,
&#23427;&#25509;&#21463;&#19968;&#20010;&#20195;&#34920;&#25152;&#38656; HTML &#30340; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#12290; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#23450;&#20041;&#20026;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xexpr/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._flat-rec-contract%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">flat-rec-contract</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._cons%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xexpr</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._cons%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._cons%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._list%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xexpr</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#20197;&#19979;&#31034;&#20363;&#35828;&#26126;&#20351;&#29992; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#34920;&#31034; HTML &#26159;&#22810;&#20040;&#33258;&#28982;&#12290;</p><p><span class="RktSym">xexpr/c</span> &#20013;&#30340;&#31532;&#19968;&#20010;&#36873;&#25321;&#26159; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span> &#12290; &#20363;&#22914;, HTML &#30340; <span class="stt">hello</span> &#34920;&#31034;&#20026; <span class="RktVal">"hello"</span> &#12290;
&#20026;&#20102;&#20445;&#35777;&#26377;&#25928;&#30340; HTML,&#23383;&#31526;&#20018;&#22312;&#36755;&#20986;&#26102;&#20250;&#33258;&#21160;&#36716;&#20041;&#12290;
&#22240;&#27492;, <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> <span class="RktVal">"&lt;b&gt;Unfinished tag"</span> &#34987;&#21576;&#29616;&#20026; HTML <span class="stt">&amp;lt;b&amp;gt;Unfinished tag</span>,
&#32780;&#19981;&#26159;&#20316;&#20026; <span class="stt">&lt;b&gt;Unfinished tag</span> &#12290;
&#31867;&#20284;&#22320;, <span class="RktVal">"&lt;i&gt;Finished tag&lt;/i&gt;"</span> &#34987;&#21576;&#29616;&#20026; <span class="stt">&amp;lt;i&amp;gt;Finished tag&amp;lt;/i&amp;gt;</span>,
&#32780;&#19981;&#26159;&#20316;&#20026; <span class="stt">&lt;i&gt;Finished tag&lt;/i&gt;</span> &#12290;</p><p><span class="RktSym">xexpr/c</span> &#20013;&#30340;&#31532;&#20108;&#20010;&#36873;&#25321;&#26159;&#36882;&#24402;&#21512;&#21516; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._cons%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cons/c</a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="stt"> </span><span class="RktSym">xexpr</span><span class="RktPn">)</span><span class="RktPn">)</span> &#12290;
&#20363;&#22914;, HTML <span class="stt">&lt;p&gt;This is an example&lt;/p&gt;</span> &#30001; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#34920;&#31034;&#20026;:</p><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="stt"> </span><span class="RktVal">"This is an example"</span><span class="RktVal">)</span>.</p><p>&#26368;&#21518;, <span class="RktSym">xexpr/c</span> &#20013;&#30340;&#31532;&#19977;&#20010;&#36873;&#39033;&#20801;&#35768; HTML &#26631;&#31614;&#20013;&#30340;&#21442;&#25968;&#12290; &#20363;&#22914;, <span class="stt">&lt;a href="link.html"&gt;Past&lt;/a&gt;</span> &#34920;&#31034;&#20026;:</p><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="stt"> </span><span class="RktVal">"link.html"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">"Past"</span><span class="RktVal">)</span></p><p>&#20197;&#21450; <span class="stt">&lt;p&gt;This is &lt;div class="emph"&gt;another&lt;/div&gt; example.&lt;/p&gt;</span> &#34920;&#31034;&#20026;:</p><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="stt"> </span><span class="RktVal">"This is "</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">div</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="stt"> </span><span class="RktVal">"emph"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">"another"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">" example."</span><span class="RktVal">)</span>.</p><p>&#25105;&#20204;&#20063;&#21487;&#20197;&#20351;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cons%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cons</a></span> &#21644; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span> &#26469; &#8220;&#25163;&#21160;&#8221; &#29983;&#25104;&#36825;&#20123; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> ,&#20294;&#26159;&#21487;&#20197;&#24471;&#21040;&#24456;&#24378;&#22823;&#30340;&#34920;&#29616;&#24418;&#24335;&#12290;
&#20363;&#22914;,&#20197;&#19979; Racket &#34920;&#36798;&#24335;&#37117;&#35745;&#31639;&#20026;&#30456;&#21516;&#30340; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Some title"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is a simple static page."</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Some title"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is a simple static page."</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote><p>&#20294;&#26159;&#21518;&#32773;&#26356;&#23481;&#26131;&#38405;&#35835;&#21644;&#36755;&#20837;,&#22240;&#20026;&#23427;&#20351;&#29992;&#21069;&#23548;&#24341;&#21495;&#26469;&#31616;&#27905;&#22320;&#34920;&#31034;&#21015;&#34920;&#32467;&#26500;&#12290;
&#36825;&#23601;&#26159;&#22914;&#20309;&#20351;&#29992; aplomb &#26500;&#36896;&#38745;&#24577; html &#21709;&#24212;!(&#26377;&#20851;&#25193;&#23637;&#21015;&#34920;&#32553;&#20889;&#24418;&#24335;&#30340;&#26356;&#22810;&#20449;&#24687;,
&#35831;&#21442;&#38405; <a href="http://htdp.org/">How to Design Programs</a> &#30340;
<a href="http://htdp.org/2003-09-26/Book/curriculum-Z-H-17.html#node_chap_13">Section 13</a> &#12290;)</p><p>&#28982;&#32780;,&#20107;&#23454;&#35777;&#26126;,&#36825;&#31181;&#31616;&#21333;&#30340;&#21015;&#34920;&#32553;&#20889;&#19981;&#33021;&#20135;&#29983;&#21160;&#24577;&#30340; web &#20869;&#23481;&#12290;
&#22914;&#26524;&#25105;&#20204;&#35797;&#22270;&#23558;&#34920;&#36798;&#24335;&#27880;&#20837;&#21040;&#30001;&#31616;&#21333;&#21015;&#34920;&#32553;&#20889;&#26500;&#36896;&#30340; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#20013;,&#37027;&#20123;&#34920;&#36798;&#24335;&#23558;&#34987;&#35270;&#20026;&#21015;&#34920;&#32467;&#26500;&#30340;&#19968;&#37096;&#20998;,&#23383;&#38754;&#19978;!&#25105;&#20204;&#38656;&#35201;&#30340;&#26159;&#19968;&#20010;&#31526;&#21495;,
&#32473;&#20986;&#20102;&#24341;&#29992;&#21015;&#34920;&#32553;&#20889;&#30340;&#26041;&#20415;&#24615;,&#20294;&#26159;&#36825;&#20063;&#20801;&#35768;&#25105;&#20204;&#23558;&#21015;&#34920;&#32467;&#26500;&#30340;&#37096;&#20998;&#35270;&#20026;&#27491;&#24120;&#34920;&#36798;&#24335;&#12290;
&#20063;&#23601;&#26159;&#35828;,&#25105;&#20204;&#24819;&#23450;&#20041;&#19968;&#20010; <span class="emph">template</span> ,&#23427;&#30340;&#21344;&#20301;&#31526;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#34920;&#36798;&#24182;&#21160;&#24577;&#22635;&#20805;&#12290;</p><p>Racket &#20197;&#31216;&#20026; quasiquote &#30340;&#31526;&#21495;&#30340;&#24418;&#24335;&#25552;&#20379;&#20102;&#36825;&#31181;&#27169;&#26495;&#21151;&#33021;&#12290;&#22312;&#25490;&#24207;&#20013;,&#21015;&#34920;&#32553;&#20889;&#19981;&#26159;&#21069;&#23548;&#24341;&#29992;,&#32780;&#26159;&#24102;&#26377;&#21453;&#21521;&#24341;&#21495;(&lsquo;)&#12290;
&#22914;&#26524;&#25105;&#20204;&#24076;&#26395;&#36825;&#20010;&#21453;&#24341;&#21495;&#30340;&#21015;&#34920;&#30340;&#20219;&#20309;&#23376;&#34920;&#36798;&#24335;&#34987;&#27491;&#24120;&#22320;&#35745;&#31639;(&#8220;&#26410;&#24341;&#29992;&#8221;),
&#37027;&#20040;&#25105;&#20204;&#25152;&#35201;&#20570;&#30340;&#23601;&#26159;&#22312;&#35813;&#23376;&#34920;&#36798;&#24335;&#21069;&#38754;&#25918;&#32622;&#19968;&#20010;&#36887;&#21495;(,)&#12290;&#20363;&#22914;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-greeting: string -&gt; response</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a name, and produces a dynamic response.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-greeting</span><span class="hspace">&nbsp;</span><span class="RktSym">a-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fxexpr..rkt%2529._response%252Fxexpr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response/xexpr</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Welcome"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Hello "</span><span class="hspace">&nbsp;</span><span class="RktSym">a-name</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#32534;&#20889;&#19968;&#20010;&#20989;&#25968;,&#23427;&#20351;&#29992;&#19968;&#20010; <span class="RktSym">post</span> &#24182;&#29983;&#25104;&#19968;&#20010;&#34920;&#31034;&#35813;&#20869;&#23481;&#30340; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#12290;</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-1..rkt)._render-post))"></a><span class="RktSym"><span class="RktSymDef RktSym">render-post</span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post?</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">xexpr/c</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p><br/></p><p>&#20363;&#22914;,&#25105;&#20204;&#24819;&#35201;:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First post!"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is a first post."</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><p>&#24471;&#20986;:</p><blockquote class="SCodeFlow"><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"First post!"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is a first post."</span><span class="RktVal">)</span><span class="RktVal">)</span></p></blockquote><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#25105;&#20204;&#26377;&#26102;&#24819;&#35201;&#23558; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#30340;&#21015;&#34920;&#23884;&#20837;&#21040;&#21478;&#19968;&#20010;&#20805;&#24403;&#27169;&#26495;&#30340;&#21015;&#34920;&#20013;&#12290;
&#20363;&#22914;,&#32473;&#23450; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#30340;&#21015;&#34920; <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Larry"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Curly"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Moe"</span><span class="RktVal">)</span><span class="RktVal">)</span>,&#25105;&#20204;&#21487;&#33021;&#24819;&#21019;&#24314;&#21333;&#20010; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktVal">"Larry"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktVal">"Curly"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktVal">"Moe"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote><p>&#36825;&#19981;&#33021;&#20351;&#29992;&#32431;&#24341;&#21495;,&#22240;&#20026;&#22312; <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Larry"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Curly"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Moe"</span><span class="RktVal">)</span><span class="RktVal">)</span> &#21069;&#25918;&#32622;&#19968;&#20010;&#36887;&#21495;&#23558;&#24341;&#29992;&#25972;&#20010;&#21015;&#34920;,
&#20135;&#29983;&#26684;&#24335;&#19981;&#27491;&#30830;&#30340;&#34920;&#36798;&#24335; <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Larry"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Curly"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Moe"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span> &#12290;</p><p>&#30456;&#21453;,&#25105;&#20204;&#24517;&#39035;&#25340;&#25509;&#21015;&#34920;,&#22914;&#19979;: <span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="stt"> </span><span class="RktRdr">,@</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Larry"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Curly"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">li</span><span class="stt"> </span><span class="RktVal">"Moe"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span> &#12290;
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">unquote-splicing</a></span> &#24418;&#24335;, <span class="RktRdr">,@</span><span class="RktSym">expression</span>, &#20801;&#35768;&#25105;&#20204;&#26041;&#20415;&#22320;&#23558; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#29255;&#27573;&#21015;&#34920;&#25340;&#25509;&#21040;&#26356;&#22823;&#30340;&#27169;&#26495;&#21015;&#34920;&#20013;&#12290;
&#20026;&#20102;&#27010;&#25324;&#31034;&#20363;,&#36825;&#37324;&#26377;&#20004;&#20010;&#24110;&#21161;&#20989;&#25968;&#23558;&#20219;&#20309; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#21015;&#34920;&#36716;&#25442;&#20026;&#19968;&#20010;&#34920;&#31034;&#26080;&#24207;,&#36880;&#39033; HTML &#21015;&#34920;&#30340; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> :</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-itemized-list: (listof xexpr) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a list of items, and produces a rendering</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as an unordered list.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="hspace">&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-item: xexpr -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes an xexpr, and produces a rendering</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as a list item.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">a-fragment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-fragment</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#32534;&#20889;&#19968;&#20010;&#20989;&#25968; <span class="RktSym">render-posts</span> &#65292;&#23427;&#20351;&#29992;&#19968;&#20010; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="stt"> </span><span class="RktSym">post?</span><span class="RktPn">)</span>
&#24182;&#20026;&#35813;&#20869;&#23481;&#29983;&#25104;&#19968;&#20010; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#12290;</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-1..rkt)._render-posts))"></a><span class="RktSym"><span class="RktSymDef RktSym">render-posts</span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">post?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">xexpr/c</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p><br/></p><p>&#20363;&#22914;,</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Flist..rkt%2529._empty%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">empty</a></span><span class="RktPn">)</span></p></blockquote><p>&#24212;&#35813;&#20135;&#29983;</p><blockquote class="SCodeFlow"><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></p></blockquote><p>&#21644;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post 1"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Body 1"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post 2"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Body 2"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#24212;&#35813;&#20135;&#29983;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post 1"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"Body 1"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post 2"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"Body 2"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#29616;&#22312;&#25105;&#20204;&#26377;&#20102; <span class="RktSym">render-posts</span> &#25968;,&#35753;&#25105;&#20204;&#37325;&#26032;&#35775;&#38382;&#25105;&#20204;&#30340; web &#24212;&#29992;&#31243;&#24207;,
&#24182;&#25913;&#21464;&#25105;&#20204;&#30340; <span class="RktSym">start</span> &#20989;&#25968;&#36820;&#22238;&#19968;&#20010;&#26377;&#36259;&#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fresponse-structs..rkt%2529._response%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response</a></span> &#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A blog is a (listof post)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and a post is a (post title body)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG: blog</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The static blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is another post"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is my first post"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; response</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a request, and produces a page that displays all of the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">web content.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: blog request -&gt; response</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog and a request, and produces an HTML page</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of the content of the blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post: post -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post, produces an xexpr fragment of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-posts: blog -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog, produces an xexpr fragment</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of all its posts.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#22914;&#26524;&#25105;&#20204;&#28857;&#20987; Run &#36816;&#34892;,&#25105;&#20204;&#24212;&#35813;&#22312;&#20320;&#30340; Web &#27983;&#35272;&#22120;&#20013;&#30475;&#21040;&#21338;&#23458;&#24086;&#23376;&#12290;</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;检查请求&quot;">5<tt>&nbsp;</tt><a name="(part._~e6~a3~80~e6~9f~a5~e8~af~b7~e6~b1~82)"></a>&#26816;&#26597;&#35831;&#27714;</h3><p>&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#20173;&#28982;&#26377;&#28857;&#22826;&#38745;&#24577;:&#25105;&#20204;&#21160;&#24577;&#26500;&#24314;&#39029;&#38754;,&#20294;&#25105;&#20204;&#36824;&#27809;&#26377;&#20026;&#29992;&#25143;&#25552;&#20379;&#19968;&#31181;&#26041;&#27861;&#26469;&#21019;&#24314;&#26032;&#24086;&#23376;&#12290;
&#35753;&#25105;&#20204;&#29616;&#22312;&#36890;&#36807;&#25552;&#20379;&#19968;&#20010;&#34920;&#21333;,&#35753;&#29992;&#25143;&#28155;&#21152;&#19968;&#20010;&#26032;&#30340;&#21338;&#23458;&#26465;&#30446;&#12290; &#24403;&#29992;&#25143;&#25353;&#19979;&#25552;&#20132;&#25353;&#38062;&#26102;,&#25105;&#20204;&#24076;&#26395;&#26032;&#30340;&#24086;&#23376;&#20986;&#29616;&#22312;&#39029;&#38754;&#30340;&#39030;&#37096;&#12290;</p><p>&#25105;&#20204;&#36824;&#27809;&#26377;&#23545;&#25105;&#20204;&#20256;&#36882;&#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span> &#23545;&#35937;&#20570;&#20219;&#20309;&#20107;&#24773;&#12290; &#27491;&#22914;&#20320;&#21487;&#33021;&#24050;&#32463;&#29468;&#21040;&#30340;,&#23427;&#19981;&#26159;&#30495;&#30340;&#24212;&#35813;&#34987;&#24573;&#30053;&#36825;&#20040;&#22810;!
&#24403;&#29992;&#25143;&#22635;&#20889;&#19968;&#20010; Web &#34920;&#21333;&#24182;&#25552;&#20132;&#23427;&#26102;,
&#29992;&#25143;&#30340;&#27983;&#35272;&#22120;&#20351;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._request-bindings%29%29" class="RktValLink" data-pltdoc="x">request-bindings</a></span> &#20989;&#25968;&#26500;&#36896;&#19968;&#20010;&#21253;&#21547;&#34920;&#21333;&#20540;&#30340;&#26032; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span> ,&#25105;&#20204;&#21487;&#20197;&#22312;&#25105;&#20204;&#30340;&#26411;&#23614;&#25552;&#21462;&#23427;:</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/servlet..rkt)._request-bindings))"></a><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._request-bindings%29%29" class="RktValDef RktValLink" data-pltdoc="x">request-bindings</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings?</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p><br/></p><p>&#35201;&#20174;&#19968;&#32452;&#32465;&#23450;&#20013;&#25552;&#21462;&#21333;&#20010; Web &#34920;&#21333;&#20540;,Racket &#25552;&#20379;&#20102;&#20989;&#25968; <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._extract-binding%2Fsingle%29%29" class="RktValLink" data-pltdoc="x">extract-binding/single</a></span>, &#23427;&#36824;&#33719;&#21462; Web &#34920;&#21333;&#30340;&#30456;&#24212;&#23383;&#27573;&#30340;&#21517;&#31216;:</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/servlet..rkt)._extract-binding/single))"></a><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._extract-binding%2Fsingle%29%29" class="RktValDef RktValLink" data-pltdoc="x">extract-binding/single</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">bindings?</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p><br/></p><p>&#35201;&#39564;&#35777;&#19968;&#32452;&#32465;&#23450;&#26159;&#21542;&#21253;&#21547;&#29305;&#23450;&#23383;&#27573;,&#35831;&#20351;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._exists-binding~3f%29%29" class="RktValLink" data-pltdoc="x">exists-binding?</a></span>:</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/servlet..rkt)._exists-binding~3f))"></a><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._exists-binding~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">exists-binding?</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">bindings?</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p><br/></p><p>&#36890;&#36807;&#36825;&#20123;&#21151;&#33021;,&#25105;&#20204;&#21487;&#20197;&#35774;&#35745;&#21709;&#24212; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span> &#24182;&#26377;&#25928;&#21709;&#24212;&#30340;&#20989;&#25968;&#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#32534;&#20889;&#19968;&#20010;&#20989;&#25968; <span class="RktSym">can-parse-post?</span>  &#26469;&#21709;&#24212;&#19968;&#32452;&#32465;&#23450;&#12290;
&#22914;&#26524;&#31526;&#21495; <span class="RktVal">'</span><span class="RktVal">title</span> &#21644; <span class="RktVal">'</span><span class="RktVal">body</span> &#37117;&#23384;&#22312;&#32465;&#23450;,&#23427;&#24212;&#35813;&#20135;&#29983; <span class="RktVal">#t</span> ,&#21542;&#21017;&#20135;&#29983; <span class="RktVal">#f</span> &#12290;</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-2..rkt)._can-parse-post~3f))"></a><span class="RktSym"><span class="RktSymDef RktSym">can-parse-post?</span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bindings?</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p><br/></p><p><span style="font-weight: bold">Exercise.</span> &#32534;&#20889;&#19968;&#20010;&#20989;&#25968; <span class="RktSym">parse-post</span> ,&#21709;&#24212;&#19968;&#32452;&#32465;&#23450;&#12290;
&#20551;&#35774;&#32465;&#23450;&#32467;&#26500;&#26377; <span class="RktVal">'</span><span class="RktVal">title</span> &#21644; <span class="RktVal">'</span><span class="RktVal">body</span> &#30340;&#31526;&#21495;&#20540;, <span class="RktSym">parse-post</span> &#24212;&#35813;&#20135;&#29983;&#19968;&#20010;&#21253;&#21547;&#36825;&#20123;&#20540;&#30340;&#24086;&#23376;&#12290;</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-2..rkt)._parse-post))"></a><span class="RktSym"><span class="RktSymDef RktSym">parse-post</span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bindings?</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">post?</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p><br/></p><p>&#29616;&#22312;&#25105;&#20204;&#26377;&#20102;&#36825;&#20123;&#36741;&#21161;&#20989;&#25968;,&#25105;&#20204;&#21487;&#20197;&#25193;&#23637;&#25105;&#20204;&#30340; Web &#24212;&#29992;&#31243;&#24207;&#26469;&#22788;&#29702;&#34920;&#21333;&#36755;&#20837;&#12290;
&#25105;&#20204;&#23558;&#22312;&#32593;&#39029;&#24213;&#37096;&#28155;&#21152;&#19968;&#20010;&#23567;&#34920;&#21333;,&#25105;&#20204;&#23558;&#35843;&#25972;&#25105;&#20204;&#30340;&#31243;&#24207;&#20197;&#22788;&#29702;&#28155;&#21152;&#26032;&#24086;&#23376;&#12290;
&#25152;&#20197;&#25105;&#20204;&#30340;&#26032;&#30340; <span class="RktSym">start</span> &#26041;&#27861;&#23558;&#26816;&#26597; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span> &#26377;&#19968;&#20010;&#21487;&#35299;&#26512;&#30340;&#24086;&#23376;,
&#28982;&#21518;&#23558;&#23581;&#35797;&#25193;&#23637;&#30340;&#24086;&#23376;&#38598;,&#24182;&#23558;&#26368;&#32456;&#26174;&#31034;&#26032;&#30340;&#19968;&#32452;&#21338;&#23458;&#24086;&#23376;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A blog is a (listof post)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and a post is a (post title body)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG: blog</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The static blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is another post"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is my first post"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; response</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a request and produces a page that displays all of the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">web content.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">can-parse-post?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">BLOG</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">BLOG</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">can-parse-post?: bindings -&gt; boolean</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Produces true if bindings contains values for </span><span class="RktCmt">'</span><span class="RktCmt">title and </span><span class="RktCmt">'</span><span class="RktCmt">body.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">can-parse-post?</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exists-binding?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exists-binding?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">parse-post: bindings -&gt; post</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a bindings, and produces a post out of the bindings.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: blog request -&gt; response</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog and a request, and produces an HTML page</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of the content of the blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"title"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"body"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post: post -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post, produces an xexpr fragment of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-posts: blog -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog, produces an xexpr fragment</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of all its posts.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#36825;&#20010;&#35299;&#20915;&#26041;&#26696;&#20284;&#20046;&#33021;&#22815;&#24037;&#20316;,&#20294;&#23427;&#26377;&#19968;&#20010;&#32570;&#38519;! &#23581;&#35797;&#28155;&#21152;&#20004;&#20010;&#26032;&#24086;&#23376;&#12290; &#21457;&#29983;&#20102;&#20160;&#20040;?</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;高级控制流&quot;">6<tt>&nbsp;</tt><a name="(part._~e9~ab~98~e7~ba~a7~e6~8e~a7~e5~88~b6~e6~b5~81)"></a>&#39640;&#32423;&#25511;&#21046;&#27969;</h3><p>&#30446;&#21069;,&#25105;&#20204;&#27627;&#26080;&#30097;&#38382;&#24573;&#30053;&#20102;&#19968;&#20010;&#24040;&#22823;&#30340;&#38382;&#39064;,&#21338;&#23458;&#21482;&#25509;&#21463;&#19968;&#20010;&#26032;&#30340;&#21338;&#23458;&#26465;&#30446;&#12290;&#21035;&#25285;&#24515;,&#25105;&#20204;&#20250;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;!</p><p>&#29616;&#22312;&#26356;&#32039;&#36843;&#30340;&#38382;&#39064;&#26159;&#26356;&#39640;&#23618;&#27425;&#30340;&#38382;&#39064;:
&#34429;&#28982;&#25105;&#20204;&#26377;&#19968;&#20010;&#21151;&#33021;, <span class="RktSym">start</span>, &#21709;&#24212;&#38024;&#23545;&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340; URL &#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span> ,&#35813;&#21151;&#33021;&#24050;&#32463;&#24320;&#22987;&#25215;&#25285;&#22826;&#22810;&#30340;&#36131;&#20219;&#12290;
&#29305;&#21035;&#26159;,&#29616;&#22312; <span class="RktSym">start</span> &#22788;&#29702;&#20004;&#31181;&#19981;&#21516;&#31867;&#22411;&#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span>: &#29992;&#20110;&#26174;&#31034;&#21338;&#23458;&#30340;&#35831;&#27714;&#21644;&#29992;&#20110;&#28155;&#21152;&#26032;&#21338;&#23458;&#24086;&#23376;&#30340;&#35831;&#27714;&#12290;
&#23427;&#24050;&#32463;&#25104;&#20026;&#19968;&#31181;&#20132;&#36890;&#35686;&#23519;&ndash;&#19968;&#20010;&#35843;&#24230;&#21592;&ndash;&#20026;&#25105;&#20204;&#30340;&#32593;&#32476;&#24212;&#29992;&#31243;&#24207;&#30340;&#25152;&#26377;&#34892;&#20026;&#26381;&#21153;,&#21253;&#25324;&#25105;&#20204;&#20197;&#21518;&#21487;&#33021;&#24819;&#35201;&#28155;&#21152;&#30340;&#20219;&#20309;&#26032;&#21151;&#33021;&#12290;
&#22914;&#26524;&#19981;&#21516;&#31181;&#31867;&#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span> &#34987;&#33258;&#21160;&#24341;&#23548;&#21040;&#19981;&#21516;&#30340;&#21151;&#33021;&#19978;,&#37027;&#20040;
<span class="RktSym">start</span> (&#21644;&#25105;&#20204;)&#30340;&#29983;&#27963;&#20250;&#26356;&#23481;&#26131;&#12290;&#36825;&#22312; Racket &#20013;&#26159;&#21542;&#21487;&#34892;?</p><p>&#26159;&#30340;!Web &#26381;&#21153;&#22120;&#24211;&#25552;&#20379;&#20102;&#19968;&#20010;&#20989;&#25968;
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=servlet.html%23%2528def._%2528%2528lib._web-server%252Fservlet%252Fweb..rkt%2529._send%252Fsuspend%252Fdispatch%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend/dispatch</a></span>, &#23427;&#20801;&#35768;&#25105;&#20204;&#21019;&#24314; URL,&#23558;&#38024;&#23545;&#23427;&#20204;&#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span> &#24341;&#23548;&#21040;&#25105;&#20204;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;&#29305;&#23450;&#21151;&#33021;&#12290;
&#25105;&#20204;&#29992;&#19968;&#20010;&#20196;&#20154;&#30524;&#33457;&#32557;&#20081;&#30340;&#20363;&#23376;&#26469;&#28436;&#31034;&#12290;&#22312;&#19968;&#20010;&#26032;&#25991;&#20214;&#20013;,&#22312; DrRacket &#30340;&#23450;&#20041;&#31383;&#21475;&#36755;&#20837;&#20197;&#19979;&#20869;&#23481;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; response</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">phase-1</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">phase-1: request -&gt; response</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">phase-1</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fxexpr..rkt%2529._response%252Fxexpr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response/xexpr</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Phase 1"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">phase-2</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"click me!"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=servlet.html%23%2528def._%2528%2528lib._web-server%252Fservlet%252Fweb..rkt%2529._send%252Fsuspend%252Fdispatch%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend/dispatch</a></span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">phase-2: request -&gt; response</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">phase-2</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fxexpr..rkt%2529._response%252Fxexpr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response/xexpr</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Phase 2"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">phase-1</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"click me!"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=servlet.html%23%2528def._%2528%2528lib._web-server%252Fservlet%252Fweb..rkt%2529._send%252Fsuspend%252Fdispatch%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend/dispatch</a></span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#36825;&#26159;&#19968;&#20010;&#24490;&#29615;&#21448;&#19968;&#20010;&#24490;&#29615;&#36816;&#34892;&#30340; Web &#24212;&#29992;&#31243;&#24207;&#12290;&#24403;&#29992;&#25143;&#39318;&#27425;&#35775;&#38382;&#24212;&#29992;&#31243;&#24207;&#26102;,&#29992;&#25143;&#22312; <span class="RktSym">phase-1</span> &#24320;&#22987;&#12290;
&#29983;&#25104;&#30340;&#39029;&#38754;&#26377;&#19968;&#20010;&#36229;&#38142;&#25509;,&#24403;&#28857;&#20987;&#26102;,&#32487;&#32493;&#36827;&#20837; <span class="RktSym">phase-2</span> &#12290;&#29992;&#25143;&#21487;&#20197;&#28857;&#20987;&#22238;&#26469;,&#24182;&#22238;&#21040; <span class="RktSym">phase-1</span>, &#24182;&#19988;&#24490;&#29615;&#37325;&#22797;&#12290;</p><p>&#35753;&#25105;&#20204;&#26356;&#20180;&#32454;&#22320;&#30475;&#30475; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=servlet.html%23%2528def._%2528%2528lib._web-server%252Fservlet%252Fweb..rkt%2529._send%252Fsuspend%252Fdispatch%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend/dispatch</a></span> &#26426;&#21046;&#12290;
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=servlet.html%23%2528def._%2528%2528lib._web-server%252Fservlet%252Fweb..rkt%2529._send%252Fsuspend%252Fdispatch%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend/dispatch</a></span> &#28040;&#32791;&#19968;&#20010;&#21709;&#24212;&#29983;&#25104;&#20989;&#25968;,
&#24182;&#32473;&#23427;&#21478;&#19968;&#20010;&#20989;&#25968;,&#31216;&#20026; <span class="RktSym">embed/url</span>, &#25105;&#20204;&#23558;&#29992;&#23427;&#26469;&#26500;&#24314;&#29305;&#27530;&#30340; URL&#12290;
&#36825;&#20123; URL &#26159;&#20160;&#20040;&#29305;&#21035;&#30340;:&#24403; web &#27983;&#35272;&#22120;&#35775;&#38382;&#20854;&#20013;&#19968;&#20010;&#26102;,&#25105;&#20204;&#30340; web &#24212;&#29992;&#31243;&#24207;&#37325;&#26032;&#21551;&#21160;,
&#32780;&#19981;&#26159;&#20174; <span class="RktSym">start</span>, &#32780;&#26159;&#20174;&#25105;&#20204;&#19982; URL &#20851;&#32852;&#30340;&#22788;&#29702;&#31243;&#24207;&#12290;
&#22312;&#22788;&#29702;&#31243;&#24207; <span class="RktSym">phase-1</span> &#20013;,&#20351;&#29992; <span class="RktSym">embed/url</span> &#23558;&#38142;&#25509;&#19982;&#22788;&#29702;&#31243;&#24207; <span class="RktSym">phase-2</span> &#30456;&#20851;&#32852;,&#21453;&#20043;&#20134;&#28982;&#12290;</p><p>&#25105;&#20204;&#21487;&#20197;&#26356;&#22797;&#26434;&#22320;&#22788;&#29702;&#19982; <span class="RktSym">embed/url</span> &#30456;&#20851;&#30340;&#22788;&#29702;&#31243;&#24207;&#12290;
&#22240;&#20026;&#22788;&#29702;&#31243;&#24207;&#21482;&#26159;&#19968;&#20010;&#35831;&#27714;&#28040;&#32791;&#30340;&#20989;&#25968;,&#23427;&#21487;&#20197;&#22312;&#26412;&#22320;&#23450;&#20041;,&#25152;&#20197;&#21487;&#20197;&#30475;&#21040;&#20854;&#23450;&#20041;&#33539;&#22260;&#20869;&#30340;&#25152;&#26377;&#20854;&#20182;&#21464;&#37327;&#12290;&#36825;&#37324;&#26159;&#21478;&#19968;&#20010;&#24490;&#29615;&#30340;&#20363;&#23376;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; response</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show-counter</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">show-counter: number request -&gt; doesn't return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Displays a number that's hyperlinked: when the link is pressed,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">returns a new page with the incremented number.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show-counter</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fxexpr..rkt%2529._response%252Fxexpr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response/xexpr</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Counting example"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">next-number-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number-%7E3estring%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">number-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">next-number-handler</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show-counter</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=servlet.html%23%2528def._%2528%2528lib._web-server%252Fservlet%252Fweb..rkt%2529._send%252Fsuspend%252Fdispatch%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend/dispatch</a></span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#27492;&#31034;&#20363;&#26174;&#31034;,&#25105;&#20204;&#21487;&#20197;&#32047;&#31215;&#20132;&#20114;&#30340;&#32467;&#26524;&#12290; &#21363;&#20351;&#29992;&#25143;&#36890;&#36807;&#35775;&#38382;&#21644;&#26597;&#30475;&#38646;&#24320;&#22987;,
&#30001; <span class="RktSym">next-number-handler</span> &#20135;&#29983;&#30340;&#22788;&#29702;&#31243;&#24207;&#32487;&#32493;&#20132;&#20114;,&#32047;&#31215;&#26356;&#22823;&#21644;&#26356;&#22823;&#30340;&#25968;&#12290;</p><p>&#25105;&#20204;&#29616;&#22312;&#35201;&#36827;&#20837;&#24490;&#29615;,&#35753;&#25105;&#20204;&#32487;&#32493;&#21069;&#36827;,&#24182;&#36820;&#22238;&#25105;&#20204;&#30340;&#21338;&#23458;&#24212;&#29992;&#31243;&#24207;&#12290;
&#25105;&#20204;&#23558;&#35843;&#25972;&#34920;&#21333;&#30340;&#25805;&#20316;,&#20197;&#20415;&#23558;&#25552;&#20132; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span> &#23450;&#21521;&#21040;&#19982;&#21333;&#29420;&#30340;&#22788;&#29702;&#31243;&#24207;(&#31216;&#20026; <span class="RktSym">insert-post-handler</span> )&#30456;&#20851;&#32852;&#30340; URL&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A blog is a (listof post)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and a post is a (post title body)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG: blog</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The static blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is another post"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is my first post"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a request and produces a page that displays all of the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">web content.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">parse-post: bindings -&gt; post</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Extracts a post out of the bindings.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: blog request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog and a request, and produces an HTML page</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of the content of the blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"title"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"body"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post: post -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post, produces an xexpr fragment of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-posts: blog -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog, produces an xexpr fragment</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of all its posts.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#35831;&#27880;&#24847;, <span class="RktSym">render-blog-page</span> &#20989;&#25968;&#30340;&#32467;&#26500;&#19982;&#19978;&#19968;&#20010; <span class="RktSym">show-counter</span> &#31034;&#20363;&#30340;&#32467;&#26500;&#38750;&#24120;&#30456;&#20284;&#12290;
&#29992;&#25143;&#26368;&#21518;&#21487;&#20197;&#22312;&#21338;&#23458;&#20013;&#28155;&#21152;&#21644;&#26597;&#30475;&#22810;&#20010;&#24086;&#23376;&#12290;</p><p>&#19981;&#24184;&#30340;&#26159;,&#25105;&#20204;&#30340;&#35774;&#35745;&#20173;&#28982;&#36935;&#21040;&#19968;&#20010;&#38382;&#39064;,&#36825;&#21487;&#20197;&#36890;&#36807;&#28155;&#21152;&#19968;&#20123;&#24086;&#23376;&#21040;&#31995;&#32479;,&#28982;&#21518;&#22312;&#26032;&#30340;&#27983;&#35272;&#22120;&#31383;&#21475;&#20013;&#35775;&#38382; Web &#24212;&#29992;&#31243;&#24207;&#30340; URL&#12290;
&#24403;&#20320;&#23581;&#35797;&#36825;&#26679;&#20570;&#20250;&#21457;&#29983;&#20160;&#20040;?</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;分享和同享&quot;">7<tt>&nbsp;</tt><a name="(part._~e5~88~86~e4~ba~ab~e5~92~8c~e5~90~8c~e4~ba~ab)"></a>&#20998;&#20139;&#21644;&#21516;&#20139;</h3><p>&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;&#38382;&#39064;&#26159;&#27599;&#20010;&#27983;&#35272;&#22120;&#31383;&#21475;&#36319;&#36394;&#20854;&#33258;&#24049;&#19981;&#21516;&#30340;&#21338;&#23458;&#12290;
&#23545;&#20110;&#22823;&#22810;&#25968;&#20154;&#26469;&#35828;,&#36825;&#36829;&#32972;&#20102;&#21338;&#23458;&#30340;&#30446;&#30340;,&#21363;&#19982;&#20182;&#20154;&#20998;&#20139;! &#24403;&#25105;&#20204;&#25554;&#20837;&#26032;&#24086;&#23376;&#26102;,&#32780;&#19981;&#26159;&#21019;&#24314;&#26032;&#30340;&#21338;&#23458;&#20540;,&#25105;&#20204;&#24819;&#20462;&#25913;&#21338;&#23458;&#12290;
&#25442;&#21477;&#35805;&#35828;,&#25105;&#20204;&#24819;&#20570;&#19968;&#20010;&#32467;&#26500;&#24615;&#30340;&#25913;&#21464;&#12290;
(<span style="font-style: italic"><a href="http://www.htdp.org/">How to Design Programs</a></span> &#31532; 41 &#31456;)&#12290;
&#25152;&#20197;&#35753;&#25105;&#20204;&#20174; <span class="RktSym">BLOG</span> &#32465;&#23450;&#20999;&#25442;&#21040;&#19968;&#20010;&#21015;&#34920;,&#32780;&#19981;&#26159;&#32465;&#23450;&#21040;&#19968;&#20010;&#21487;&#21464;&#30340;&#32467;&#26500;&#12290;
&#22914;&#26524;&#25105;&#20204;&#21482;&#26159;&#20351;&#29992;&#19968;&#20010;&#32467;&#26500;,&#25105;&#20204;&#20250;&#20889;&#22914;&#19979;:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">posts</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><p>&#20294;&#26159;,&#40664;&#35748;&#24773;&#20917;&#19979;,Racket &#20013;&#30340;&#32467;&#26500;&#26159;&#19981;&#21487;&#21464;&#30340;&#12290;
&#35201;&#33719;&#24471;&#23545;&#32467;&#26500;&#21464;&#37327;&#30340;&#35775;&#38382;,&#25105;&#20204;&#38656;&#35201;&#36890;&#36807;&#22312;&#25105;&#20204;&#30340;&#19968;&#20123;&#32467;&#26500;&#23450;&#20041;&#20013;&#28155;&#21152; <span class="RktPn">#:mutable</span> &#20851;&#38190;&#23383;&#26469;&#35206;&#30422;&#36825;&#20010;&#40664;&#35748;&#20540;&#12290;
&#29305;&#21035;&#26159;,&#22914;&#26524;&#25105;&#20204;&#35201;&#20801;&#35768;&#26356;&#25913;&#21338;&#23458;,&#25105;&#20204;&#24517;&#39035;&#23558;&#21338;&#23458;&#32467;&#26500;&#30340;&#23450;&#20041;&#26356;&#25913;&#20026;&#20197;&#19979;&#20869;&#23481;:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">posts</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></p></blockquote><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-4..rkt)._blog-posts))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-4..rkt)._blog~3f))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-4..rkt)._struct~3ablog))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-4..rkt)._blog))"></a><span class="RktSym"><span class="RktSymDef RktSym">blog</span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">posts</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">posts</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">post?</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#21487;&#21464;&#32467;&#26500;&#25552;&#20379;&#25913;&#21464;&#20854;&#23383;&#27573;&#30340;&#21151;&#33021;; &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;,&#25105;&#20204;&#25552;&#20379;&#20102;&#32467;&#26500; <span class="RktSym">set-blog-posts!</span>,
&#23427;&#20801;&#35768;&#25105;&#20204;&#26356;&#25913;&#21338;&#23458;&#30340;&#24086;&#23376;:</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-4..rkt)._set-blog-posts!))"></a><span class="RktSym"><span class="RktSymDef RktSym">set-blog-posts!</span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">post?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p><br/></p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#20889;&#19968;&#20010;&#20989;&#25968; <span class="RktSym">blog-insert-post!</span></p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-4..rkt)._blog-insert-post!))"></a><span class="RktSym"><span class="RktSymDef RktSym">blog-insert-post!</span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog?</span><span class="hspace">&nbsp;</span><span class="RktSym">post?</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p>&#20854;&#39044;&#26399;&#30340;&#21103;&#20316;&#29992;&#26159;&#25193;&#23637;&#21338;&#23458;&#30340;&#24086;&#23376;&#12290;</p><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#25105;&#20204;&#29616;&#22312;&#24517;&#39035;&#20462;&#25913; Web &#24212;&#29992;&#31243;&#24207;&#20197;&#20351;&#29992;&#25105;&#20204;&#30340;&#21338;&#23458;&#30340;&#26032;&#25968;&#25454;&#34920;&#31034;&#12290;
&#30001;&#20110;&#21338;&#23458;&#29616;&#22312;&#34987;&#20840;&#23616;&#21464;&#37327; <span class="RktSym">BLOG</span> &#24341;&#29992;,&#23427;&#19981;&#20877;&#38656;&#35201;&#20316;&#20026;&#21442;&#25968;&#20256;&#36882;&#32473;&#20687; <span class="RktSym">render-blog-page</span> &#36825;&#26679;&#30340;&#22788;&#29702;&#31243;&#24207;&#12290;
&#36825;&#37324;&#26159;&#25105;&#20204;&#26356;&#26032;&#30340; Web &#24212;&#29992;&#31243;&#24207;,&#32463;&#36807;&#35843;&#25972;,&#21253;&#21547; <span class="RktSym">insert-blog-post!</span>, &#24182;&#36827;&#34892;&#20102;&#19968;&#20123;&#21464;&#37327;&#30340;&#28165;&#29702;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A blog is a (blog posts)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where posts is a (listof post)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">posts</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and post is a (post title body)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where title is a string, and body is a string</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG: blog</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The initial BLOG.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is another post"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is my first post"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog-insert-post!: blog post -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog and a post, adds the post at the top of the blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-blog-posts!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a request and produces a page that displays</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">all of the web content.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">parse-post: bindings -&gt; post</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Extracts a post out of the bindings.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Produces an HTML page of the content of the BLOG.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"title"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"body"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">BLOG</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post: post -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post, produces an xexpr fragment of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-posts: -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog, produces an xexpr fragment</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of all its posts.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#29616;&#22312;&#20174;&#20004;&#20010;&#21333;&#29420;&#30340;&#27983;&#35272;&#22120;&#31383;&#21475;&#35775;&#38382;&#21338;&#23458;,&#24182;&#28155;&#21152;&#27599;&#20010;&#20154;&#30340;&#24086;&#23376;&#12290; &#20320;&#20250;&#24456;&#39640;&#20852;&#30475;&#21040;&#36825;&#20004;&#20010;&#31383;&#21475;&#20849;&#20139;&#21516;&#19968;&#20010;&#21338;&#23458;!</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;扩展模型&quot;">8<tt>&nbsp;</tt><a name="(part._~e6~89~a9~e5~b1~95~e6~a8~a1~e5~9e~8b)"></a>&#25193;&#23637;&#27169;&#22411;</h3><p>&#25509;&#19979;&#26469;,&#35753;&#25105;&#20204;&#25193;&#23637;&#24212;&#29992;&#31243;&#24207;,&#20197;&#20415;&#19968;&#20010;&#24086;&#23376;&#21487;&#20197;&#21253;&#21547;&#19968;&#20010;&#27880;&#37322;&#21015;&#34920;&#12290; &#25968;&#25454;&#23450;&#20041;&#21464;&#20026;:</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-5..rkt)._set-post-comments!))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-5..rkt)._set-post-body!))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-5..rkt)._set-post-title!))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-5..rkt)._post-comments))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-5..rkt)._post-body))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-5..rkt)._post-title))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-5..rkt)._post~3f))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-5..rkt)._struct~3apost))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-5..rkt)._post))"></a><span class="RktSym"><span class="RktSymDef RktSym">post</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="stt"> </span><span class="RktSym">body</span><span class="stt"> </span><span class="RktSym">comments</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">comments</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr></table></blockquote><p><span style="font-weight: bold">&#32451;&#20064;.</span>&#20026;&#24086;&#23376;&#20889;&#20837;&#26356;&#26032;&#30340;&#25968;&#25454;&#32467;&#26500;&#23450;&#20041;&#12290; &#30830;&#20445;&#20351;&#32467;&#26500;&#21487;&#21464;,&#22240;&#20026;&#25105;&#20204;&#25171;&#31639;&#21521;&#24086;&#23376;&#28155;&#21152;&#27880;&#37322;&#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#32452;&#32455;&#19968;&#20123;&#24086;&#23376;&#30340;&#20363;&#23376;&#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#23450;&#20041;&#19968;&#20010;&#20989;&#25968; <span class="RktSym">post-insert-comment!</span></p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-5..rkt)._post-insert-comment!))"></a><span class="RktSym"><span class="RktSymDef RktSym">post-insert-comment!</span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p>&#20854;&#24847;&#22270;&#21103;&#20316;&#29992;&#26159;&#22312;&#24086;&#23376;&#30340;&#35780;&#35770;&#21015;&#34920;&#30340;&#26411;&#23614;&#28155;&#21152;&#26032;&#30340;&#35780;&#35770;&#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#35843;&#25972; <span class="RktSym">render-post</span> ,&#20197;&#20415;&#29983;&#25104;&#30340;&#29255;&#27573;&#23558;&#22312;&#36880;&#39033;&#21015;&#34920;&#20013;&#21253;&#21547;&#27880;&#37322;&#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#22240;&#20026;&#25105;&#20204;&#24050;&#32463;&#23558; <span class="RktSym">post</span> &#25193;&#23637;&#20026;&#21253;&#21547;&#27880;&#37322;,&#25152;&#20197;&#20320;&#36824;&#38656;&#35201;&#35843;&#25972;&#24212;&#29992;&#31243;&#24207;&#30340;&#20854;&#20182;&#25805;&#20316;&#21518;&#37096;&#20998;,&#20363;&#22914;&#20351;&#29992; <span class="RktSym">post</span> &#12290;</p><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#29616;&#22312;&#25105;&#20204;&#24050;&#32463;&#35843;&#25972;&#20102;&#20989;&#25968;&#20197;&#36866;&#24212; <span class="RktSym">post</span> &#30340;&#26032;&#32467;&#26500;,&#25105;&#20204;&#30340; web &#24212;&#29992;&#31243;&#24207;&#24212;&#35813;&#26159;&#21487;&#36816;&#34892;&#30340;&#12290;
&#29992;&#25143;&#29978;&#33267;&#21487;&#20197;&#30475;&#21040;&#25105;&#20204;&#30340;&#21171;&#21160;&#30340;&#19968;&#20123;&#25104;&#26524;:&#22914;&#26524;&#21021;&#22987; <span class="RktSym">BLOG</span> &#20855;&#26377;&#24102;&#35780;&#35770;&#30340;&#24086;&#23376;,&#29992;&#25143;&#29616;&#22312;&#24212;&#35813;&#30475;&#21040;&#23427;&#20204;&#12290;
&#21478;&#19968;&#26041;&#38754;,&#26174;&#28982;&#20002;&#22833;&#20102;&#19968;&#20123;&#19996;&#35199;:&#29992;&#25143;&#27809;&#26377;&#36890;&#36807;&#20854;&#28155;&#21152;&#27880;&#37322;&#30340;&#25509;&#21475;!</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;打破显示&quot;">9<tt>&nbsp;</tt><a name="(part._~e6~89~93~e7~a0~b4~e6~98~be~e7~a4~ba)"></a>&#25171;&#30772;&#26174;&#31034;</h3><p>&#25105;&#20204;&#24212;&#22914;&#20309;&#23558;&#35780;&#35770;&#26356;&#20840;&#38754;&#22320;&#32435;&#20837;&#29992;&#25143;&#30340;&#32593;&#32476;&#20307;&#39564;?
        &#30475;&#21040;&#19968;&#20010;&#39029;&#38754;&#19978;&#30340;&#25152;&#26377;&#24086;&#23376;&#21644;&#35780;&#35770;&#21487;&#33021;&#26377;&#28857;&#21387;&#20498;&#24615;,&#25152;&#20197;&#20063;&#35768;&#25105;&#20204;&#24212;&#35813;&#38459;&#27490;&#22312;&#20027;&#21338;&#23458;&#39029;&#38754;&#19978;&#26174;&#31034;&#35780;&#35770;&#12290;
&#30456;&#21453;,&#35753;&#25105;&#20204;&#20570;&#19968;&#20010;&#27425;&#35201;&#30340;&#8220;&#32454;&#33410;&#8221;&#35270;&#22270;&#30340;&#19968;&#20010;&#20301;&#32622;,&#24182;&#22312;&#20854;&#20013;&#25552;&#20986;&#20854;&#24847;&#35265;&#12290;
&#22240;&#27492;,&#21338;&#23458;&#30340;&#39030;&#32423;&#35270;&#22270;&#23558;&#20165;&#26174;&#31034;&#24086;&#23376;&#30340;&#26631;&#39064;&#21644;&#20027;&#20307;&#20197;&#21450;&#20854;&#35780;&#35770;&#30340;&#25968;&#37327;&#12290;</p><p>&#25152;&#20197;&#29616;&#22312;&#25105;&#20204;&#38656;&#35201;&#19968;&#31181;&#26041;&#24335;&#26469;&#35775;&#38382;&#24086;&#23376;&#30340;&#35814;&#32454;&#20449;&#24687;&#39029;&#38754;&#12290;
&#19968;&#31181;&#26041;&#27861;&#26159;&#36229;&#38142;&#25509;&#24086;&#23376;&#30340;&#26631;&#39064;:&#22914;&#26524;&#24076;&#26395;&#26597;&#30475;&#24086;&#23376;&#30340;&#35814;&#32454;&#20449;&#24687;&#39029;&#38754;,&#21017;&#21482;&#38656;&#35201;&#28857;&#20987;&#24086;&#23376;&#30340;&#26631;&#39064;&#12290;
&#22312;&#35813;&#24086;&#23376;&#30340;&#35814;&#32454;&#20449;&#24687;&#39029;&#38754;&#20013;,&#25105;&#20204;&#29978;&#33267;&#21487;&#20197;&#28155;&#21152;&#19968;&#20010;&#34920;&#21333;,&#35753;&#29992;&#25143;&#28155;&#21152;&#26032;&#30340;&#35780;&#35770;&#12290;
&#27492;&#26032;&#29256;&#26412;&#30340; Web &#24212;&#29992;&#31243;&#24207;&#30340;&#39029;&#38754;&#27969;&#31616;&#21333;&#25551;&#36848;&#22914;&#19979;:</p><p><img src="flow1.png" alt="" width="450" height="146"/></p><p>&#27492;&#22270;&#20013;&#30340;&#27599;&#20010;&#33410;&#28857;(&#27668;&#27873;)&#23545;&#24212;&#20110;&#35831;&#27714;&#28040;&#32791;&#22788;&#29702;&#31243;&#24207;&#12290;
&#27491;&#22914;&#20320;&#21487;&#33021;&#26399;&#26395;&#30340;,&#25105;&#20204;&#23558;&#20351;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=servlet.html%23%2528def._%2528%2528lib._web-server%252Fservlet%252Fweb..rkt%2529._send%252Fsuspend%252Fdispatch%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend/dispatch</a></span> &#19968;&#20123;&#12290;
&#22270;&#20013;&#30340;&#27599;&#20010;&#31661;&#22836;&#37117;&#23558;&#34987;&#23454;&#29616;&#20026;&#25105;&#20204;&#20351;&#29992; <span class="RktSym">embed/url</span> &#29983;&#25104;&#30340; URL&#12290;</p><p>&#36825;&#31181;&#26041;&#27861;&#26377;&#19968;&#20010;&#31245;&#24494;&#28151;&#20081;&#30340;&#21518;&#26524;&#12290; &#20197;&#21069;,&#25105;&#20204;&#28210;&#26579;&#20102;&#27809;&#26377;&#20219;&#20309;&#36229;&#38142;&#25509;&#30340;&#24086;&#23376;&#21015;&#34920;&#12290;
&#20294;&#26159;&#30001;&#20110;&#29983;&#25104;&#29305;&#27530;&#35843;&#24230; URL &#30340;&#20219;&#20309;&#20989;&#25968;&#37117;&#24517;&#39035;&#20351;&#29992; <span class="RktSym">embed/url</span> &#36825;&#26679;&#20570;,
&#25152;&#20197;&#25105;&#20204;&#38656;&#35201;&#35843;&#25972; <span class="RktSym">render-posts</span> &#21644; <span class="RktSym">render-post</span> &#26469;&#20351;&#29992;,
&#24182;&#22312;&#20351;&#29992; <span class="RktSym">embed/url</span> &#26412;&#36523;&#26102;&#21019;&#24314;&#36825;&#20123;&#36229;&#32423;&#38142;&#25509;&#30340;&#26631;&#39064;&#12290;</p><p>&#25105;&#20204;&#29616;&#22312;&#26377;&#19968;&#20010;&#38750;&#24120;&#22797;&#26434;&#30340; Web &#24212;&#29992;&#31243;&#24207;,&#20801;&#35768;&#21019;&#24314;&#24086;&#23376;&#21644;&#28155;&#21152;&#27880;&#37322;&#12290; &#36825;&#26159;&#23427;&#30340;&#22806;&#35266;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A blog is a (blog posts)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where posts is a (listof post)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">posts</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and post is a (post title body comments)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where title is a string, body is a string,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and comments is a (listof string)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">comments</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG: blog</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The initial BLOG.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is another post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is my first post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"First comment!"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog-insert-post!: blog post -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog and a post, adds the post at the top of the blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-blog-posts!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">post-insert-comment!: post string -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post and a comment string.</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">As a side-effect, </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">adds the comment to the bottom of the post</span><span class="RktCmt">'</span><span class="RktCmt">s list of comments.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-post-comments!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a request, and produces a page that displays</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">all of the web content.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Produces an HTML page of the content of the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"title"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"body"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">parse-post: bindings -&gt; post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Extracts a post out of the bindings.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">BLOG</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post-detail-page: post request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post and request, and produces a detail page</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of the post. The user will be able to insert new comments.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h2</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-comment-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"comment"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-comment</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">comment</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-comment-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">a-request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-comment</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">a-request</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post: post (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post, produces an xexpr fragment of the post.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The fragment contains a link to show a detailed view of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">view-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">view-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">" comment(s)"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-posts: (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a embed/url, and produces an xexpr fragment</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of all its posts.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-itemized-list: (listof xexpr) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a list of items, and produces a rendering as</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">an unorderered list.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="hspace">&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-item: xexpr -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes an xexpr, and produces a rendering</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as a list item.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">a-fragment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-fragment</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#20294;&#23427;&#20173;&#28982;&#26377;&#19968;&#20010;&#38382;&#39064;:&#19968;&#26086;&#22312; <span class="RktSym">post-detail-page</span>, &#29992;&#25143;&#36820;&#22238;&#21338;&#23458;&#30340;&#21807;&#19968;&#26041;&#27861;&#26159;&#20351;&#29992;&#21518;&#36864;&#25353;&#38062;!
&#36825;&#26159;&#30772;&#22351;&#24615;&#30340;,&#23427;&#21487;&#33021;&#20801;&#35768;&#29992;&#25143;&#8220;&#21345;&#20303;&#8221;&#22312; Web &#24212;&#29992;&#31243;&#24207;&#30340;&#40657;&#26263;&#35282;&#33853;&#12290; &#20026;&#20102;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;,&#35753;&#25105;&#20204;&#25913;&#36827;&#39029;&#38754;&#27969;&#12290;</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;添加一个返回按钮&quot;">10<tt>&nbsp;</tt><a name="(part._~e6~b7~bb~e5~8a~a0~e4~b8~80~e4~b8~aa~e8~bf~94~e5~9b~9e~e6~8c~89~e9~92~ae)"></a>&#28155;&#21152;&#19968;&#20010;&#36820;&#22238;&#25353;&#38062;</h3><p>&#20063;&#35768;&#25105;&#20204;&#24212;&#35813;&#20174; <span class="RktSym">render-post-detail-page</span> &#20013;&#28155;&#21152;&#19968;&#20010; BACK &#38142;&#25509;,&#23427;&#36820;&#22238;&#25105;&#20204;&#21040;&#39030;&#32423;&#21338;&#23458;&#12290; &#36825;&#26159;&#30456;&#24212;&#30340;&#39029;&#38754;&#27969;&#31243;&#22270;:</p><p><img src="flow2.png" alt="" width="450" height="201"/></p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#35843;&#25972; <span class="RktSym">render-post-detail-page</span> &#20197;&#21253;&#25324;&#22238;&#21040; <span class="RktSym">render-blog-page</span> &#30340;&#21478;&#19968;&#20010;&#38142;&#25509;&#12290;</p><p>&#24182;&#19988;&#30001;&#20110;&#29992;&#25143;&#21487;&#33021;&#23545;&#35780;&#35770;&#26377;&#25913;&#21464;&#30340;&#24515;,&#35753;&#25105;&#20204;&#20016;&#23500;&#27969;&#31243;,&#20197;&#32473;&#29992;&#25143;&#25552;&#20379;&#36864;&#20986;&#25552;&#20132;&#30340;&#26426;&#20250;&#12290;</p><p><img src="flow3.png" alt="" width="500" height="257"/></p><p>&#35831;&#27880;&#24847;,&#34429;&#28982;&#36825;&#31181;&#21464;&#21270;&#21487;&#33021;&#30475;&#36215;&#26469;&#24456;&#22797;&#26434;,&#20294;&#23427;&#19981;&#20250;&#24433;&#21709;&#25105;&#20204;&#30340;&#22788;&#29702;&#31243;&#24207;&#30340;&#19968;&#33324;&#24418;&#24577;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A blog is a (blog posts)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where posts is a (listof post)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">posts</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and post is a (post title body comments)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where title is a string, body is a string,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and comments is a (listof string)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">comments</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG: blog</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The initial BLOG.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is another post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is my first post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"First comment!"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog-insert-post!: blog post -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog and a post, adds the post at the top of the blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-blog-posts!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">post-insert-comment!: post string -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post and a comment string.</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">As a side-efect, </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">adds the comment to the bottom of the post</span><span class="RktCmt">'</span><span class="RktCmt">s list of comments.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-post-comments!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a request and produces a page that displays</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">all of the web content.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Produces an HTML page of the content of the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"title"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"body"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">parse-post: bindings -&gt; post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Extracts a post out of the bindings.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">BLOG</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post-detail-page: post request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post and produces a detail page of the post.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The user will be able to either insert new comments</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">or go back to render-blog-page.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h2</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-comment-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"comment"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">back-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Back to the blog"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-comment</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">comment</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-comment-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-confirm-add-comment-page</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-comment</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">back-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-confirm-add-comment-page :</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">comment post request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a comment that we intend to add to a post, as well</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as the request. If the user follows through, adds a comment </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and goes back to the display page. Otherwise, goes back to </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the detail page of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-confirm-add-comment-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Add a Comment"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Add a Comment"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"The comment: "</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-comment</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"will be added to "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">yes-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Yes, add the comment."</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">cancel-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"No, I changed my mind!"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">yes-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cancel-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post: post (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post, produces an xexpr fragment of the post.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The fragment contains a link to show a detailed view of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">view-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">view-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">" comment(s)"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-posts: (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a embed/url, produces an xexpr fragment</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of all its posts.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-itemized-list: (listof xexpr) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a list of items, and produces a rendering as</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">an unorderered list.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="hspace">&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-item: xexpr -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes an xexpr, and produces a rendering</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as a list item.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">a-fragment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-fragment</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;用风格装饰_&quot;">11<tt>&nbsp;</tt><a name="(part._~e7~94~a8~e9~a3~8e~e6~a0~bc~e8~a3~85~e9~a5~b0_)"></a>&#29992;&#39118;&#26684;&#35013;&#39280;!</h3><p>&#25105;&#20204;&#30340;&#32593;&#32476;&#24212;&#29992;&#31243;&#24207;&#29616;&#22312;&#21151;&#33021;&#40784;&#20840;&#12290;&#20294;&#23427;&#30340;&#35270;&#35273;&#32570;&#20047;,&#25152;&#20197;&#35753;&#25105;&#20204;&#35797;&#30528;&#25913;&#21892;&#23427;&#30340;&#22806;&#35266;&#12290;
&#21521;&#25105;&#20204;&#30340;&#32593;&#39029;&#28155;&#21152;&#21487;&#35270;&#21270; panache &#30340;&#19968;&#31181;&#26041;&#27861;&#26159;&#20351;&#29992;&#32423;&#32852;&#26679;&#24335;&#34920;&#12290;
&#20363;&#22914;,&#22914;&#26524;&#25105;&#20204;&#24819;&#20351;&#25152;&#26377;&#27573;&#33853;&#20026;&#32511;&#33394;,&#25105;&#20204;&#21487;&#33021;&#20250;&#22312;&#21709;&#24212;&#20013;&#25554;&#20837;&#20197;&#19979;&#26679;&#24335;&#22768;&#26126;&#12290;</p><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">style</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="stt"> </span><span class="RktVal">"text/css"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">"p { color: green }"</span><span class="RktVal">)</span></p><p>&#23558;&#36825;&#26679;&#30340;&#22768;&#26126;&#30452;&#25509;&#23884;&#20837;&#25105;&#20204;&#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fresponse-structs..rkt%2529._response%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response</a></span> &#26159;&#35825;&#20154;&#30340;&#12290;
&#20294;&#26159;&#25105;&#20204;&#30340;&#28304;&#25991;&#20214;&#24050;&#32463;&#30456;&#24403;&#32321;&#24537;,&#24182;&#19988;&#20316;&#20026;&#19968;&#20010;&#21407;&#21017;,&#25105;&#20204;&#24212;&#35813;&#23558;&#36923;&#36753;&#34920;&#31034;&#19982;&#21487;&#35270;&#21270;&#21576;&#29616;&#20998;&#24320;&#12290;
&#22240;&#27492;,&#19981;&#26159;&#30452;&#25509;&#22312; HTML &#21709;&#24212;&#20013;&#23884;&#20837; .css,&#32780;&#26159;&#23558;&#38142;&#25509;&#24341;&#29992;&#28155;&#21152;&#21040;&#21333;&#29420;&#30340; .css &#25991;&#20214;&#12290;</p><p>&#21040;&#30446;&#21069;&#20026;&#27490;,&#25105;&#20204;&#30340; Web &#24212;&#29992;&#31243;&#24207;&#29983;&#25104;&#30340;&#25152;&#26377;&#20869;&#23481;&#37117;&#26469;&#33258;&#21709;&#24212;&#29983;&#25104;&#22788;&#29702;&#31243;&#24207;&#12290;
&#20294;&#26159;&#36825;&#31181;&#21160;&#24577;&#29983;&#25104;&#30340; HTML &#23545;&#20110;&#38745;&#24577;&#20869;&#23481;&#19981;&#26159;&#24517;&#38656;&#30340;&#12290;&#36825;&#26679;&#30340;&#38745;&#24577;&#36164;&#28304;&#30340;&#31034;&#20363;&#21253;&#25324;&#22270;&#20687;,&#25991;&#26723;&#21644; .css &#25991;&#20214;&#12290;
&#20026;&#20102;&#19982;&#25105;&#20204;&#30340; Web &#24212;&#29992;&#31243;&#24207;&#19968;&#36215;&#26381;&#21153;,&#25105;&#20204;&#36890;&#30693; Web &#26381;&#21153;&#22120;&#25105;&#20204;&#19987;&#38376;&#20026;&#38745;&#24577;&#25991;&#20214;&#21019;&#24314;&#30340;&#30446;&#24405;&#12290;
&#20989;&#25968; <span class="RktSym">static-files-path</span>,</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-7..rkt)._static-files-path))"></a><span class="RktSym"><span class="RktSymDef RktSym">static-files-path</span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p>&#21578;&#35785; Web &#26381;&#21153;&#22120;&#22312;&#25509;&#25910;&#21040;&#31867;&#20284;&#20110;&#38745;&#24577;&#36164;&#28304;&#35831;&#27714;&#30340; URL &#26102;&#26597;&#30475;&#32473;&#23450;&#30340;&#36335;&#24452;&#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#21019;&#24314;&#19968;&#20010;&#21517;&#20026; <span class="stt">"test-static.rkt"</span> &#30340;&#31616;&#21333; Web &#24212;&#29992;&#31243;&#24207;,&#21253;&#21547;&#20197;&#19979;&#20869;&#23481;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fxexpr..rkt%2529._response%252Fxexpr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response/xexpr</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Testing"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">link</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">rel</span><span class="hspace">&nbsp;</span><span class="RktVal">"stylesheet"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktVal">"/test-static.css"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"text/css"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Testing"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h2</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is a header"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is "</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">span</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"hot"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"hot"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"."</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">static-files-path</span><span class="hspace">&nbsp;</span><span class="RktVal">"htdocs"</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#21019;&#24314;&#19968;&#20010;&#21517;&#20026; <span class="stt">"htdocs"</span> &#30340;&#23376;&#30446;&#24405;,&#26681;&#30446;&#24405;&#19982; <span class="stt">"test-static.rkt"</span> &#28304;&#20301;&#20110;&#21516;&#19968;&#30446;&#24405;&#12290;
&#21482;&#26159;&#20026;&#20102;&#30475;&#21040;&#25105;&#20204;&#21487;&#20197;&#26381;&#21153;&#36825;&#20010; .css &#39029;&#38754;,
&#22312; <span class="stt">"htdocs/"</span> &#20013;&#21019;&#24314;&#19968;&#20010;&#38750;&#24120;&#31616;&#21333;&#30340; .css &#25991;&#20214; <span class="stt">"test-static.css"</span>, &#20854;&#20013;&#21253;&#21547;&#20197;&#19979;&#20869;&#23481;:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">body {</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">margin-left: 10%;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">margin-right: 10%;</span></p></td></tr><tr><td><p><span class="stt">}</span></p></td></tr><tr><td><p><span class="stt">p { font-family: sans-serif }</span></p></td></tr><tr><td><p><span class="stt">h1 { color: green }</span></p></td></tr><tr><td><p><span class="stt">h2 { font-size: small }</span></p></td></tr><tr><td><p><span class="stt">span.hot { color: red }</span></p></td></tr></table></p><p>&#29616;&#22312;&#36816;&#34892;&#24212;&#29992;&#31243;&#24207;&#24182;&#26597;&#30475;&#27983;&#35272;&#22120;&#30340;&#36755;&#20986;&#12290; &#32593;&#39029;&#24212;&#35813;&#20986;&#29616;,&#20294;&#23427;&#30340;&#39029;&#38754;&#20173;&#28982;&#24212;&#35813;&#26377;&#19968;&#20123;&#39068;&#33394;&#12290;</p><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p><span style="font-weight: bold">&#32451;&#20064;.</span>
&#36890;&#36807;&#32534;&#20889;&#36866;&#21512;&#20320;&#21475;&#21619;&#30340;&#22806;&#37096;&#26679;&#24335;&#34920;&#26469;&#25913;&#36827;&#21338;&#23458; Web &#24212;&#29992;&#31243;&#24207;&#30340;&#34920;&#31034;&#12290; &#35843;&#25972;&#25152;&#26377; HTML &#21709;&#24212;&#22788;&#29702;&#31243;&#24207;&#20197;&#21253;&#25324;&#26679;&#24335;&#34920;&#30340;&#38142;&#25509;&#12290;</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;双重提交错误&quot;">12<tt>&nbsp;</tt><a name="(part._~e5~8f~8c~e9~87~8d~e6~8f~90~e4~ba~a4~e9~94~99~e8~af~af)"></a>&#21452;&#37325;&#25552;&#20132;&#38169;&#35823;</h3><p>&#25105;&#20204;&#30340;&#24212;&#29992;&#36824;&#26377;&#21478;&#19968;&#20010;&#24494;&#22937;&#30340;&#38382;&#39064;&#12290; &#35201;&#30475;&#21040;&#23427;,&#20877;&#27425;&#21319;&#32423;&#21338;&#23458;&#24212;&#29992;&#31243;&#24207;,&#24182;&#28155;&#21152;&#19968;&#20010;&#24086;&#23376;&#12290; &#28982;&#21518;&#37325;&#26032;&#21152;&#36733;&#39029;&#38754;, &#37325;&#26032;&#21152;&#36733;&#39029;&#38754;&#12290;</p><p>&#20320;&#25152;&#35266;&#23519;&#21040;&#30340;&#26159;&#20247;&#25152;&#21608;&#30693;&#30340;&#8220;&#37325;&#22797;&#25552;&#20132;&#8221;&#38382;&#39064;&#12290; &#27599;&#24403;&#29992;&#25143;&#25353;&#19979;&#37325;&#26032;&#21152;&#36733;,&#19968;&#20010;&#35831;&#27714;&#34987;&#21457;&#36865;&#21040;&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;,&#38382;&#39064;&#26159;&#19968;&#20123;&#35831;&#27714;&#20351;&#24212;&#29992;&#31243;&#24207;&#31361;&#21464;&#25968;&#25454;&#32467;&#26500;&#12290;</p><p>Web &#24320;&#21457;&#20154;&#21592;&#29992;&#26469;&#36991;&#20813;&#37325;&#22797;&#25552;&#20132;&#38382;&#39064;&#30340;&#24120;&#35265;&#25216;&#26415;&#26159;&#23558;&#29366;&#24577;&#31361;&#21464;&#35831;&#27714;&#37325;&#23450;&#21521;&#21040;&#19981;&#21516;&#30340; URL,&#36825;&#26159;&#19968;&#20010;&#21487;&#20197;&#37325;&#26032;&#21152;&#36733;&#30340; URL&#12290;
&#36825;&#20010;&#25216;&#24039;&#26159;&#36890;&#36807;&#20989;&#25968; <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._redirect%2Fget%29%29" class="RktValLink" data-pltdoc="x">redirect/get</a></span> &#22312; Racket &#20013;&#23454;&#29616;&#30340;:</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/servlet..rkt)._redirect/get))"></a><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._redirect%2Fget%29%29" class="RktValDef RktValLink" data-pltdoc="x">redirect/get</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request?</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote><p><br/></p><p>&#23427;&#30340;&#30452;&#25509;&#21103;&#20316;&#29992;&#26159;&#24378;&#21046;&#29992;&#25143;&#30340;&#27983;&#35272;&#22120;&#36319;&#38543;&#37325;&#23450;&#21521;&#21040;&#19968;&#20010;&#23433;&#20840;&#30340; URL,&#23427;&#32473;&#20102;&#25105;&#20204;&#26032;&#30340;&#35831;&#27714;&#12290;</p><p>&#20363;&#22914;,&#32771;&#34385;&#19968;&#20010;&#29609;&#20855;&#24212;&#29992;&#31243;&#24207;,&#35753;&#29992;&#25143;&#21521;&#21517;&#21333;&#28155;&#21152;&#21517;&#31216;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A roster is a (roster names)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where names is a list of string.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">roster</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">names</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">roster-add-name!: roster string -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Given a roster and a name, adds the name</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">to the end of the roster.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">roster-add-name!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-roster</span><span class="hspace">&nbsp;</span><span class="RktSym">a-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-roster-names!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-roster</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">roster-names</span><span class="hspace">&nbsp;</span><span class="RktSym">a-roster</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">a-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">ROSTER</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">roster</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"kathi"</span><span class="hspace">&nbsp;</span><span class="RktVal">"shriram"</span><span class="hspace">&nbsp;</span><span class="RktVal">"dan"</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show-roster</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">show-roster: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show-roster</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Roster"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Roster"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">roster-names</span><span class="hspace">&nbsp;</span><span class="RktSym">ROSTER</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">add-name-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"a-name"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-name</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a-name</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-name-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">roster-add-name!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">ROSTER</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show-roster</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-itemized-list: (listof xexpr) -&gt; xexpr</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="hspace">&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-item: xexpr -&gt; xexpr</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">a-fragment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-fragment</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#36825;&#20010;&#24212;&#29992;&#31243;&#24207;&#36935;&#21040;&#20102;&#19982;&#25105;&#20204;&#30340;&#21338;&#23458;&#30456;&#21516;&#30340;&#38382;&#39064;:&#22914;&#26524;&#29992;&#25143;&#28155;&#21152;&#19968;&#20010;&#21517;&#31216;,&#28982;&#21518;&#25353;&#37325;&#26032;&#21152;&#36733;,&#21017;&#30456;&#21516;&#30340;&#21517;&#31216;&#23558;&#34987;&#28155;&#21152;&#20004;&#27425;&#12290;</p><p>&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#26356;&#25913;&#21333;&#20010;&#34920;&#36798;&#24335;&#26469;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;; &#20320;&#33021;&#25214;&#21040;&#23427;&#21527;?</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A roster is a (roster names)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where names is a list of string.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">roster</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">names</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">roster-add-name!: roster string -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Given a roster and a name, adds the name</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">to the end of the roster.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">roster-add-name!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-roster</span><span class="hspace">&nbsp;</span><span class="RktSym">a-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-roster-names!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-roster</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">roster-names</span><span class="hspace">&nbsp;</span><span class="RktSym">a-roster</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">a-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">ROSTER</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">roster</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"kathi"</span><span class="hspace">&nbsp;</span><span class="RktVal">"shriram"</span><span class="hspace">&nbsp;</span><span class="RktVal">"dan"</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show-roster</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">show-roster: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show-roster</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Roster"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Roster"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">roster-names</span><span class="hspace">&nbsp;</span><span class="RktSym">ROSTER</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">add-name-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"a-name"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-name</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a-name</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-name-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">roster-add-name!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">ROSTER</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show-roster</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">redirect/get</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-itemized-list: (listof xexpr) -&gt; xexpr</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="hspace">&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-item: xexpr -&gt; xexpr</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">a-fragment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-fragment</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#25152;&#20197; double-submit &#38169;&#35823;&#24456;&#23481;&#26131;&#38459;&#27490;:&#27599;&#24403;&#20320;&#26377;&#22788;&#29702;&#31243;&#24207;&#25913;&#21464;&#31995;&#32479;&#30340;&#29366;&#24577;,&#20351;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._redirect%2Fget%29%29" class="RktValLink" data-pltdoc="x">redirect/get</a></span> &#21457;&#36865;&#22238;&#20320;&#30340;&#21709;&#24212;&#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span>
&#20351;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._redirect%2Fget%29%29" class="RktValLink" data-pltdoc="x">redirect/get</a></span> &#20462;&#22797;&#21338;&#23458;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340; double-submit &#38169;&#35823;&#12290;</p><p>&#26377;&#20102;&#36825;&#20123;&#23567;&#20462;&#22797;,&#25105;&#20204;&#30340;&#21338;&#23458;&#24212;&#29992;&#31243;&#24207;&#29616;&#22312;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A blog is a (blog posts)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where posts is a (listof post)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">posts</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and post is a (post title body comments)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where title is a string, body is a string,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and comments is a (listof string)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">comments</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG: blog</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The initial BLOG.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is another post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is my first post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"First comment!"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog-insert-post!: blog post -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog and a post, adds the post at the top of the blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-blog-posts!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">post-insert-comment!: post string -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post and a comment string.</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">As a side-efect, </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">adds the comment to the bottom of the post</span><span class="RktCmt">'</span><span class="RktCmt">s list of comments.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-post-comments!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a request and produces a page that displays</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">all of the web content.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Produces an HTML page of the content of the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"title"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"body"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">parse-post: bindings -&gt; post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Extracts a post out of the bindings.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">BLOG</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">redirect/get</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post-detail-page: post request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post and produces a detail page of the post.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The user will be able to either insert new comments</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">or go back to render-blog-page.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h2</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-comment-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"comment"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">back-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Back to the blog"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-comment</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">comment</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-comment-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-confirm-add-comment-page</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-comment</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">back-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-confirm-add-comment-page :</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">comment post request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a comment that we intend to add to a post, as well</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as the request. If the user follows through, adds a comment </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and goes back to the display page. Otherwise, goes back to </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the detail page of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-confirm-add-comment-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Add a Comment"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Add a Comment"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"The comment: "</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-comment</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"will be added to "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">yes-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Yes, add the comment."</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">cancel-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"No, I changed my mind!"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">yes-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">redirect/get</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cancel-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post: post (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post, produces an xexpr fragment of the post.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The fragment contains a link to show a detailed view of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">view-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">view-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">" comment(s)"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-posts: (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a embed/url, produces an xexpr fragment</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of all its posts.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-itemized-list: (listof xexpr) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a list of items, and produces a rendering as</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">an unorderered list.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="hspace">&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-item: xexpr -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes an xexpr, and produces a rendering</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as a list item.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">a-fragment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-fragment</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;抽象化的模型&quot;">13<tt>&nbsp;</tt><a name="(part._~e6~8a~bd~e8~b1~a1~e5~8c~96~e7~9a~84~e6~a8~a1~e5~9e~8b)"></a>&#25277;&#35937;&#21270;&#30340;&#27169;&#22411;</h3><p>&#22914;&#26524;&#25105;&#20204;&#36890;&#36807;&#20851;&#38381;&#31243;&#24207;&#8220;&#20851;&#38381;&#28783;&#8221;,&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;&#29366;&#24577;&#28040;&#22833;&#22312;&#20197;&#22826;&#12290;
&#25105;&#20204;&#22914;&#20309;&#35753;&#25105;&#20204;&#30340;&#30701;&#26242;&#29366;&#24577;&#22362;&#25345;?&#22312;&#25105;&#20204;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#20043;&#21069;,&#35831;&#27880;&#24847;,&#23427;&#19981;&#36866;&#29992;&#20110;&#25152;&#26377;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;&#29366;&#24577;,&#22240;&#20026;&#25105;&#20204;&#27809;&#26377;&#38271;&#26399;&#30340;&#20852;&#36259;&#20687;&#35831;&#27714;&#12290;
&#25105;&#20204;&#20851;&#24515;&#30340;&#20445;&#23384;&#26159;&#25105;&#20204;&#30340;&#21338;&#23458;&#27169;&#22411;&#12290;</p><p>&#22914;&#26524;&#25105;&#20204;&#20180;&#32454;&#30475;&#30475;&#25105;&#20204;&#30340; Web &#24212;&#29992;&#31243;&#24207;,&#25105;&#20204;&#30475;&#21040;&#25105;&#20204;&#30340;&#21338;&#23458;&#27169;&#22411;&#21644;&#20351;&#29992;&#35813;&#27169;&#22411;&#30340; Web &#24212;&#29992;&#31243;&#24207;&#20043;&#38388;&#30340;&#25509;&#32541;&#12290;
&#35753;&#25105;&#20204;&#20998;&#31163;&#27169;&#22411;;&#23427;&#30340;&#25152;&#26377;&#19996;&#35199;&#38468;&#36817;&#30340;&#39030;&#37096;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">posts</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">comments</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#22312;&#29616;&#23454;&#30340; Web &#24212;&#29992;&#31243;&#24207;&#20013;,&#27169;&#22411;&#21644; Web &#24212;&#29992;&#31243;&#24207;&#30001;&#25277;&#35937;&#22681;&#20998;&#38548;&#12290;&#22312;&#29702;&#35770;&#19978;,&#36825;&#31181;&#20998;&#31163;&#20801;&#35768;&#25105;&#20204;&#22312;&#26410;&#26469;&#20570;&#20986;&#23396;&#31435;&#30340;&#21464;&#21270;&#32780;&#19981;&#20250;&#30772;&#22351;&#25972;&#20010;&#31995;&#32479;&#12290;
&#25152;&#20197;&#35753;&#25105;&#20204;&#24320;&#22987;&#20998;&#31163;&#12290;&#39318;&#20808;,&#25105;&#20204;&#23558;&#27169;&#22411;&#25286;&#20998;&#25104;&#19968;&#20010;&#21333;&#29420;&#30340;&#25991;&#20214;,&#28982;&#21518;&#25105;&#20204;&#23558;&#30740;&#31350;&#20351;&#27169;&#22411;&#25345;&#20037;&#21270;&#12290;</p><p>&#21019;&#24314;&#19968;&#20010;&#21517;&#20026; <span class="stt">"model.rkt"</span> &#30340;&#26032;&#25991;&#20214;,&#21253;&#21547;&#20197;&#19979;&#20869;&#23481;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/base</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A blog is a (blog posts)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where posts is a (listof post)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">posts</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and post is a (post title body comments)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where title is a string, body is a string, </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and comments is a (listof string)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">comments</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG: blog</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The initial BLOG.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is another post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is my first post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"First comment!"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog-insert-post!: blog post -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog and a post, adds the post at the top of the blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-blog-posts!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">post-insert-comment!: post string -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post and a comment string.</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">As a side-efect, </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">adds the comment to the bottom of the post</span><span class="RktCmt">'</span><span class="RktCmt">s list of comments.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-post-comments!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">provide</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">all-defined-out</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#36825;&#23454;&#36136;&#19978;&#26159;&#25105;&#20204;&#30830;&#23450;&#20026;&#25105;&#20204;&#30340;&#27169;&#22411;&#30340;&#32447;&#30340;&#21098;&#20999;&#21644;&#31896;&#36148;&#12290; &#23427;&#26159;&#29992; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket</span></a> &#35821;&#35328;&#32534;&#20889;&#30340;,&#22240;&#20026;&#27169;&#22411;&#19981;&#38656;&#35201;&#25285;&#24515; web &#26381;&#21153;&#22120;&#30340;&#19996;&#35199;&#12290;
&#36824;&#26377;&#19968;&#20010;&#39069;&#22806;&#30340;&#34920;&#36798;&#24335;,&#30475;&#36215;&#26469;&#26377;&#28857;&#22855;&#24618;:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">provide</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._all-defined-out%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">all-defined-out</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><p>&#23427;&#21578;&#35785; Racket &#25480;&#20104;&#20854;&#20182;&#25991;&#20214;&#35775;&#38382; <span class="stt">"model.rkt"</span> &#25991;&#20214;&#20013;&#23450;&#20041;&#30340;&#25152;&#26377;&#20869;&#23481;&#12290;</p><p>&#29616;&#22312;&#25105;&#20204;&#22238;&#21040;&#25105;&#20204;&#30340; web &#24212;&#29992;&#31243;&#24207;,&#24182;&#25913;&#21464;&#23427;&#20351;&#29992;&#36825;&#20010;&#27169;&#22411;,&#36890;&#36807;&#29992;&#34920;&#36798;&#24335;&#26367;&#25442;&#21024;&#38500;&#30340;&#27169;&#22411;&#20195;&#30721;</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"model.rkt"</span><span class="RktPn">)</span></p></blockquote><p>&#23427;&#23558;&#25105;&#20204;&#30340; Web &#24212;&#29992;&#31243;&#24207;&#27169;&#22359;&#25346;&#25509;&#21040; <span class="RktVal">"model.rkt"</span> &#27169;&#22359;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktVal">"model.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a request and produces a page that displays</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">all of the web content.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Produces an HTML page of the content of the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">BLOG.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"title"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"body"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">parse-post: bindings -&gt; post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Extracts a post out of the bindings.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">BLOG</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">redirect/get</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post-detail-page: post request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post and produces a detail page of the post.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The user will be able to either insert new comments</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">or go back to render-blog-page.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h2</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-comment-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"comment"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">back-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Back to the blog"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-comment</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">comment</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-comment-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-confirm-add-comment-page</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-comment</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">back-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-confirm-add-comment-page :</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">comment post request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a comment that we intend to add to a post, as well</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as the request. If the user follows through, adds a comment </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and goes back to the display page. Otherwise, goes back to </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the detail page of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-confirm-add-comment-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Add a Comment"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Add a Comment"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"The comment: "</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-comment</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"will be added to "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">yes-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Yes, add the comment."</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">cancel-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"No, I changed my mind!"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">yes-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">redirect/get</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cancel-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post: post (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post, produces an xexpr fragment of the post.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The fragment contains a link to show a detailed view of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">view-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">view-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">" comment(s)"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-posts: (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a embed/url, produces an xexpr fragment</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of all its posts.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">BLOG</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-itemized-list: (listof xexpr) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a list of items, and produces a rendering as</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">an unorderered list.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="hspace">&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-item: xexpr -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes an xexpr, and produces a rendering </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as a list item.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">a-fragment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-fragment</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;一个持久的模型&quot;">14<tt>&nbsp;</tt><a name="(part._~e4~b8~80~e4~b8~aa~e6~8c~81~e4~b9~85~e7~9a~84~e6~a8~a1~e5~9e~8b)"></a>&#19968;&#20010;&#25345;&#20037;&#30340;&#27169;&#22411;</h3><p>&#29616;&#22312;&#27169;&#22411;&#39547;&#30041;&#22312;&#19968;&#20010;&#21333;&#29420;&#30340;&#27169;&#22359;&#20013;,&#25105;&#20204;&#21487;&#20197;&#26356;&#23481;&#26131;&#22320;&#20462;&#25913;&#23427;,&#29305;&#21035;&#26159;&#21487;&#20197;&#20351;&#20854;&#25345;&#20037;&#21270;&#12290;</p><p>&#31532;&#19968;&#27493;&#26159;&#20351;&#27169;&#22411;&#32467;&#26500;&#21487;&#24207;&#21015;&#21270;&#12290;&#20197;&#21069;,&#25105;&#20204;&#36890;&#36807;&#22312;&#23427;&#20204;&#30340;&#23450;&#20041;&#20013;&#28155;&#21152; <span class="RktPn">#:mutable</span> &#26469;&#20351;&#32467;&#26500;&#21487;&#21464;&#12290;
&#31867;&#20284;&#22320;,&#24403;&#20851;&#38190;&#23383; <span class="RktPn">#:prefab</span> &#34987;&#28155;&#21152;&#21040;&#32467;&#26500;&#30340;&#23450;&#20041;&#20013;&#26102;,Racket &#29702;&#35299;&#35813;&#32467;&#26500;&#21487;&#20197;&#26159;&#8220;&#39044;&#20808;&#21046;&#36896;&#30340;&#8221;,
&#21363;&#22312;&#31243;&#24207;&#24320;&#22987;&#36816;&#34892;&#20043;&#21069;&#21019;&#24314;&#30340;,&#36825;&#27491;&#26159;&#25105;&#20204;&#22312;&#24674;&#22797;&#21338;&#23458;&#25968;&#25454;&#26102;&#25152;&#38656;&#35201;&#30340;&#20174;&#30913;&#30424;&#12290;&#25105;&#20204;&#30340;&#21338;&#23458;&#32467;&#26500;&#23450;&#20041;&#29616;&#22312;&#30475;&#36215;&#26469;&#20687;:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">posts</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="hspace">&nbsp;</span><span class="RktPn">#:prefab</span><span class="RktPn">)</span></p></blockquote><p><span class="RktSym">blog</span> &#32467;&#26500;&#29616;&#22312;&#21487;&#20197;&#20174;&#22806;&#37096;&#19990;&#30028;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">read</a></span> &#20174;&#22806;&#37096;&#19990;&#30028;&#35835;&#21462;,&#24182;&#36890;&#36807; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">write</a></span> &#23558;&#20854;&#20889;&#20837;&#12290;
&#20294;&#26159;&#25105;&#20204;&#36824;&#38656;&#35201;&#30830;&#20445; <span class="RktSym">blog</span> &#32467;&#26500;&#20013;&#30340;&#25152;&#26377;&#20869;&#23481;&#20063;(&#20256;&#36882;)&#26631;&#35760;&#20026; <span class="RktPn">#:prefab</span> &#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#20026;&#24086;&#23376;&#20889;&#26032;&#30340;&#32467;&#26500;&#23450;&#20041;&#12290;</p><p>&#22312;&#36825;&#19968;&#28857;&#19978;,&#25105;&#20204; <span class="emph">&#21487;&#20197;</span> &#35835;&#20889;&#21338;&#23458;&#21040;&#30913;&#30424;&#12290;&#25152;&#20197;&#35753;&#25105;&#20204;&#36825;&#26679;&#20570;&#12290;&#39318;&#20808;,&#25105;&#20204;&#23558;&#21521;&#27169;&#22411;&#28155;&#21152;&#19968;&#20010;&#25351;&#21521;&#21338;&#23458;&#39547;&#30041;&#22312;&#30913;&#30424;&#19978;&#30340;&#36335;&#24452;&#30340;&#36335;&#24452;:</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-9..rkt)._set-blog-posts!))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-9..rkt)._set-blog-home!))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-9..rkt)._blog-posts))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-9..rkt)._blog-home))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-9..rkt)._blog~3f))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-9..rkt)._struct~3ablog))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-9..rkt)._blog))"></a><span class="RktSym"><span class="RktSymDef RktSym">blog</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">home</span><span class="stt"> </span><span class="RktSym">posts</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:mutable</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:prefab</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">home</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">posts</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">post?</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#27880;&#24847;,&#25105;&#20204;&#38656;&#35201;&#23558;&#36335;&#24452;&#36716;&#25442;&#20026;&#23383;&#31526;&#20018;&#12290; &#20026;&#20160;&#20040;&#25105;&#20204;&#19981;&#35753;&#21338;&#23458;&#32467;&#26500;&#21253;&#21547;&#36335;&#24452;?
&#31572;&#26696;:&#23427;&#20204;&#19981;&#33021;&#29992;&#20110; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">read</a></span> &#21644; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">write</a></span> &#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#20026;&#21338;&#23458;&#32534;&#20889;&#26032;&#30340;&#32467;&#26500;&#23450;&#20041;&#12290;</p><p>&#25509;&#19979;&#26469;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;&#20989;&#25968;,&#35753;&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#21021;&#22987;&#21270;&#21338;&#23458;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">initialize-blog! : path? -&gt; blog</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Reads a blog from a path, if not present, returns default</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-blog!</span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">log-missing-exn-handler</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._exn%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">exn</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path-%7E3estring%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">path-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is my first post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"First comment!"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is another post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">the-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._with-handlers%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">with-handlers</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exn%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">exn?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">log-missing-exn-handler</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=file-ports.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._with-input-from-file%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">with-input-from-file</a></span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">read</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-blog-home!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path-%7E3estring%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">path-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">the-blog</span><span class="RktPn">)</span></td></tr></table></blockquote><p><span class="RktSym">initialize-blog!</span> &#37319;&#21462;&#19968;&#20010;&#36335;&#24452;,&#24182;&#23581;&#35797;&#20174;&#20013; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">read</a></span> &#12290;
&#22914;&#26524;&#36335;&#24452;&#21253;&#21547; <span class="RktSym">blog</span> &#32467;&#26500;,&#21017; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">read</a></span> &#24182;&#35299;&#26512;&#23427;,&#22240;&#20026; <span class="RktSym">blog</span> &#26159; <span class="RktPn">#:prefab</span> &#12290;
&#22914;&#26524;&#22312;&#36335;&#24452;&#19978;&#27809;&#26377;&#25991;&#20214;,&#25110;&#32773;&#22914;&#26524;&#25991;&#20214;&#26377;&#19968;&#20123;&#34394;&#20551;&#25968;&#25454;,&#21017; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">read</a></span> &#25110;
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=file-ports.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._with-input-from-file%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">with-input-from-file</a></span> &#23558;&#25243;&#20986;&#24322;&#24120;&#12290;
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._with-handlers%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">with-handlers</a></span> &#25552;&#20379;&#20102;&#19968;&#20010;&#24322;&#24120;&#22788;&#29702;&#31243;&#24207;,&#36890;&#36807;&#36820;&#22238;&#40664;&#35748;&#30340; <span class="RktSym">blog</span> &#32467;&#26500;&#26469;&#21709;&#24212;&#20219;&#20309;&#38169;&#35823;&#12290;
&#22312;&#23558; <span class="RktSym">the-blog</span> &#32465;&#23450;&#21040;&#26032;&#35835;&#21462;(&#25110;&#40664;&#35748;)&#32467;&#26500;&#20043;&#21518;,&#25105;&#20204;&#23558; home &#35774;&#32622;&#20026;&#27491;&#30830;&#30340;&#36335;&#24452;&#12290;</p><p>&#25509;&#19979;&#26469;&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;&#20989;&#25968;&#23558;&#27169;&#22411;&#20445;&#23384;&#21040;&#30913;&#30424;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">save-blog! : blog -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Saves the contents of a blog to its home</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">save-blog!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">write-to-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">write</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=file-ports.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._with-output-to-file%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">with-output-to-file</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-home</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">write-to-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:exists</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">replace</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><span class="RktSym">save-blog!</span> &#23558;&#27169;&#22411; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">write</a></span> home;
&#36890;&#36807;&#25552;&#20379;&#19968;&#20010; <span class="RktPn">#:exists</span> &#23376;&#21477;&#36755;&#20986;&#21040; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=file-ports.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._with-output-to-file%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">with-output-to-file</a></span>, &#23427;&#30830;&#20445;&#30913;&#30424;&#19978;&#30340;&#26087;&#20869;&#23481;&#23558;&#34987;&#35206;&#30422;&#12290;</p><p>&#27492;&#20989;&#25968;&#29616;&#22312;&#21487;&#29992;&#20110;&#22312;&#29992;&#25143;&#20462;&#25913;&#21338;&#23458;&#32467;&#26500;&#26102;&#20445;&#23384;&#21338;&#23458;&#32467;&#26500;&#12290;
&#22240;&#20026;&#20462;&#25913;&#21482;&#26159;&#36890;&#36807;&#27169;&#22411;,&#21482;&#26377; <span class="RktSym">blog-insert-post!</span> &#21644; <span class="RktSym">post-insert-comment!</span> &#23558;&#38656;&#35201;&#26356;&#26032;&#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#26356;&#25913; <span class="RktSym">blog-insert-post!</span> &#21644; <span class="RktSym">post-insert-comment!</span> &#35843;&#29992; <span class="RktSym">save-blog!</span> &#12290;</p><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#20320;&#21487;&#33021;&#24050;&#32463;&#27880;&#24847;&#21040;&#19968;&#20010;&#38382;&#39064;,&#24403;&#35797;&#22270;&#26356;&#26032; <span class="RktSym">post-insert-comment!</span>:
&#35813;&#20989;&#25968;&#27809;&#26377;&#21338;&#23458;&#20256;&#36882;&#21040; <span class="RktSym">save-blog!</span> &#12290;
&#22240;&#27492;,&#25105;&#20204;&#38656;&#35201;&#32473;&#23427;&#19968;&#20010;&#21338;&#23458;&#21442;&#25968;,&#24182;&#36866;&#24403;&#22320;&#26356;&#25913;&#24212;&#29992;&#31243;&#24207;&#12290;
&#34429;&#28982;&#25105;&#20204;&#22312;&#36825;&#37324;,&#35753;&#25105;&#20204;&#25913;&#21464; <span class="RktSym">blog-insert-post!</span> &#25509;&#21463; post &#32467;&#26500;&#30340;&#20869;&#23481;,&#32780;&#19981;&#26159;&#32467;&#26500;&#26412;&#36523;&#12290;
&#36825;&#25913;&#36827;&#20102;&#27169;&#22411;&#30340;&#30028;&#38754;,&#20351;&#20854;&#26356;&#25277;&#35937;:</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-9..rkt)._blog-insert-post!))"></a><span class="RktSym"><span class="RktSymDef RktSym">blog-insert-post!</span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/scribblings/tutorial/examples/iteration-9..rkt)._post-insert-comment!))"></a><span class="RktSym"><span class="RktSymDef RktSym">post-insert-comment!</span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog?</span><span class="hspace">&nbsp;</span><span class="RktSym">post?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div></p><p><br/></p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#32534;&#20889; <span class="RktSym">blog-insert-post!</span> &#21644; <span class="RktSym">post-insert-comment!</span> &#30340;&#26032;&#23450;&#20041;,
&#35760;&#20303;&#35843;&#29992; <span class="RktSym">save-blog!</span> &#12290;</p><p>&#22312;&#27169;&#22411;&#30340;&#19978;&#19968;&#27425;&#36845;&#20195;&#20013;,&#25105;&#20204;&#20351;&#29992; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">provide</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._all-defined-out%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">all-defined-out</a></span><span class="RktPn">)</span><span class="RktPn">)</span> &#20844;&#24320;&#25152;&#26377;&#27169;&#22411;&#30340;&#23450;&#20041;&#12290;
&#36825;&#36829;&#21453;&#20102;&#25277;&#35937;&#30340;&#21407;&#21017;,&#23427;&#21578;&#35785;&#25105;&#20204;&#38544;&#34255;&#23454;&#29616;&#32454;&#33410;,&#22914;&#31169;&#26377;&#20989;&#25968;&#21644;&#20869;&#37096;&#25968;&#25454;&#32467;&#26500;&#12290;
&#25105;&#20204;&#29616;&#22312;&#35201;&#36981;&#23432;&#36825;&#19968;&#21407;&#21017;,&#20351;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">provide</a></span> &#30340;&#24418;&#24335;,&#26126;&#30830;&#21629;&#21517;&#26292;&#38706;&#30340;&#23450;&#20041;&#12290;</p><p><div class="SIntrapara">&#20363;&#22914;,&#22914;&#26524;&#25105;&#20204;&#24819;&#23558;&#27169;&#22359;&#30340;&#26333;&#20809;&#38480;&#21046;&#20026;&#20989;&#25968;
<span class="RktSym">blog-insert-post!</span> &#21644; <span class="RktSym">post-insert-comment!</span>,&#25105;&#20204;&#21487;&#20197;&#36825;&#26679;&#20570;:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">provide</a></span><span class="hspace">&nbsp;</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">post-insert-comment!</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">&#20294;&#36825;&#26292;&#38706;&#22826;&#23569;!&#22240;&#27492;,&#35753;&#25105;&#20204;&#23558;&#27169;&#22411;&#20013;&#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">provide</a></span> &#34892;&#26356;&#25913;&#20026;:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">provide</a></span><span class="hspace">&nbsp;</span><span class="RktSym">blog?</span><span class="hspace">&nbsp;</span><span class="RktSym">blog-posts</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">post?</span><span class="hspace">&nbsp;</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">post-comments</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">initialize-blog!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">post-insert-comment!</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>&#22240;&#20026;&#36825;&#20061;&#20010;&#21151;&#33021;&#37117;&#26159;&#25105;&#20204;&#38656;&#35201;&#30340;&#27169;&#22359;,&#36825;&#31181;&#31243;&#24230;&#30340;&#26333;&#20809;&#26159;&#27491;&#30830;&#30340;&#12290;</p><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#26368;&#21518;&#19968;&#27493;&#26159;&#26356;&#25913;&#24212;&#29992;&#31243;&#24207;&#12290; &#25105;&#20204;&#38656;&#35201;&#35843;&#29992; <span class="RktSym">initialize-blog!</span> &#20197;&#35835;&#21462;&#21338;&#23458;&#32467;&#26500;,
&#24182;&#19988;,&#30001;&#20110;&#19981;&#20877;&#26377; <span class="RktSym">BLOG</span> &#23548;&#20986;,&#25105;&#20204;&#38656;&#35201;&#22312;&#24212;&#29992;&#31243;&#24207;&#21608;&#22260;&#20256;&#36882;&#36820;&#22238;&#30340;&#21338;&#23458;&#20540;&#12290;</p><p>&#39318;&#20808;,&#25913;&#21464; <span class="RktSym">start</span> &#35843;&#29992; <span class="RktSym">initialize-blog!</span> &#22312;&#25105;&#20204;&#30340; home &#30446;&#24405;&#20013;&#26377;&#19968;&#20010;&#36335;&#24452;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-blog!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._build-path%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">build-path</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"the-blog-data.db"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#36890;&#36807;&#24212;&#29992;&#31243;&#24207;&#32447;&#31243; <span class="RktSym">blog</span> &#32467;&#26500;&#36866;&#24403;&#22320;&#32473; <span class="RktSym">blog-insert-post!</span> &#21644;
<span class="RktSym">post-insert-comment!</span> &#27491;&#30830;&#30340;&#20540;&#12290; &#20320;&#36824;&#38656;&#35201;&#26356;&#25913; <span class="RktSym">render-blog-page</span> &#22914;&#20309;&#28155;&#21152;&#26032;&#24086;&#23376;&#12290;</p><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#25105;&#20204;&#30340;&#27169;&#22411;&#26159;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/base</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktSym">racket/list</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A blog is a (blog home posts)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where home is a string, posts is a (listof post)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">home</span><span class="hspace">&nbsp;</span><span class="RktSym">posts</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="hspace">&nbsp;</span><span class="RktPn">#:prefab</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and post is a (post blog title body comments)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where title is a string, body is a string,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and comments is a (listof string)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">comments</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="hspace">&nbsp;</span><span class="RktPn">#:prefab</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">initialize-blog! : path? -&gt; blog</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Reads a blog from a path, if not present, returns default</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-blog!</span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">log-missing-exn-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">exn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">path-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is another post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"This is my first post"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">"First comment!"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">the-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">with-handlers</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">exn?</span><span class="hspace">&nbsp;</span><span class="RktSym">log-missing-exn-handler</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">with-input-from-file</span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="hspace">&nbsp;</span><span class="RktSym">read</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-blog-home!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">path-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">the-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">save-blog! : blog -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Saves the contents of a blog to its home</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">save-blog!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">write-to-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">write</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">with-output-to-file</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-home</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">write-to-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:exists</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">replace</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog-insert-post!: blog string string -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog and a post, adds the post at the top of the blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-blog-posts!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">empty</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">save-blog!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">post-insert-comment!: blog post string -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog, a post and a comment string.</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">As a side-efect, </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">adds the comment to the bottom of the post</span><span class="RktCmt">'</span><span class="RktCmt">s list of comments.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set-post-comments!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">save-blog!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">provide</span><span class="hspace">&nbsp;</span><span class="RktSym">blog?</span><span class="hspace">&nbsp;</span><span class="RktSym">blog-posts</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">post?</span><span class="hspace">&nbsp;</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">post-comments</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">initialize-blog!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">post-insert-comment!</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#26159;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktVal">"model-2.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a request and produces a page that displays</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">all of the web content.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-blog!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">build-path</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-directory</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"the-blog-data.db"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: blog request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Produces an HTML page of the content of the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"title"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"body"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">redirect/get</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post-detail-page: post request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post and produces a detail page of the post.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The user will be able to either insert new comments</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">or go back to render-blog-page.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h2</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-comment-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"comment"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">back-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Back to the blog"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-comment</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract-binding/single</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">comment</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-comment-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-confirm-add-comment-page</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-comment</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">back-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-confirm-add-comment-page :</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog comment post request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a comment that we intend to add to a post, as well</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as the request. If the user follows through, adds a comment </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and goes back to the display page. Otherwise, goes back to </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the detail page of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-confirm-add-comment-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Add a Comment"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Add a Comment"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"The comment: "</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-comment</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"will be added to "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">yes-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Yes, add the comment."</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">cancel-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"No, I changed my mind!"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">yes-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">redirect/get</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cancel-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post: post (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post, produces an xexpr fragment of the post.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The fragment contains a link to show a detailed view of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">view-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">view-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">" comment(s)"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-posts: blog (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a embed/url, produces an xexpr fragment</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of all its posts.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-itemized-list: (listof xexpr) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a list of items, and produces a rendering as</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">an unorderered list.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="hspace">&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-item: xexpr -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes an xexpr, and produces a rendering</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as a list item.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">a-fragment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-fragment</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#36825;&#31181;&#25345;&#20037;&#21270;&#26041;&#27861;&#23545;&#20110;&#31616;&#21333;&#30340;&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#24037;&#20316;&#24471;&#38750;&#24120;&#22909;&#12290;
&#20294;&#26159;&#38543;&#30528;&#24212;&#29992;&#31243;&#24207;&#38656;&#27714;&#30340;&#22686;&#38271;,&#25105;&#20204;&#23558;&#24517;&#39035;&#22788;&#29702;&#24182;&#21457;&#38382;&#39064;,&#22312;&#25105;&#20204;&#30340;&#25968;&#25454;&#27169;&#22411;&#19978;&#32570;&#23569;&#19968;&#20010;&#31616;&#21333;&#30340;&#26597;&#35810;&#35821;&#35328;&#31561;&#12290;
&#22240;&#27492;,&#22312;&#19979;&#19968;&#33410;&#20013;,&#25105;&#20204;&#23558;&#35299;&#37322;&#22914;&#20309;&#20351;&#29992; SQL &#25968;&#25454;&#24211;&#26469;&#23384;&#20648;&#25105;&#20204;&#30340; &#21338;&#23458;&#27169;&#22411;&#12290;</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;使用一个_SQL_数据库&quot;">15<tt>&nbsp;</tt><a name="(part._~e4~bd~bf~e7~94~a8~e4~b8~80~e4~b8~aa_.S.Q.L_~e6~95~b0~e6~8d~ae~e5~ba~93)"></a>&#20351;&#29992;&#19968;&#20010; SQL &#25968;&#25454;&#24211;</h3><p>&#35201;&#20351;&#29992; SQL &#25968;&#25454;&#24211;,&#25105;&#20204;&#20351;&#29992;&#20197;&#19979;&#26469;&#33258; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=index.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">db</span></a> &#24211;&#30340;&#32465;&#23450;: <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=connect.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._connection%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">connection?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=connect.html%23%2528def._%2528%2528lib._db%252Fmain..rkt%2529._sqlite3-connect%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">sqlite3-connect</a></span>,
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._table-exists%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">table-exists?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-exec%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-exec</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-list</a></span> &#21644; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-value%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-value</a></span> &#12290;
&#36890;&#36807;&#23558;&#20197;&#19979;&#20869;&#23481;&#28155;&#21152;&#21040;&#27169;&#22411;&#39030;&#37096;&#26469;&#23548;&#20837;&#23427;&#20204;:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="RktPn">)</span></p></blockquote><p>&#25509;&#19979;&#26469;,&#25105;&#20204;&#20351;&#29992;&#20197;&#19979;&#34920;&#26684;&#20026;&#25105;&#20204;&#30340;&#27169;&#22411;&#23450;&#20041;&#20851;&#31995;&#32467;&#26500;:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">CREATE TABLE posts (id INTEGER PRIMARY KEY, title TEXT, body TEXT)</span></p></td></tr><tr><td><p><span class="stt">CREATE TABLE comments (pid INTEGER, content TEXT)</span></p></td></tr></table></p><p>&#20687; Racket &#32467;&#26500;&#19968;&#26679;,&#25968;&#25454;&#24211;&#20013;&#30340;&#19968;&#20010;&#24086;&#23376;&#26377;&#19968;&#20010;&#26631;&#39064;&#21644;&#19968;&#20010;&#20027;&#20307;,&#20294;&#23427;&#20063;&#26377;&#19968;&#20010;&#26631;&#35782;&#31526;&#12290;
(&#23454;&#38469;&#19978;,Racket &#32467;&#26500;&#20063;&#26377;&#19968;&#20010;&#26631;&#35782;&#31526;&#8212;&#8212;&#20869;&#23384;&#25351;&#38024;&#8212;&#8212;&#20294;&#26159;&#25968;&#25454;&#24211;&#35201;&#27714;&#23427;&#26159;&#26174;&#24335;&#30340;&#12290;)</p><p>&#23545;&#20110;&#35780;&#35770;,&#27599;&#20010;&#26377;&#19968;&#20123;&#25991;&#26412;&#20869;&#23481;,&#24182;&#36890;&#36807;&#26631;&#35782;&#31526;&#36830;&#25509;&#21040;&#19968;&#20010;&#24086;&#23376;&#12290;&#25105;&#20204;&#21487;&#20197;&#36873;&#25321;&#20351;&#29992;
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">write</a></span> &#26469;&#24207;&#21015;&#21270;&#27880;&#37322;,&#24182;&#22312; posts &#34920;&#20013;&#28155;&#21152;&#19968;&#20010;&#26032;&#30340; TEXT &#21015;&#26469;&#23384;&#20648;&#20540;&#12290;
&#20294;&#26159;&#21333;&#29420;&#30340;&#27880;&#37322;&#34920;&#33021;&#26356;&#22909;&#22320;&#31526;&#21512;&#20851;&#31995;&#39118;&#26684;&#12290;</p><p><span class="RktSym">blog</span> &#32467;&#26500;&#29616;&#22312;&#21482;&#26159;&#19968;&#20010;&#25968;&#25454;&#24211;&#21477;&#26564;&#30340;&#23481;&#22120;:</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._web-server/scribblings/tutorial/examples/dummy-10..rkt)._blog-db))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/dummy-10..rkt)._blog~3f))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/dummy-10..rkt)._struct~3ablog))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/dummy-10..rkt)._blog))"></a><span class="RktSym"><span class="RktSymDef RktSym">blog</span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">db</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=connect.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._connection%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">connection?</a></span></td></tr></table></blockquote><p><br/></p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#32534;&#20889; <span class="RktSym">blog</span> &#32467;&#26500;&#23450;&#20041;&#12290; &#23427;&#19981;&#38656;&#35201;&#26159;&#21487;&#21464;&#30340;&#25110;&#21487;&#24207;&#21015;&#21270;&#30340;&#12290;</p><p><div class="SIntrapara">&#25105;&#20204;&#29616;&#22312;&#21487;&#20197;&#32534;&#20889;&#20195;&#30721;&#26469;&#21021;&#22987;&#21270;&#19968;&#20010; <span class="RktSym">blog</span> &#32467;&#26500;:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">initialize-blog! : path? -&gt; blog?</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Sets up a blog database (if it doesn't exist)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-blog!</span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=connect.html%23%2528def._%2528%2528lib._db%252Fmain..rkt%2529._sqlite3-connect%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">sqlite3-connect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:database</span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">create</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">the-blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=when_unless.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._unless%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">unless</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._table-exists%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">table-exists?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-exec%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-exec</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-append</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"CREATE TABLE posts "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"(id INTEGER PRIMARY KEY, title TEXT, body TEXT)"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">the-blog</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is my first post"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">the-blog</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is another post"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=when_unless.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._unless%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">unless</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._table-exists%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">table-exists?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span><span class="RktVal">"comments"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-exec%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-exec</a></span><span class="hspace">&nbsp;</span><span class="RktSym">db</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"CREATE TABLE comments (pid INTEGER, content TEXT)"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">the-blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Flist..rkt%2529._first%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">the-blog</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"First comment!"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">the-blog</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>&#32473;&#23450; <span class="RktVal">'</span><span class="RktVal">create</span> &#26631;&#24535;,&#22914;&#26524;&#22312; <span class="RktSym">home</span> &#36335;&#24452;&#20013;&#19981;&#23384;&#22312;&#25968;&#25454;&#24211;, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=connect.html%23%2528def._%2528%2528lib._db%252Fmain..rkt%2529._sqlite3-connect%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">sqlite3-connect</a></span> &#21019;&#24314;&#19968;&#20010;&#25968;&#25454;&#24211;&#12290;
&#36825;&#26102; &#36825;&#20010;&#26102;&#20505;,&#26368;&#22909;&#33021;&#25913;&#21464;&#20320;&#23545; <span class="RktSym">initialize-blog!</span> &#26469;&#20351;&#29992;&#19968;&#20010;&#19981;&#21516;&#30340;&#36335;&#24452;,
&#22240;&#20026;&#21542;&#21017;&#65292;&#20320;&#23558;&#35797;&#22270;&#25226;&#26087;&#30340; S &#34920;&#36798;&#24335;&#25968;&#25454;&#25991;&#20214;&#35299;&#26512;&#20026;&#19968;&#20010; SQLite &#25968;&#25454;&#24211;,&#36825;&#23558;&#20250;&#22833;&#36133;&#12290;</p><p>&#25105;&#20204;&#20173;&#28982;&#38656;&#35201;&#29992;&#34920;&#30340;&#23450;&#20041;&#21644;&#21021;&#22987;&#25968;&#25454;&#26469;&#21021;&#22987;&#21270;&#25968;&#25454;&#24211;&#12290;&#23450;&#20041;&#21644;&#21021;&#22987;&#25968;&#25454;&#12290;
&#20043;&#21069;&#25105;&#20204;&#20351;&#29992; <span class="RktSym">blog-insert-post!</span> &#21644;
<span class="RktSym">post-insert-comment!</span> &#26469;&#23454;&#29616;&#36825;&#20010;&#30446;&#30340;;&#36825;&#37324;&#26159;&#23427;&#20204;&#30340;&#26032;&#30340;&#23454;&#29616;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog-insert-post!: blog? string? string? -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog and a post, adds the post at the top of the blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-exec%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-exec</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-db</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"INSERT INTO posts (title, body) VALUES (?, ?)"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">post-insert-comment!: blog? post string -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog, a post and a comment string.  As a side-effect,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">adds the comment to the bottom of the post's list of comments.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-exec%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-exec</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-db</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"INSERT INTO comments (pid, content) VALUES (?, ?)"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-id</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#27880;&#24847;,&#19978;&#38754;&#30340; SQL &#26597;&#35810;&#20351;&#29992; SQL &#21344;&#20301;&#31526; <span class="RktInBG"><span class="hspace"></span><span class="RktIn">?</span><span class="hspace"></span></span> &#26469;&#25191;&#34892;&#23383;&#31526;&#20018;&#26367;&#25442;&#12290;
&#22914;&#26524;&#20182;&#20204;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">format</a></span> &#21644; <span class="RktInBG"><span class="hspace"></span><span class="RktIn">~a</span><span class="hspace"></span></span> &#26469;&#25191;&#34892;,
&#19968;&#20010;&#24694;&#24847;&#30340;&#29992;&#25143;&#21487;&#20197;&#25552;&#20132;&#19968;&#20010;&#26631;&#39064;&#20026;
<span class="RktVal">"null', 'null') and INSERT INTO accounts (username, password) VALUES ('ur','hacked"</span> &#30340;&#24086;&#23376;,
&#35753; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-exec%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-exec</a></span> &#36827;&#34892;&#20004;&#27425; INSERT &#32780;&#19981;&#26159;&#19968;&#27425;&#12290;&#36825;&#23601;&#26159;&#25152;&#35859;&#30340; SQL &#27880;&#20837;&#25915;&#20987;&#12290;</p><p>SQL &#21344;&#20301;&#31526;&#36890;&#36807;&#30830;&#20445;&#26597;&#35810;&#25353;&#29031;&#21407;&#26679;&#25552;&#20132;&#32473; SQLite &#26469;&#38450;&#27490;&#36825;&#31181;&#25915;&#20987;,SQLite &#28982;&#21518;&#35299;&#26512;&#23427;&#24182;&#24212;&#29992;&#21442;&#25968;&#12290; &#27492;&#26041;&#27861;&#30830;&#20445;&#23558;&#21442;&#25968;&#20005;&#26684;&#22320;&#35270;&#20026;&#25968;&#25454;&#12290;</p><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#22312; <span class="RktSym">post-insert-comment!</span> &#25105;&#20204;&#20351;&#29992; <span class="RktSym">post-id</span> ,&#20294;&#26159;&#25105;&#20204;&#36824;&#27809;&#26377;&#23450;&#20041;&#26032;&#30340; <span class="RktSym">post</span> &#32467;&#26500;&#12290;
&#30001;&#20110; post &#34920;&#27169;&#24335;&#20351;&#29992;&#19968;&#20010;&#25972;&#25968;&#20316;&#20026;&#26631;&#35782;&#31526;,&#23427;&#23545; <span class="RktSym">post</span> &#32467;&#26500;&#26469;&#35828;&#20063;&#26159;&#36275;&#22815;&#30340;&#12290;
&#28982;&#32780;,&#22914;&#27492;&#23450;&#20041;&#30340;&#32467;&#26500;&#23558;&#19981;&#25351;&#31034;&#24086;&#23376;&#23646;&#20110;&#21738;&#20010;&#21338;&#23458;,&#24182;&#19988;&#22240;&#27492;&#19981;&#25351;&#31034;&#24086;&#23376;&#23646;&#20110;&#21738;&#20010;&#25968;&#25454;&#24211;&#12290;</p><p>&#22240;&#27492;,&#25105;&#20204;&#26080;&#27861;&#25552;&#21462;&#26631;&#39064;&#25110;&#27491;&#25991;&#20540;&#12290;&#35299;&#20915;&#26041;&#26696;,&#24403;&#28982;&#26159;&#23558;&#21338;&#23458;&#19982;&#27599;&#20010;&#24086;&#23376;&#20851;&#32852;:</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._web-server/scribblings/tutorial/examples/dummy-10..rkt)._post-id))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/dummy-10..rkt)._post-blog))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/dummy-10..rkt)._post~3f))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/dummy-10..rkt)._struct~3apost))"></a><a name="(def._((lib._web-server/scribblings/tutorial/examples/dummy-10..rkt)._post))"></a><span class="RktSym"><span class="RktSymDef RktSym">post</span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">blog</span><span class="stt"> </span><span class="RktSym">id</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">blog?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._integer%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">integer?</a></span></td></tr></table></blockquote><p><br/></p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#20889;&#24086;&#23376;&#30340;&#32467;&#26500;&#23450;&#20041;&#12290;</p><p>&#21019;&#24314;&#24086;&#23376;&#30340;&#21807;&#19968;&#21151;&#33021;&#26159; <span class="RktSym">blog-posts</span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog-posts : blog -&gt; (listof post?)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Queries for the post ids</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id-&gt;post</span><span class="hspace">&nbsp;</span><span class="RktSym">an-id</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">an-id</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym">id-&gt;post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-list</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-db</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"SELECT id FROM posts"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-list</a></span> &#21487;&#29992;&#20110;&#36820;&#22238;&#21333;&#20010;&#21015;&#30340;&#26597;&#35810;(&#20363;&#22914;, <span class="RktVal">"SELECT id FROM posts"</span>), &#24182;&#36820;&#22238;&#35813;&#21015;&#30340;&#20540;&#30340;&#21015;&#34920;&#12290;</p><p><div class="SIntrapara">&#22312;&#36825;&#19968;&#28857;&#19978;,&#25105;&#20204;&#21487;&#20197;&#32534;&#20889;&#23545;&#24086;&#23376;&#25805;&#20316;&#30340;&#20989;&#25968;:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">post-title : post -&gt; string?</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Queries for the title</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-value%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-value</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-db</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"SELECT title FROM posts WHERE id = ?"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-id</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=query-api.html%23%2528def._%2528%2528lib._db%252Fbase..rkt%2529._query-value%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">query-value</a></span> &#29992;&#20110;&#36820;&#22238;&#21333;&#20010;&#20540;(&#21363;,&#19968;&#34892;&#21644;&#19968;&#21015;)&#30340;&#26597;&#35810;&#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#20889; <span class="RktSym">post-body</span> &#30340;&#23450;&#20041;&#12290;</p><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#20889; <span class="RktSym">post-comments</span> &#30340;&#23450;&#20041;&#12290;
(&#25552;&#31034;:&#20351;&#29992; <span class="RktSym">blog-posts</span> &#20316;&#20026;&#27169;&#26495;,&#32780;&#19981;&#26159; <span class="RktSym">post-title</span> &#12290;)</p><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#25105;&#20204;&#38656;&#35201;&#23545;&#24212;&#29992;&#31243;&#24207;&#36827;&#34892;&#30340;&#21807;&#19968;&#26356;&#25913;&#26159;&#38656;&#35201;&#26032;&#27169;&#22411;&#12290; &#27880;&#24847;&#23427;&#30340;&#25509;&#21475;&#20445;&#25345;&#19981;&#21464;!</p><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#25105;&#20204;&#30340;&#27169;&#22411;&#26159;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/base</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktSym">racket/list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">db</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A blog is a (blog db)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where db is an sqlite connection</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">db</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A post is a (post blog id)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">where blog is a blog and id is an integer?</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">initialize-blog! : path? -&gt; blog?</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Sets up a blog database (if it doesn</span><span class="RktCmt">'</span><span class="RktCmt">t exist)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-blog!</span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sqlite3-connect</span><span class="hspace">&nbsp;</span><span class="RktPn">#:database</span><span class="hspace">&nbsp;</span><span class="RktSym">home</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">create</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">the-blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog</span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unless</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">table-exists?</span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">query-exec</span><span class="hspace">&nbsp;</span><span class="RktSym">db</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"CREATE TABLE posts "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"(id INTEGER PRIMARY KEY, title TEXT, body TEXT)"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">the-blog</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is my first post"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">the-blog</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Post"</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is another post"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unless</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">table-exists?</span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span><span class="RktVal">"comments"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">query-exec</span><span class="hspace">&nbsp;</span><span class="RktSym">db</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"CREATE TABLE comments (pid INTEGER, content TEXT)"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">the-blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">the-blog</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"First comment!"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">the-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog-posts : blog -&gt; (listof post?)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Queries for the post ids</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id-&gt;post</span><span class="hspace">&nbsp;</span><span class="RktSym">an-id</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">an-id</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">id-&gt;post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">query-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-db</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"SELECT id FROM posts"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">post-title : post -&gt; string?</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Queries for the title</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">query-value</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-db</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"SELECT title FROM posts WHERE id = ?"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-id</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">post-body : post -&gt; string?</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Queries for the body</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">query-value</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-db</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"SELECT body FROM posts WHERE id = ?"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-id</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">post-comments : post -&gt; (listof string?)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Queries for the comments</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">query-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-db</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"SELECT content FROM comments WHERE pid = ?"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-id</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog-insert-post!: blog? string? string? -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog and a post, adds the post at the top of the blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">query-exec</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-db</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"INSERT INTO posts (title, body) VALUES (?, ?)"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">post-insert-comment!: blog? post string -&gt; void</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a blog, a post and a comment string.</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">As a side-efect, </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">adds the comment to the bottom of the post</span><span class="RktCmt">'</span><span class="RktCmt">s list of comments.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">query-exec</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-db</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"INSERT INTO comments (pid, content) VALUES (?, ?)"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-id</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">provide</span><span class="hspace">&nbsp;</span><span class="RktSym">blog?</span><span class="hspace">&nbsp;</span><span class="RktSym">blog-posts</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">post?</span><span class="hspace">&nbsp;</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">post-comments</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">initialize-blog!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">post-insert-comment!</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#25105;&#20204;&#30340;&#24212;&#29992;&#26159;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"model-3.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktSym">....</span></td></tr></table></blockquote><p>&#26377;&#20851;&#32534;&#20889;&#25903;&#25345;&#25968;&#25454;&#24211;&#30340; Web servlet &#30340;&#26356;&#22810;&#20449;&#24687;,&#35831;&#21442;&#38405; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=db&amp;rel=using-db.html%23%2528part._intro-servlets%2529&amp;version=8.9" class="Sq" data-pltdoc="x">&#25968;&#25454;&#24211;&#21644; Web Servlets</a> &#12290;</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;使用_Formlets&quot;">16<tt>&nbsp;</tt><a name="(part._~e4~bd~bf~e7~94~a8_.Formlets)"></a>&#20351;&#29992; Formlets</h3><p>&#29616;&#22312;&#35753;&#25105;&#20204;&#22238;&#21040;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#12290;
&#25105;&#20204;&#31967;&#31957;&#30340;&#35774;&#35745;&#36873;&#25321;&#20043;&#19968;&#26159;&#22312;&#28210;&#26579;&#20195;&#30721;&#20013;&#29992;&#20110;&#26631;&#35782;&#34920;&#21333;&#20803;&#32032;&#30340;&#21517;&#31216;&#19982;&#22312;&#25552;&#21462;&#20195;&#30721;&#20013;&#20351;&#29992;&#30340;&#21517;&#31216;&#20043;&#38388;&#24314;&#31435;&#20102;&#26494;&#25955;&#30340;&#36830;&#25509;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: blog request -&gt; doesn't return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Send an HTML page of the content of the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fxexpr..rkt%2529._response%252Fxexpr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response/xexpr</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-post-handler</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">"title" is used here</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"title"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"body"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._request-bindings%29%29" class="RktValLink" data-pltdoc="x">request-bindings</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">And "title" is used here.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._extract-binding%2Fsingle%29%29" class="RktValLink" data-pltdoc="x">extract-binding/single</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._extract-binding%2Fsingle%29%29" class="RktValLink" data-pltdoc="x">extract-binding/single</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._redirect%2Fget%29%29" class="RktValLink" data-pltdoc="x">redirect/get</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=servlet.html%23%2528def._%2528%2528lib._web-server%252Fservlet%252Fweb..rkt%2529._send%252Fsuspend%252Fdispatch%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend/dispatch</a></span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">Racket Web &#26694;&#26550;&#25552;&#20379;&#20102; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlets</span></a> &#26469;&#25277;&#35937;&#36825;&#20123;&#21517;&#31216;,&#36890;&#36807;&#22312; HTML &#20013;&#33258;&#21160;&#35843;&#25972;&#36825;&#20123;&#21517;&#31216;,&#20197;&#21450;&#36890;&#36807;&#25552;&#20379;&#20197;&#19979;&#30028;&#38754;&#26469;&#26174;&#31034;&#21644;&#22788;&#29702;&#34920;&#21333;:
</div><div class="SIntrapara"><ul><li><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Flib..rkt%2529._formlet-display%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">formlet-display</a></span> &#33719;&#21462;&#19968;&#20010; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> &#24182;&#20197; X &#34920;&#36798;&#24335;&#21015;&#34920;&#30340;&#24418;&#24335;&#36820;&#22238;&#23427;&#30340;&#21576;&#29616;&#12290; &#36825;&#23558;&#20026;&#20854;&#34920;&#21333;&#20803;&#32032;&#29983;&#25104;&#21807;&#19968;&#30340;&#21517;&#31216;&#12290;</p></li><li><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Flib..rkt%2529._formlet-process%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">formlet-process</a></span> &#33719;&#21462;&#19968;&#20010; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> &#21644;&#19968;&#20010;&#35831;&#27714;&#24182;&#22788;&#29702; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a>,
&#21363;&#20351;&#29992;&#36890;&#36807; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Flib..rkt%2529._formlet-display%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">formlet-display</a></span> &#29983;&#25104;&#30340;&#21517;&#31216;&#20174;&#35831;&#27714;&#20013;&#25552;&#21462;&#32465;&#23450;&#12290;</p></li></ul></div></p><p>&#20351;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528form._%2528%2528lib._web-server%252Fformlets%252Fsyntax..rkt%2529._formlet%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">formlet</a></span> &#35821;&#27861;&#21019;&#24314; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> &#12290;
&#20363;&#22914;,&#19979;&#38754;&#26159;&#19968;&#20010; <span class="RktSym">render-blog-page</span> &#30340; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> :</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">new-post-formlet : formlet (values string? string?)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A formlet for requesting a title and body of a post</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">new-post-formlet</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528form._%2528%2528lib._web-server%252Fformlets%252Fsyntax..rkt%2529._formlet%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">formlet</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528form._%2528%2528lib._web-server%252Fformlets%252Fsyntax..rkt%2529._%7E23%7E25%7E23%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">#%#</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">{</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._input-string%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">input-string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._%7E3d%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">=&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="RktPn">}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">{</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._input-string%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">input-string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._%7E3d%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">=&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">}</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528form._%2528%2528lib._web-server%252Fformlets%252Fsyntax..rkt%2529._formlet%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">formlet</a></span> &#35821;&#27861;&#20013;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#20915;&#23450;&#20102; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Flib..rkt%2529._formlet-display%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">formlet-display</a></span> &#24212;&#35813;&#22914;&#20309;&#26174;&#31034; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> &#12290;
&#23427;&#26159;&#19968;&#20010;&#24102;&#24341;&#21495;&#30340; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> ,&#26377;&#20004;&#20010;&#37325;&#35201;&#30340;&#21306;&#21035;:
</div><div class="SIntrapara"><ul><li><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528form._%2528%2528lib._web-server%252Fformlets%252Fsyntax..rkt%2529._%7E23%7E25%7E23%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">#%#</a></span> &#24341;&#20837;&#20102;&#19968;&#20010; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528tech._x._expression%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">X-expression</span></a> &#30340;&#21015;&#34920;</p></li><li><p><span class="RktRdr">,</span><span class="RktPn">{</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._%7E3d%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">=&gt;</a></span><span class="stt"> </span><span class="RktVar">formlet</span><span class="stt"> </span><span class="RktVar">id</span><span class="RktPn">}</span> &#23558; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> <span class="RktVar">formlet</span> &#23884;&#20837;&#20026;&#19968;&#20010;&#23376; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> ,
  &#23427;&#23558;&#21517;&#31216; <span class="RktVar">id</span> &#38468;&#21152;&#21040;&#22788;&#29702;&#36825;&#20010;&#23376; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> &#30340;&#32467;&#26524;&#19978;&#12290;</p><p>&#20363;&#22914;, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._input-string%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">input-string</a></span> &#26412;&#36523;&#26159;&#19968;&#20010;&#24211;&#20013;&#30340; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> ,&#23427;&#20135;&#29983;&#20102;&#19968;&#20010;&#23383;&#31526;&#20018;,
  &#32780; <span class="RktRdr">,</span><span class="RktPn">{</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._%7E3d%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">=&gt;</a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._input-string%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">input-string</a></span><span class="stt"> </span><span class="RktSym">title</span><span class="RktPn">}</span> &#23558; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._input-string%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">input-string</a></span> &#23884;&#20837;&#21040; <span class="RktSym">new-post-formlet</span> &#20013;,
  &#24182;&#23558;&#21517;&#31216; <span class="RktSym">title</span> &#20851;&#32852;&#21040;&#35813;&#23383;&#31526;&#20018;&#12290;</p><p><div class="SIntrapara"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._input-string%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">input-string</a></span> &#34987;&#28210;&#26579;&#25104; <span class="RktRes">`(input<span class="stt"> </span>([type<span class="stt"> </span>"text"]<span class="stt"> </span>[name<span class="stt"> </span>,fresh_name]))</span>,
  &#25152;&#20197; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Flib..rkt%2529._formlet-display%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">formlet-display</a></span><span class="stt"> </span><span class="RktSym">new-post-formlet</span><span class="RktPn">)</span> &#34987;&#28210;&#26579;&#25104;:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">list</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">'</span><span class="RktRes">(</span><span class="RktRes">input</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">[</span><span class="RktRes">type</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"text"</span><span class="RktRes">]</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">[</span><span class="RktRes">name</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"input_0"</span><span class="RktRes">]</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">'</span><span class="RktRes">(</span><span class="RktRes">input</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">[</span><span class="RktRes">type</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"text"</span><span class="RktRes">]</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">[</span><span class="RktRes">name</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"input_1"</span><span class="RktRes">]</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr></table></div></p></li></ul></div></p><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528form._%2528%2528lib._web-server%252Fformlets%252Fsyntax..rkt%2529._formlet%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">formlet</a></span> &#30340;&#31532;&#20108;&#20010;&#21442;&#25968;&#20915;&#23450;&#20102; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Flib..rkt%2529._formlet-process%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">formlet-process</a></span> &#24212;&#35813;&#22914;&#20309;&#22788;&#29702;&#36825;&#20010; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> &#12290;
 &#20063;&#23601;&#26159;&#35828;,&#23427;&#25351;&#23450;&#20102;&#22914;&#20309;&#20998;&#32452;&#21644;&#25490;&#24207;&#22788;&#29702; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> &#30340;&#23376; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> &#30340;&#32467;&#26524;:
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._%7E3d%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">=&gt;</a></span> &#21491;&#36793;&#30340;&#26631;&#35782;&#31526;&#34987;&#32465;&#23450;&#21040;&#22788;&#29702;&#23376; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlets</span></a> &#30340;&#32467;&#26524;&#12290;</p><p>&#20363;&#22914;, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._input-string%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">input-string</a></span> &#34987;&#22788;&#29702;&#20026;
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._extract-binding%2Fsingle%29%29" class="RktValLink" data-pltdoc="x">extract-binding/single</a></span><span class="stt"> </span><span class="RktVar">fresh_name</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._request-bindings%29%29" class="RktValLink" data-pltdoc="x">request-bindings</a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span><span class="RktPn">)</span> &#12290;
 &#22240;&#27492;,&#22914;&#26524; <span class="RktVar">request</span> &#23558; <span class="RktRes">"input_0"</span> &#32465;&#23450;&#21040; <span class="RktRes">"Title"</span> &#65292;
<span class="RktRes">"input_1"</span> &#32465;&#23450;&#21040; <span class="RktRes">"Body"</span>,
&#37027;&#20040; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Flib..rkt%2529._formlet-process%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">formlet-process</a></span><span class="stt"> </span><span class="RktSym">new-post-formlet</span><span class="stt"> </span><span class="RktVar">request</span><span class="RktPn">)</span> &#23558;&#36820;&#22238; <span class="RktRes">(values<span class="stt"> </span>"Title"<span class="stt"> </span>"Body")</span> &#12290;</p><p><div class="SIntrapara">&#26368;&#21518;,&#36825;&#37324;&#26159;&#22914;&#20309;&#22312; <span class="RktSym">render-blog-page</span> &#20013;&#20351;&#29992; <span class="RktSym">new-post-formlet</span> :
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: blog request -&gt; doesn't return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Sends an HTML page of the content of the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fxexpr..rkt%2529._response%252Fxexpr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response/xexpr</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-post-handler</span><span class="RktPn">)</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Flib..rkt%2529._formlet-display%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">formlet-display</a></span><span class="hspace">&nbsp;</span><span class="RktSym">new-post-formlet</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">]</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Flib..rkt%2529._formlet-process%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">formlet-process</a></span><span class="hspace">&nbsp;</span><span class="RktSym">new-post-formlet</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fservlet..rkt%29._redirect%2Fget%29%29" class="RktValLink" data-pltdoc="x">redirect/get</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=servlet.html%23%2528def._%2528%2528lib._web-server%252Fservlet%252Fweb..rkt%2529._send%252Fsuspend%252Fdispatch%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">send/suspend/dispatch</a></span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><span style="font-weight: bold">&#26367;&#20195;&#26041;&#24335;.</span> &#19978;&#38754;&#26174;&#31034;&#30340; formlet &#20351;&#29992;&#20102; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._input-string%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">input-string</a></span> &#32452;&#21512;&#22120;,&#23427;&#23558;&#19968;&#22534;&#20854;&#20182; formlet &#32452;&#21512;&#25104;&#19968;&#20010;&#24102;&#26377;&#40664;&#35748;&#20540;&#30340;&#23481;&#22120;&#12290;
&#26377;&#26102;&#23427;&#26159;&#26377;&#29992;&#30340;,&#25286;&#20998;,&#20197;&#25552;&#20379;&#19981;&#21516;&#30340;&#21442;&#25968;&#30340;&#23376;&#20214;&#12290; &#20363;&#22914;,&#20551;&#35774;&#25105;&#20204;&#35201;&#21521;&#34920;&#21333;&#20803;&#32032;&#28155;&#21152;&#19968;&#20010; CSS &#31867;?
&#19979;&#38754;&#26159;&#25105;&#20204;&#22914;&#20309;&#20570;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">new-post-formlet</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528form._%2528%2528lib._web-server%252Fformlets%252Fsyntax..rkt%2529._formlet%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">formlet</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528form._%2528%2528lib._web-server%252Fformlets%252Fsyntax..rkt%2529._%7E23%7E25%7E23%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">#%#</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._to-string%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">to-string</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._required%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">required</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._text-input%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">text-input</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:attributes</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"form-text"</span><span class="RktVal">]</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._%7E3d%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">=&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._to-string%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">to-string</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._required%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">required</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528def._%2528%2528lib._web-server%252Fformlets%252Finput..rkt%2529._text-input%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">text-input</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:attributes</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"form-text"</span><span class="RktVal">]</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._%7E3d%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">=&gt;</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><span style="font-weight: bold">&#32451;&#20064;.</span> &#32534;&#20889;&#19968;&#20010; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=formlets.html%23%2528tech._formlet%2529&amp;version=8.9" class="techoutside Sq" data-pltdoc="x"><span class="techinside">formlet</span></a> ,&#24182;&#22312; <span class="RktSym">render-post-detail-page</span> &#20013;&#20351;&#29992;&#23427;&#12290;</p><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p>&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#29616;&#22312;&#26159;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktSym">web-server/formlets</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"model-3.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start: request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a request and produces a page that displays</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">all of the web content.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-blog!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">build-path</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-directory</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"the-blog-data.sqlite"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">new-post-formlet : formlet (values string? string?)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A formlet for requesting a title and body of a post</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">new-post-formlet</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">formlet</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">#%#</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">{</span><span class="RktSym">input-string</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">=&gt;</span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="RktPn">}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">{</span><span class="RktSym">input-string</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">=&gt;</span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">}</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">values</span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-blog-page: blog request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Produces an HTML page of the content of the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Blog"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-post-handler</span><span class="RktPn">)</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">formlet-display</span><span class="hspace">&nbsp;</span><span class="RktSym">new-post-formlet</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">]</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define-values</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">formlet-process</span><span class="hspace">&nbsp;</span><span class="RktSym">new-post-formlet</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-insert-post!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">title</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">redirect/get</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">new-comment-formlet : formlet string</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A formlet for requesting a comment</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">new-comment-formlet</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">input-string</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post-detail-page: post request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post and produces a detail page of the post.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The user will be able to either insert new comments</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">or go back to render-blog-page.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Post Details"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h2</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">action</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">insert-comment-handler</span><span class="RktPn">)</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">formlet-display</span><span class="hspace">&nbsp;</span><span class="RktSym">new-comment-formlet</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">]</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">back-handler</span><span class="RktPn">)</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Back to the blog"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-comment-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-confirm-add-comment-page</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-blog</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">formlet-process</span><span class="hspace">&nbsp;</span><span class="RktSym">new-comment-formlet</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">back-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-blog-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-confirm-add-comment-page :</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">blog comment post request -&gt; doesn</span><span class="RktCmt">'</span><span class="RktCmt">t return</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a comment that we intend to add to a post, as well</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as the request. If the user follows through, adds a comment </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and goes back to the display page. Otherwise, goes back to </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the detail page of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-confirm-add-comment-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response-generator</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Add a Comment"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Add a Comment"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"The comment: "</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-comment</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"will be added to "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">yes-handler</span><span class="RktPn">)</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Yes, add the comment."</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">cancel-handler</span><span class="RktPn">)</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"No, I changed my mind!"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">yes-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-insert-comment!</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-comment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">redirect/get</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cancel-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend/dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">response-generator</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-post: post (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a post, produces an xexpr fragment of the post.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The fragment contains a link to show a detailed view of the post.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">view-post-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post-detail-page</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"post"</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">view-post-handler</span><span class="RktPn">)</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-title</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">post-body</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">post-comments</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">" comment(s)"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-posts: blog (handler -&gt; string) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a embed/url, produces an xexpr fragment</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of all its posts.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-post</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="hspace">&nbsp;</span><span class="RktSym">a-post</span><span class="hspace">&nbsp;</span><span class="RktSym">embed/url</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">class</span><span class="hspace">&nbsp;</span><span class="RktVal">"posts"</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-post/embed/url</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">blog-posts</span><span class="hspace">&nbsp;</span><span class="RktSym">a-blog</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-itemized-list: (listof xexpr) -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes a list of items, and produces a rendering as</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">an unorderered list.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-itemized-list</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">ul</span><span class="hspace">&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">fragments</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render-as-item: xexpr -&gt; xexpr</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Consumes an xexpr, and produces a rendering</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as a list item.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">render-as-item</span><span class="hspace">&nbsp;</span><span class="RktSym">a-fragment</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">li</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">a-fragment</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;离开_DrRacket&quot;">17<tt>&nbsp;</tt><a name="(part._~e7~a6~bb~e5~bc~80_.Dr.Racket)"></a>&#31163;&#24320; DrRacket</h3><p>&#25105;&#20204;&#20064;&#24815;&#25353;&#19979; <span class="ssansserif">Run</span> &#25353;&#38062;&#22312; DrRacket &#20013;&#36816;&#34892;&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#12290;
&#20294;&#26159;,&#22914;&#26524;&#25105;&#20204;&#23454;&#38469;&#37096;&#32626;&#19968;&#20010;&#24212;&#29992;&#31243;&#24207;,&#25105;&#20204;&#38656;&#35201;&#36890;&#36807;&#19968;&#31181;&#19981;&#21516;&#30340;&#26041;&#27861;&#21551;&#21160;&#23427;&#12290;</p><p><div class="SIntrapara">&#26368;&#31616;&#21333;&#30340;&#36873;&#25321;&#26159;&#20351;&#29992; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Fservlet-env%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/servlet-env</span></a> &#12290;&#39318;&#20808;,&#26356;&#25913;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;&#31532;&#19968;&#34892;
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528mod-path._web-server%252Finsta%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">web-server/insta</span></a></p></blockquote></div></p><p><div class="SIntrapara">&#20026;
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">web-server/servlet</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=attaching-contracts-to-values.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fprovide..rkt%2529._provide%252Fcontract%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">provide/contract</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">request?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Fresponse-structs..rkt%2529._response%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">response?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>&#31532;&#20108;,&#22312;&#24212;&#29992;&#31243;&#24207;&#30340;&#24213;&#37096;&#28155;&#21152;&#20197;&#19979;&#20869;&#23481;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">web-server/servlet-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528def._%2528%2528lib._web-server%252Fservlet-env..rkt%2529._serve%252Fservlet%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">serve/servlet</a></span><span class="hspace">&nbsp;</span><span class="RktSym">start</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:launch-browser?</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:quit?</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:listen-ip</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:port</span><span class="hspace">&nbsp;</span><span class="RktVal">8000</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:extra-files-paths</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._build-path%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">build-path</a></span><span class="hspace">&nbsp;</span><span class="RktVar">your-path-here</span><span class="hspace">&nbsp;</span><span class="RktVal">"htdocs"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:servlet-path</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"/servlets/APPLICATION.rkt"</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">&#20851;&#20110; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528def._%2528%2528lib._web-server%252Fservlet-env..rkt%2529._serve%252Fservlet%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">serve/servlet</a></span> &#30340;&#21442;&#25968;:
</div><div class="SIntrapara"><ul><li><p>&#20320;&#21487;&#20197;&#26356;&#25913; <span class="RktPn">#:port</span> &#21442;&#25968;&#30340;&#20540;&#20197;&#20351;&#29992;&#20854;&#20182;&#31471;&#21475;&#12290;</p></li><li><p><span class="RktPn">#:listen-ip</span> &#35774;&#32622;&#20026; <span class="RktVal">#f</span> ,&#20197;&#20415;&#26381;&#21153;&#22120;&#23558;&#20390;&#21548; <span class="emph">&#25152;&#26377;</span> &#21487;&#29992;&#30340; IP&#12290;</p></li><li><p>&#20320;&#24212;&#35813;&#23558; <span class="RktVar">your-path-here</span> &#26356;&#25913;&#20026;&#20320;&#30340; <span class="RktSym">htdocs</span> &#30446;&#24405;&#30340;&#29238;&#30446;&#24405;&#30340;&#36335;&#24452;&#12290;</p></li><li><p>&#20320;&#24212;&#35813;&#23558; <span class="RktVal">"APPLICATION.rkt"</span> &#26356;&#25913;&#20026;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;&#21517;&#31216;&#12290;</p></li></ul></div></p><p>&#31532;&#19977;,&#35201;&#36816;&#34892;&#26381;&#21153;&#22120;,&#20320;&#21487;&#20197;&#25353; DrRacket &#20013;&#30340; <span class="ssansserif">Run</span> ,&#25110;&#38190;&#20837;</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">racket -t &lt;file.rkt&gt;</span></p><p>(&#20351;&#29992;&#20320;&#33258;&#24049;&#30340;&#25991;&#20214;&#21517;,&#24403;&#28982;)&#12290; &#36825;&#20004;&#20010;&#37117;&#23558;&#20026;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#21551;&#21160;&#19968;&#20010; Web &#26381;&#21153;&#22120;&#12290;
&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#23558;&#22312; <span class="RktSym">http://localhost:8000/servlets/APPLICATION.rkt</span><span class="RktMeta"></span> &#12290;</p><blockquote class="SCentered"><p>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr>&#8212;<wbr></wbr></p></blockquote><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528def._%2528%2528lib._web-server%252Fservlet-env..rkt%2529._serve%252Fservlet%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">serve/servlet</a></span> &#38656;&#35201;&#20854;&#20182;&#21442;&#25968;,&#36824;&#26377;&#26356;&#39640;&#32423;&#30340;&#21551;&#21160; Web &#26381;&#21153;&#22120;&#30340;&#26041;&#27861;,&#20294;&#26159;&#20320;&#24517;&#39035;&#21442;&#32771; Racket Web Server &#21442;&#32771;&#25163;&#20876;&#20102;&#35299;&#35814;&#32454;&#20449;&#24687;&#12290;</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;使用_HTTPS&quot;">18<tt>&nbsp;</tt><a name="(part._~e4~bd~bf~e7~94~a8_.H.T.T.P.S)"></a>&#20351;&#29992; HTTPS</h3><p>&#26368;&#21518;,&#36825;&#37324;&#26159;&#22312; HTTPS &#27169;&#24335;&#19979;&#20351;&#29992;&#26381;&#21153;&#22120;&#30340;&#35828;&#26126;&#12290; &#36825;&#38656;&#35201; SSL &#35777;&#20070;&#21644;&#31169;&#38053;&#12290;
&#23427;&#20063;&#38750;&#24120;&#38024;&#23545;&#29305;&#23450;&#24179;&#21488;,&#20294;&#26159;&#36825;&#37324;&#26159;&#22312; UNIX &#19978;&#20351;&#29992; OpenSSL &#30340;&#35814;&#32454;&#20449;&#24687;:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">openssl genrsa -des3 -out private-key.pem 1024</span></p><p>&#36825;&#23558;&#29983;&#25104;&#19968;&#20010;&#26032;&#30340;&#31169;&#38053;,&#20294;&#24102;&#26377;&#23494;&#30721;,&#20320;&#21487;&#20197;&#21024;&#38500;&#22914;&#19979;:</p><p><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">openssl rsa -in private-key.pem -out private-key.pem</span></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">chmod 400 private-key.pem</span></div></p><p>&#29616;&#22312;&#25105;&#20204;&#29983;&#25104;&#19968;&#20010;&#33258;&#31614;&#21517;&#35777;&#20070;:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">openssl req -new -x509 -nodes -sha1 -days 365 -key private-key.pem &gt; server-cert.pem</span></p><p>(&#27599;&#20010;&#35777;&#20070;&#39041;&#21457;&#26426;&#26500;&#37117;&#26377;&#19981;&#21516;&#30340;&#29983;&#25104;&#35777;&#20070;&#31614;&#21517;&#35831;&#27714;&#30340;&#26041;&#24335;&#12290;)</p><p>&#25105;&#20204;&#29616;&#22312;&#21487;&#20197;&#21551;&#21160;&#26381;&#21153;&#22120;:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">plt-web-server --ssl</span></p><p>&#26381;&#21153;&#22120;&#23558;&#20351;&#29992;&#25105;&#20204;&#21019;&#24314;&#30340; <span class="stt">"private-key.pem"</span> &#21644; <span class="stt">"server-cert.pem"</span>
&#22312;&#31471;&#21475; 443(&#21487;&#20197;&#20351;&#29992; <span class="stt">-p</span> &#36873;&#39033;&#35206;&#30422;)&#19978;&#21551;&#21160;&#12290;</p><h3 x-source-module="(lib &quot;web-server/scribblings/tutorial/continue.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;向前迈进&quot;">19<tt>&nbsp;</tt><a name="(part._~e5~90~91~e5~89~8d~e8~bf~88~e8~bf~9b)"></a>&#21521;&#21069;&#36808;&#36827;</h3><p>&#38543;&#30528;&#20320;&#20351;&#29992;&#33258;&#24049;&#30340;&#24212;&#29992;&#31243;&#24207;,&#20320;&#21487;&#33021;&#20250;&#21457;&#29616;&#35768;&#22810;&#20854;&#20182;&#21253;&#26377;&#29992;&#12290;
&#26377;&#19982;&#20854;&#20182;&#25968;&#25454;&#24211;&#30340;&#25509;&#21475;,&#35768;&#22810;&#24037;&#20855;&#29992;&#20110;&#29983;&#25104; HTML,XML,JavaScript &#31561;&#30340;&#36755;&#20986;&#12290;
&#26377;&#20851;&#27880;&#20876;&#21253;&#30340;&#21015;&#34920;,&#35831;&#21442;&#38405; <a href="https://pkgs.racket-lang.org/"><span class="url">https://pkgs.racket-lang.org/</span></a> &#12290;</p><p>&#22312; Racket &#37038;&#20214;&#21015;&#34920;&#19978;&#36824;&#26377;&#19968;&#20010;&#27963;&#36291;&#30340;&#29992;&#25143;&#31038;&#21306;&#12290; &#25105;&#20204;&#27426;&#36814;&#26032;&#29992;&#25143;!</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.9&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>