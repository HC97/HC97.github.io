<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>更多: 用 Racket 进行系统编程</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">更多:<span class="mywbr"> &nbsp;</span> &#29992; Racket &#36827;&#34892;&#31995;&#32479;&#32534;&#31243;</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._ready%29" class="tocviewlink" data-pltdoc="x">&#20934;&#22791;&#23601;&#32490;...</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._set%29" class="tocviewlink" data-pltdoc="x">&#35774;&#32622;...</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._go%29" class="tocviewlink" data-pltdoc="x">&#34892;&#21160;!</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part.__.Hello_.World__~e6~9c~8d~e5~8a~a1~e5~99~a8%29" class="tocviewlink" data-pltdoc="x">&ldquo;Hello World&rdquo; &#26381;&#21153;&#22120;</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._~e6~9c~8d~e5~8a~a1~e5~99~a8~e7~ba~bf~e7~a8~8b%29" class="tocviewlink" data-pltdoc="x">&#26381;&#21153;&#22120;&#32447;&#31243;</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._~e8~bf~9e~e6~8e~a5~e7~ba~bf~e7~a8~8b%29" class="tocviewlink" data-pltdoc="x">&#36830;&#25509;&#32447;&#31243;</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._~e7~bb~88~e6~ad~a2~e8~bf~9e~e6~8e~a5%29" class="tocviewlink" data-pltdoc="x">&#32456;&#27490;&#36830;&#25509;</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="#%28part._~e8~b0~83~e5~ba~a6%29" class="tocviewlink" data-pltdoc="x">&#35843;&#24230;</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="#%28part._~e5~b0~8f~e7~a8~8b~e5~ba~8f~e5~92~8c~e4~bc~9a~e8~af~9d%29" class="tocviewlink" data-pltdoc="x">&#23567;&#31243;&#24207;&#21644;&#20250;&#35805;</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="#%28part._~e9~99~90~e5~88~b6~e5~86~85~e5~ad~98~e7~9a~84~e4~bd~bf~e7~94~a8%29" class="tocviewlink" data-pltdoc="x">&#38480;&#21046;&#20869;&#23384;&#30340;&#20351;&#29992;</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="#%28part._~e5~bb~b6~e7~bb~ad%29" class="tocviewlink" data-pltdoc="x">&#24310;&#32493;</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="#%28part._~e4~bd~95~e5~8e~bb~e4~bd~95~e4~bb~8e%29" class="tocviewlink" data-pltdoc="x">&#20309;&#21435;&#20309;&#20174;</a></td></tr><tr><td align="right"></td><td><a href="#%28part._doc-bibliography%29" class="tocviewlink" data-pltdoc="x">Bibliography</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">更多:<span class="mywbr"> &nbsp;</span> &#29992; Racket &#36827;&#34892;&#31995;&#32479;&#32534;&#31243;</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._ready%29" class="tocsubseclink" data-pltdoc="x">&#20934;&#22791;&#23601;&#32490;...</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._set%29" class="tocsubseclink" data-pltdoc="x">&#35774;&#32622;...</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._go%29" class="tocsubseclink" data-pltdoc="x">&#34892;&#21160;!</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part.__.Hello_.World__~e6~9c~8d~e5~8a~a1~e5~99~a8%29" class="tocsubseclink" data-pltdoc="x">&ldquo;Hello World&rdquo; &#26381;&#21153;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._~e6~9c~8d~e5~8a~a1~e5~99~a8~e7~ba~bf~e7~a8~8b%29" class="tocsubseclink" data-pltdoc="x">&#26381;&#21153;&#22120;&#32447;&#31243;</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._~e8~bf~9e~e6~8e~a5~e7~ba~bf~e7~a8~8b%29" class="tocsubseclink" data-pltdoc="x">&#36830;&#25509;&#32447;&#31243;</a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._~e7~bb~88~e6~ad~a2~e8~bf~9e~e6~8e~a5%29" class="tocsubseclink" data-pltdoc="x">&#32456;&#27490;&#36830;&#25509;</a></td></tr><tr><td><span class="tocsublinknumber">8<tt>&nbsp;</tt></span><a href="#%28part._~e8~b0~83~e5~ba~a6%29" class="tocsubseclink" data-pltdoc="x">&#35843;&#24230;</a></td></tr><tr><td><span class="tocsublinknumber">9<tt>&nbsp;</tt></span><a href="#%28part._~e5~b0~8f~e7~a8~8b~e5~ba~8f~e5~92~8c~e4~bc~9a~e8~af~9d%29" class="tocsubseclink" data-pltdoc="x">&#23567;&#31243;&#24207;&#21644;&#20250;&#35805;</a></td></tr><tr><td><span class="tocsublinknumber">10<tt>&nbsp;</tt></span><a href="#%28part._~e9~99~90~e5~88~b6~e5~86~85~e5~ad~98~e7~9a~84~e4~bd~bf~e7~94~a8%29" class="tocsubseclink" data-pltdoc="x">&#38480;&#21046;&#20869;&#23384;&#30340;&#20351;&#29992;</a></td></tr><tr><td><span class="tocsublinknumber">11<tt>&nbsp;</tt></span><a href="#%28part._~e5~bb~b6~e7~bb~ad%29" class="tocsubseclink" data-pltdoc="x">&#24310;&#32493;</a></td></tr><tr><td><span class="tocsublinknumber">12<tt>&nbsp;</tt></span><a href="#%28part._~e4~bd~95~e5~8e~bb~e4~bd~95~e4~bb~8e%29" class="tocsubseclink" data-pltdoc="x">&#20309;&#21435;&#20309;&#20174;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._doc-bibliography%29" class="tocsubseclink" data-pltdoc="x">Bibliography</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.9</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.9&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._~e6~9b~b4~e5~a4~9a__~e7~94~a8_.Racket_~e8~bf~9b~e8~a1~8c~e7~b3~bb~e7~bb~9f~e7~bc~96~e7~a8~8b)"></a>&#26356;&#22810;: &#29992; Racket &#36827;&#34892;&#31995;&#32479;&#32534;&#31243;</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Matthew Flatt</p></span></div><p>&#19982; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?tag=%28part._%28.%27%28lib._scribblings%2Fquick%2Fquick..scrbl%29.%27._.%27top.%27%29%29&amp;version=8.9" class="Sq" data-pltdoc="x">Quick: An Introduction to Racket with Pictures</a> &#21487;&#33021;&#32473;&#20154;&#30340;&#21360;&#35937;&#19981;&#21516;,Racket &#24182;&#19981;&#21482;&#26159;&#21478;&#19968;&#24352;&#28418;&#20142;&#30340;&#33080;&#12290;
 &#22312; DrRacket &#30340;&#22270;&#24418;&#30028;&#38754;&#19979;,&#26377;&#19968;&#20010;&#22797;&#26434;&#30340;&#24037;&#20855;&#31665;&#26469;&#31649;&#29702;&#32447;&#31243;&#21644;&#36827;&#31243;,&#36825;&#23601;&#26159;&#26412;&#25945;&#31243;&#30340;&#20027;&#39064;&#12290;</p><p>&#20855;&#20307;&#26469;&#35828;,&#25105;&#20204;&#23558;&#23637;&#31034;&#22914;&#20309;&#24314;&#31435;&#19968;&#20010;&#23433;&#20840;&#30340;&#12289;&#22810;&#32447;&#31243;&#30340;&#12289;&#21487;&#25193;&#23637;&#30340;&#12289;&#22522;&#20110;&#24310;&#32493;&#30340;&#32593;&#32476;&#26381;&#21153;&#22120;&#12290;
 &#25105;&#20204;&#20351;&#29992;&#30340;&#35821;&#35328;&#27604; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?tag=%28part._%28.%27%28lib._scribblings%2Fquick%2Fquick..scrbl%29.%27._.%27top.%27%29%29&amp;version=8.9" class="Sq" data-pltdoc="x">Quick: An Introduction to Racket with Pictures</a> &#20013;&#35201;&#22810;&#24471;&#22810;,
&#25105;&#20204;&#24076;&#26395;&#20320;&#33021;&#28857;&#20987;&#20320;&#19981;&#35748;&#35782;&#30340;&#35821;&#27861;&#25110;&#20989;&#25968;&#21517;&#31216;(&#36825;&#23558;&#24102;&#20320;&#21040;&#30456;&#20851;&#30340;&#25991;&#26723;)&#12290;
 &#35831;&#27880;&#24847;,&#26368;&#21518;&#20960;&#33410;&#20171;&#32461;&#30340;&#26448;&#26009;&#36890;&#24120;&#34987;&#35748;&#20026;&#26159;&#22256;&#38590;&#30340;&#12290;
&#22914;&#26524;&#20320;&#36824;&#26159; Racket &#30340;&#26032;&#25163;,&#24182;&#19988;&#26377;&#30456;&#23545;&#36739;&#23569;&#30340;&#32534;&#31243;&#32463;&#39564;,&#20320;&#21487;&#33021;&#24819;&#36339;&#21040; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=index.html&amp;version=8.9" class="Sq" data-pltdoc="x">Racket &#25351;&#21335;</a> &#12290;</p><p>&#20026;&#20102;&#36827;&#20837;&#26412;&#25945;&#31243;&#30340;&#31934;&#31070;,&#25105;&#20204;&#24314;&#35758;&#20320;&#20808;&#25226; DrRacket &#25918;&#22312;&#19968;&#36793;,&#28982;&#21518;&#22312;&#32456;&#31471;&#20013;&#20999;&#25442;&#21040; raw <span class="stt">racket</span> &#12290;
<span class="refelem"><span class="refcolumn"><span class="refcontent">&#22914;&#26524;&#20320;&#24050;&#32463;&#34987;&#23456;&#22351;&#20102;,&#20320;&#21487;&#20197;&#32487;&#32493;&#20351;&#29992; DrRacket&#12290;
&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;,&#36339;&#36807; <a href="#%28part._ready%29" data-pltdoc="x">&#20934;&#22791;&#23601;&#32490;...</a>,
&#22312; DrRacket &#30340;&#23450;&#20041;&#31383;&#21475;&#32780;&#19981;&#26159; <a href="#%28part._set%29" data-pltdoc="x">&#35774;&#32622;...</a> &#20013;&#25551;&#36848;&#30340; <span class="stt">"serve.rkt"</span> &#25991;&#20214;&#20013;&#24314;&#31435;&#31243;&#24207;,
&#24182;&#28857;&#20987; <span class="ssansserif">Run</span> &#25353;&#38062;&#32780;&#19981;&#26159; <a href="#%28part._go%29" data-pltdoc="x">&#34892;&#21160;!</a> &#20013;&#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=interactive.html%23%2528form._%2528%2528lib._racket%252Fenter..rkt%2529._enter%2521%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">enter!</a></span> &#12290;</span></span></span>
&#20320;&#36824;&#38656;&#35201;&#19968;&#20010;&#25991;&#26412;&#32534;&#36753;&#22120;,&#22914; Emacs&#12289;vi &#25110;&#29978;&#33267;&#35760;&#20107;&#26412;&ndash;&#20219;&#20309;&#32534;&#36753;&#22120;&#37117;&#21487;&#20197;,&#20294;&#25903;&#25345;&#23567;&#25324;&#21495;&#21305;&#37197;&#30340;&#32534;&#36753;&#22120;&#20250;&#26377;&#24110;&#21161;&#12290;
&#26368;&#21518;,&#20320;&#38656;&#35201;&#19968;&#20010;&#32593;&#32476;&#23458;&#25143;&#31471;,&#20063;&#35768;&#26159; Lynx &#25110; Firefox&#12290;</p><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;ready&quot;">1<tt>&nbsp;</tt><a name="(part._ready)"></a>&#20934;&#22791;&#23601;&#32490;...</h3><p><a href="http://download.racket-lang.org/">Download Racket</a>, &#23433;&#35013;,&#28982;&#21518;&#22312;&#27809;&#26377;&#21629;&#20196;&#34892;&#21442;&#25968;&#30340;&#24773;&#20917;&#19979;&#21551;&#21160; <span class="stt">racket</span> :</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ racket</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">Welcome to Racket v8.9 [cs].</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt;</span></p></td></tr></table></p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>&#35774;&#32622;&#20320;&#30340; <span class="stt">PATH</span> &#29615;&#22659;&#21464;&#37327;,&#36825;&#26679;&#20320;&#23601;&#21487;&#20197;&#20351;&#29992; <span class="stt">raco</span> &#21644;&#20854;&#20182; Racket &#21629;&#20196;&#34892;&#21151;&#33021;&#12290;
 &#22312; Mac OS &#19978;:
 <span class="stt">sudo sh -c </span>'<span class="stt">echo "/Applications/Racket v</span><span class="stt">8.9</span><span class="stt">/bin"</span><span class="stt">
</span><span class="stt">&gt;&gt; /etc/paths.d/racket</span>' (&#20551;&#35774;&#20320;&#24050;&#32463;&#25226; Racket &#23433;&#35013;&#22312; <span class="stt">"Applications"</span> &#25991;&#20214;&#22841;&#19979;)&#12290;
&#22312; Windows &#19978;:&#23558; Racket &#30340;&#23433;&#35013;&#36335;&#24452;&#28155;&#21152;&#21040; <span class="ssansserif">Environment Variables</span> &#30340; <span class="ssansserif">Path</span> &#20013;
 (&#22312; <span class="ssansserif">System Properties</span>, <span class="ssansserif">Advanced</span> &#19979;)&#12290;</p></blockquote></blockquote></blockquote><p>&#20551;&#35774;&#20320;&#23433;&#35013;&#20102; Editline,
<span class="refelem"><span class="refcolumn"><span class="refcontent">&#35201;&#20351;&#29992; GNU Readline &#32780;&#19981;&#26159; Editline,&#35831;&#35774;&#32622; <span class="stt">PLT_READLINE_LIB</span>
&#29615;&#22659;&#21464;&#37327;&#25110;&#23433;&#35013; <span class="stt">"readline-gpl"</span> &#36719;&#20214;&#21253;&#12290;</span></span></span>
<span class="stt">racket</span> &#40664;&#35748;&#25903;&#25345;&#34892;&#32534;&#36753;&#21644;&#36887;&#21495;&#20803;&#21629;&#20196;,&#25903;&#25345;&#25506;&#32034;&#21644;&#24320;&#21457;&#12290;
&#26356;&#22810;&#20449;&#24687;&#35265; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?tag=%28mod-path._.%27xrepl.%27%29&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">xrepl</span></a> &#12290;</p><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;set&quot;">2<tt>&nbsp;</tt><a name="(part._set)"></a>&#35774;&#32622;...</h3><p><div class="SIntrapara">&#22312;&#20320;&#21551;&#21160; <span class="stt">racket</span> &#30340;&#21516;&#19968;&#30446;&#24405;&#19979;,&#21019;&#24314;&#19968;&#20010;&#25991;&#26412;&#25991;&#20214; <span class="stt">"serve.rkt"</span>, &#24182;&#20687;&#36825;&#26679;&#21551;&#21160;&#23427;:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=Module-Syntax.html%23%2528part._hash-lang%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">go</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">yep-it-works</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Here&rsquo;s the whole program so far in plain text: <a href="step0.txt">step 0</a>.</p></blockquote></blockquote></blockquote><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;go&quot;">3<tt>&nbsp;</tt><a name="(part._go)"></a>&#34892;&#21160;!</h3><p>&#22238;&#21040; <span class="stt">racket</span> &#20013;,&#35797;&#30528;&#21152;&#36733;&#35813;&#25991;&#20214;&#24182;&#36816;&#34892; <span class="RktSym">go</span>:</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>If you use <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xrepl&amp;rel=index.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">xrepl</span></a>, you can use
<a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xrepl&amp;rel=index.html%23%2528xrepl._enter%2529&amp;version=8.9" class="plainlink Sq" data-pltdoc="x"><span class="RktInBG"><span class="hspace"></span><span class="RktIn">,enter serve.rkt</span><span class="hspace"></span></span></a>.</p></blockquote></blockquote></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=interactive.html%23%2528form._%2528%2528lib._racket%252Fenter..rkt%2529._enter%2521%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">enter!</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"serve.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;</span><span class="RktErr">[loading serve.rkt]</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">go</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'yep-it-works</span></p></td></tr></table></blockquote><p>&#35797;&#30528;&#20462;&#25913; <span class="stt">"serve.rkt"</span>, &#28982;&#21518;&#20877;&#27425;&#36816;&#34892; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=interactive.html%23%2528form._%2528%2528lib._racket%252Fenter..rkt%2529._enter%2521%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">enter!</a></span><span class="stt"> </span><span class="RktVal">"serve.rkt"</span><span class="RktPn">)</span> ,&#37325;&#26032;&#21152;&#36733;&#27169;&#22359;,&#28982;&#21518;&#26816;&#26597;&#20320;&#30340;&#20462;&#25913;&#12290;</p><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;_Hello_World__服务器&quot;">4<tt>&nbsp;</tt><a name="(part.__.Hello_.World__~e6~9c~8d~e5~8a~a1~e5~99~a8)"></a>&ldquo;Hello World&rdquo; &#26381;&#21153;&#22120;</h3><p>&#25105;&#20204;&#23558;&#36890;&#36807;&#19968;&#20010; <span class="RktSym">serve</span> &#20989;&#25968;&#26469;&#23454;&#29616; Web &#26381;&#21153;&#22120;,&#35813;&#20989;&#25968;&#25509;&#25910;&#19968;&#20010;&#29992;&#20110;&#23458;&#25143;&#31471;&#36830;&#25509;&#30340; IP &#31471;&#21475;&#21495;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktSym">port-no</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#26381;&#21153;&#22120;&#36890;&#36807;&#19968;&#20010; <span style="font-style: italic">listener</span> &#25509;&#21463; TCP &#36830;&#25509;,&#25105;&#20204;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-listen%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-listen</a></span> &#21019;&#24314;&#36825;&#20010;&#30417;&#21548;&#22120;&#12290;
&#20026;&#20102;&#20351;&#20132;&#20114;&#24335;&#24320;&#21457;&#26356;&#23481;&#26131;,&#25105;&#20204;&#25552;&#20379; <span class="RktVal">#t</span> &#20316;&#20026; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-listen%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-listen</a></span> &#30340;&#31532;&#19977;&#20010;&#21442;&#25968;,
&#36825;&#35753;&#25105;&#20204;&#21487;&#20197;&#31435;&#21363;&#37325;&#26032;&#20351;&#29992;&#31471;&#21475;&#21495;,&#32780;&#19981;&#29992;&#31561;&#24453; TCP &#36229;&#26102;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktSym">port-no</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-listen%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-listen</a></span><span class="hspace">&nbsp;</span><span class="RktSym">port-no</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#26381;&#21153;&#22120;&#24517;&#39035;&#24490;&#29615;&#25509;&#21463;&#26469;&#33258;&#30417;&#21548;&#22120;&#30340;&#36830;&#25509;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktSym">port-no</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-listen%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-listen</a></span><span class="hspace">&nbsp;</span><span class="RktSym">port-no</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">accept-and-handle</span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#25105;&#20204;&#30340; <span class="RktSym">accept-and-handle</span> &#20989;&#25968;&#20351;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-accept%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-accept</a></span> &#25509;&#21463;&#19968;&#20010;&#36830;&#25509;,&#23427;&#36820;&#22238;&#20004;&#20010;&#20540;:
&#19968;&#20010;&#26159;&#26469;&#33258;&#23458;&#25143;&#31471;&#30340;&#36755;&#20837;&#27969;,&#21478;&#19968;&#20010;&#26159;&#36755;&#20986;&#21040;&#23458;&#25143;&#31471;&#30340;&#27969;&#12290;</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">accept-and-handle</span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-accept%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-accept</a></span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">handle</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._close-input-port%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">close-input-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._close-output-port%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">close-output-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#20026;&#20102;&#22788;&#29702;&#19968;&#20010;&#36830;&#25509;,&#29616;&#22312;,&#25105;&#20204;&#23558;&#35835;&#21462;&#24182;&#20002;&#24323;&#35831;&#27714;&#22836;,&#28982;&#21518;&#20889;&#19968;&#20010; "Hello, world!" &#32593;&#39029;&#20316;&#20026;&#32467;&#26524;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">handle</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Discard the request header (up to blank line):</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp-match%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">regexp-match</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#rx"(\r\n|^)\r\n"</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Send reply:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"HTTP/1.0 200 Okay\r\n"</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Server: k\r\nContent-Type: text/html\r\n\r\n"</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"&lt;html&gt;&lt;body&gt;Hello, world!&lt;/body&gt;&lt;/html&gt;"</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#27880;&#24847;, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp-match%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">regexp-match</a></span> &#30452;&#25509;&#22312;&#36755;&#20837;&#27969;&#19978;&#25805;&#20316;,&#36825;&#27604;&#40635;&#28902;&#22320;&#22788;&#29702;&#20010;&#21035;&#34892;&#35201;&#23481;&#26131;&#12290;</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Here&rsquo;s the whole program so far in plain text: <a href="step1.txt">step 1</a>.</p></blockquote></blockquote></blockquote><p>&#23558;&#19978;&#36848;&#19977;&#20010;&#23450;&#20041;&#8212;<wbr></wbr><span class="RktSym">serve</span>,
<span class="RktSym">accept-and-handle</span> &#21644; <span class="RktSym">handle</span>&#8212;<wbr></wbr>&#22797;&#21046;&#21040; <span class="stt">"serve.rkt"</span> &#20013;&#24182;&#37325;&#26032;&#21152;&#36733;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=interactive.html%23%2528form._%2528%2528lib._racket%252Fenter..rkt%2529._enter%2521%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">enter!</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"serve.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;</span><span class="RktErr">[re-loading serve.rkt]</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktVal">8080</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#29616;&#22312;&#23558;&#20320;&#30340;&#27983;&#35272;&#22120;&#25351;&#21521; <span class="stt">http://localhost:8080</span>
(&#20551;&#35774;&#20320;&#29992; <span class="RktVal">8080</span> &#20316;&#20026;&#31471;&#21475;&#21495;,&#24182;&#19988;&#27983;&#35272;&#22120;&#22312;&#21516;&#19968;&#21488;&#26426;&#22120;&#19978;&#36816;&#34892;),&#20197;&#25509;&#25910;&#26469;&#33258;&#20320;&#30340;&#32593;&#32476;&#26381;&#21153;&#22120;&#30340;&#21451;&#22909;&#38382;&#20505;&#12290;</p><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;服务器线程&quot;">5<tt>&nbsp;</tt><a name="(part._~e6~9c~8d~e5~8a~a1~e5~99~a8~e7~ba~bf~e7~a8~8b)"></a>&#26381;&#21153;&#22120;&#32447;&#31243;</h3><p>&#22312;&#25105;&#20204;&#33021;&#35753;&#32593;&#32476;&#26381;&#21153;&#22120;&#20197;&#26356;&#26377;&#36259;&#30340;&#26041;&#24335;&#20570;&#20986;&#21453;&#24212;&#20043;&#21069;,&#25105;&#20204;&#38656;&#35201;&#24471;&#21040; Racket &#30340;&#25552;&#31034;&#12290;
&#22312;&#32456;&#31471;&#31383;&#21475;&#20013;&#36755;&#20837; Ctl-C &#20250;&#20013;&#26029;&#26381;&#21153;&#22120;&#30340;&#24490;&#29615;:</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>&#22312; DrRacket &#20013;,&#19981;&#35201;&#36755;&#20837; Ctl-C,&#32780;&#26159;&#28857;&#20987;&#19968;&#27425; <span class="ssansserif">Stop</span> &#25353;&#38062;&#12290;</p></blockquote></blockquote></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktVal">8080</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">^Cuser break</span></p></td></tr><tr><td><span class="stt">&gt; </span></td></tr></table></blockquote><p>&#19981;&#24184;&#30340;&#26159;,&#25105;&#20204;&#29616;&#22312;&#19981;&#33021;&#29992;&#30456;&#21516;&#30340;&#31471;&#21475;&#21495;&#37325;&#26032;&#21551;&#21160;&#26381;&#21153;&#22120;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktVal">8080</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">tcp-listen: listen on 8080 failed (address already in use)</span></p></td></tr></table></blockquote><p>&#38382;&#39064;&#26159;,&#25105;&#20204;&#29992; <span class="RktSym">serve</span> &#21019;&#24314;&#30340;&#30417;&#21548;&#22120;&#20173;&#28982;&#22312;&#30417;&#21548;&#21407;&#26469;&#30340;&#31471;&#21475;&#21495;&#12290;</p><p>&#20026;&#20102;&#36991;&#20813;&#36825;&#20010;&#38382;&#39064;,&#35753;&#25105;&#20204;&#25226;&#30417;&#21548;&#22120;&#24490;&#29615;&#25918;&#22312;&#33258;&#24049;&#30340;&#32447;&#31243;&#20013;,&#24182;&#35753; <span class="RktSym">serve</span> &#31435;&#21363;&#36820;&#22238;&#12290;
 &#27492;&#22806;,&#25105;&#20204;&#23558;&#35753; <span class="RktSym">serve</span> &#36820;&#22238;&#19968;&#20010;&#20989;&#25968;,&#29992;&#26469;&#20851;&#38381;&#26381;&#21153;&#22120;&#32447;&#31243;&#21644; TCP &#30417;&#21548;&#22120;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktSym">port-no</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-listen%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-listen</a></span><span class="hspace">&nbsp;</span><span class="RktSym">port-no</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">accept-and-handle</span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._thread%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">thread</a></span><span class="hspace">&nbsp;</span><span class="RktSym">loop</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._kill-thread%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">kill-thread</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-close%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-close</a></span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Here&rsquo;s the whole program so far in plain text: <a href="step2.txt">step 2</a>.</p></blockquote></blockquote></blockquote><p>&#35797;&#35797;&#26032;&#30340;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=interactive.html%23%2528form._%2528%2528lib._racket%252Fenter..rkt%2529._enter%2521%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">enter!</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"serve.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;</span><span class="RktErr">[re-loading serve.rkt]</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktVal">8081</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#20320;&#30340;&#26381;&#21153;&#22120;&#29616;&#22312;&#24212;&#35813;&#23545; <span class="stt">http://localhost:8081</span>, &#20294;&#20320;&#21487;&#20197;&#38543;&#24515;&#25152;&#27442;&#22320;&#20851;&#38381;&#24182;&#37325;&#26032;&#21551;&#21160;&#21516;&#19968;&#31471;&#21475;&#21495;&#30340;&#26381;&#21153;&#22120;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">stop</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktVal">8081</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">stop</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktVal">8081</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">stop</span><span class="RktPn">)</span></td></tr></table></blockquote><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;连接线程&quot;">6<tt>&nbsp;</tt><a name="(part._~e8~bf~9e~e6~8e~a5~e7~ba~bf~e7~a8~8b)"></a>&#36830;&#25509;&#32447;&#31243;</h3><p>&#23601;&#20687;&#25105;&#20204;&#25226;&#20027;&#26381;&#21153;&#22120;&#24490;&#29615;&#25918;&#21040;&#21518;&#21488;&#32447;&#31243;&#20013;&#19968;&#26679;,&#25105;&#20204;&#21487;&#20197;&#25226;&#27599;&#20010;&#21333;&#29420;&#30340;&#36830;&#25509;&#25918;&#21040;&#33258;&#24049;&#30340;&#32447;&#31243;&#20013;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">accept-and-handle</span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-accept%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-accept</a></span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._thread%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">thread</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">handle</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._close-input-port%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">close-input-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._close-output-port%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">close-output-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Here&rsquo;s the whole program so far in plain text: <a href="step3.txt">step 3</a>.</p></blockquote></blockquote></blockquote><p>&#36890;&#36807;&#36825;&#19968;&#25913;&#21464;,&#25105;&#20204;&#30340;&#26381;&#21153;&#22120;&#29616;&#22312;&#21487;&#20197;&#21516;&#26102;&#22788;&#29702;&#22810;&#20010;&#32447;&#31243;&#12290;
&#28982;&#32780;,&#22788;&#29702;&#31243;&#24207;&#26159;&#22914;&#27492;&#20043;&#24555;,&#20197;&#33267;&#20110;&#36825;&#19968;&#20107;&#23454;&#23558;&#24456;&#38590;&#34987;&#21457;&#29616;,
&#25152;&#20197;&#35797;&#30528;&#22312;&#19978;&#38754;&#30340; <span class="RktSym">handle</span> &#35843;&#29992;&#20043;&#21069;&#25554;&#20837; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._sleep%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">sleep</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._random%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="stt"> </span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span> &#12290;
&#22914;&#26524;&#20320;&#22312;&#22823;&#33268;&#30456;&#21516;&#30340;&#26102;&#38388;&#20174;&#32593;&#32476;&#27983;&#35272;&#22120;&#36827;&#34892;&#22810;&#20010;&#36830;&#25509;,&#26377;&#20123;&#20250;&#24456;&#24555;&#36820;&#22238;,&#26377;&#20123;&#21017;&#38656;&#35201;&#38271;&#36798; 10 &#31186;&#12290;
&#38543;&#26426;&#30340;&#24310;&#36831;&#23558;&#19982;&#20320;&#24320;&#22987;&#36830;&#25509;&#30340;&#39034;&#24207;&#26080;&#20851;&#12290;</p><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;终止连接&quot;">7<tt>&nbsp;</tt><a name="(part._~e7~bb~88~e6~ad~a2~e8~bf~9e~e6~8e~a5)"></a>&#32456;&#27490;&#36830;&#25509;</h3><p>&#19968;&#20010;&#24694;&#24847;&#30340;&#23458;&#25143;&#31471;&#21487;&#20197;&#36830;&#25509;&#21040;&#25105;&#20204;&#30340; Web &#26381;&#21153;&#22120;,&#20294;&#19981;&#21457;&#36865; HTTP &#22836;,&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;,&#19968;&#20010;&#36830;&#25509;&#32447;&#31243;&#23558;&#27704;&#36828;&#31354;&#38386;,&#31561;&#24453;&#22836;&#30340;&#32467;&#26463;&#12290;
&#20026;&#20102;&#36991;&#20813;&#36825;&#31181;&#21487;&#33021;&#24615;,&#25105;&#20204;&#24819;&#20026;&#27599;&#20010;&#36830;&#25509;&#32447;&#31243;&#23454;&#29616;&#19968;&#20010;&#36229;&#26102;&#12290;</p><p>&#23454;&#29616;&#36229;&#26102;&#30340;&#19968;&#31181;&#26041;&#27861;&#26159;&#21019;&#24314;&#31532;&#20108;&#20010;&#32447;&#31243;,&#31561;&#24453; 10 &#31186;,&#28982;&#21518;&#26432;&#27515;&#35843;&#29992; <span class="RktSym">handle</span> &#30340;&#32447;&#31243;&#12290;
 &#22312; Racket &#20013;,&#32447;&#31243;&#26159;&#36275;&#22815;&#36731;&#37327;&#32423;&#30340;,&#36825;&#31181;&#35266;&#23519;&#32773;-&#32447;&#31243;&#30340;&#31574;&#30053;&#25928;&#26524;&#24456;&#22909;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">accept-and-handle</span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-accept%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-accept</a></span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._thread%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">thread</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">handle</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._close-input-port%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">close-input-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._close-output-port%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">close-output-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Watcher thread:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._thread%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">thread</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._sleep%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">sleep</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._kill-thread%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">kill-thread</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#31532;&#19968;&#27425;&#23581;&#35797;&#24182;&#19981;&#23436;&#20840;&#27491;&#30830;,&#22240;&#20026;&#24403;&#32447;&#31243;&#34987;&#26432;&#27515;&#26102;,&#23427;&#30340; <span class="RktSym">in</span> &#21644; <span class="RktSym">out</span> &#27969;&#20173;&#28982;&#24320;&#25918;&#12290;
 &#25105;&#20204;&#21487;&#20197;&#22312;&#35266;&#23519;&#32773;&#32447;&#31243;&#20013;&#28155;&#21152;&#20195;&#30721;&#26469;&#20851;&#38381;&#27969;&#24182;&#26432;&#27515;&#32447;&#31243;,&#20294; Racket &#25552;&#20379;&#20102;&#19968;&#31181;&#26356;&#36890;&#29992;&#30340;&#20851;&#38381;&#26426;&#21046;: <span style="font-style: italic">custodians</span> &#12290;
&#20445;&#31649;&#20154;&#26159;&#19968;&#31181;&#38500;&#20869;&#23384;&#20043;&#22806;&#30340;&#25152;&#26377;&#36164;&#28304;&#30340;&#23481;&#22120;,&#23427;&#25903;&#25345; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=custodians.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._custodian-shutdown-all%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">custodian-shutdown-all</a></span> &#30340;&#25805;&#20316;,
&#21487;&#20197;&#32456;&#27490;&#21644;&#20851;&#38381;&#23481;&#22120;&#20869;&#30340;&#25152;&#26377;&#36164;&#28304;,&#26080;&#35770;&#23427;&#20204;&#26159;&#32447;&#31243;&#12289;&#27969;&#36824;&#26159;&#20854;&#20182;&#31181;&#31867;&#30340;&#26377;&#38480;&#36164;&#28304;&#12290;</p><p>&#27599;&#24403;&#19968;&#20010;&#32447;&#31243;&#25110;&#27969;&#34987;&#21019;&#24314;,&#23427;&#23601;&#20250;&#34987;&#25918;&#20837;&#30001; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=custodians.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-custodian%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">current-custodian</a></span> &#21442;&#25968;&#20915;&#23450;&#30340;&#24403;&#21069;&#25176;&#31649;&#20154;&#20013;&#12290;
 &#20026;&#20102;&#25226;&#20851;&#20110;&#19968;&#20010;&#36830;&#25509;&#30340;&#25152;&#26377;&#19996;&#35199;&#37117;&#25918;&#21040;&#19968;&#20010;&#30417;&#25252;&#20154;&#20013;,
&#25105;&#20204;&#25226;&#25152;&#26377;&#30340;&#36164;&#28304;&#21019;&#24314;&#37117; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._parameterize%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">parameterize</a></span> ,&#20351;&#20854;&#36827;&#20837;&#19968;&#20010;&#26032;&#30340;&#30417;&#25252;&#20154;:</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>&#21442;&#35265; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=parameterize.html&amp;version=8.9" class="Sq" data-pltdoc="x">&#21160;&#24577;&#32465;&#23450;&#65306;<span class="RktSym"><span class="RktStxLink">parameterize</span></span></a> ,&#20102;&#35299;&#21442;&#25968;&#30340;&#20171;&#32461;&#12290;</p></blockquote></blockquote></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">accept-and-handle</span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cust</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=custodians.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-custodian%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">make-custodian</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._parameterize%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">parameterize</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=custodians.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-custodian%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">current-custodian</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cust</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-accept%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-accept</a></span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._thread%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">thread</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">handle</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._close-input-port%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">close-input-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._close-output-port%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">close-output-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Watcher thread:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._thread%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">thread</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._sleep%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">sleep</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=custodians.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._custodian-shutdown-all%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">custodian-shutdown-all</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cust</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#36890;&#36807;&#36825;&#20010;&#23454;&#29616;, <span class="RktSym">in</span>, <span class="RktSym">out</span> &#21644;&#35843;&#29992; <span class="RktSym">handle</span> &#30340;&#32447;&#31243;&#37117;&#23646;&#20110; <span class="RktSym">cust</span> &#12290;
&#27492;&#22806;,&#22914;&#26524;&#25105;&#20204;&#21518;&#26469;&#25913;&#21464; <span class="RktSym">handle</span> ,&#20363;&#22914;&#25171;&#24320;&#19968;&#20010;&#25991;&#20214;,
&#37027;&#20040;&#25991;&#20214;&#21477;&#26564;&#20063;&#23646;&#20110; <span class="RktSym">cust</span> ,&#25152;&#20197;&#24403; <span class="RktSym">cust</span> &#34987;&#20851;&#38381;&#26102;,&#23427;&#20204;&#23558;&#34987;&#21487;&#38752;&#22320;&#20851;&#38381;&#12290;</p><p>&#20107;&#23454;&#19978;,&#25913;&#21464; <span class="RktSym">serve</span> ,&#20351;&#20854;&#20063;&#20351;&#29992;&#19968;&#20010;&#25176;&#31649;&#20154;,&#26159;&#19968;&#20010;&#22909;&#20027;&#24847;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktSym">port-no</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">main-cust</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=custodians.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-custodian%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">make-custodian</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._parameterize%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">parameterize</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=custodians.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-custodian%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">current-custodian</a></span><span class="hspace">&nbsp;</span><span class="RktSym">main-cust</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-listen%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-listen</a></span><span class="hspace">&nbsp;</span><span class="RktSym">port-no</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">accept-and-handle</span><span class="hspace">&nbsp;</span><span class="RktSym">listener</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=threads.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._thread%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">thread</a></span><span class="hspace">&nbsp;</span><span class="RktSym">loop</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=custodians.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._custodian-shutdown-all%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">custodian-shutdown-all</a></span><span class="hspace">&nbsp;</span><span class="RktSym">main-cust</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#36825;&#26679;,&#22312; <span class="RktSym">serve</span> &#20013;&#21019;&#24314;&#30340; <span class="RktSym">main-cust</span> &#19981;&#20165;&#25317;&#26377; TCP &#30417;&#21548;&#22120;&#21644;&#20027;&#26381;&#21153;&#22120;&#32447;&#31243;,
&#23427;&#36824;&#25317;&#26377;&#20026;&#19968;&#20010;&#36830;&#25509;&#21019;&#24314;&#30340;&#27599;&#19968;&#20010; custodian&#12290;
 &#22240;&#27492;,&#20462;&#25913;&#21518;&#30340;&#26381;&#21153;&#22120;&#20851;&#26426;&#31243;&#24207;,&#38500;&#20102;&#20027;&#26381;&#21153;&#22120;&#24490;&#29615;&#22806;,&#36824;&#31435;&#21363;&#32456;&#27490;&#20102;&#25152;&#26377;&#27963;&#21160;&#30340;&#36830;&#25509;&#12290;</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Here&rsquo;s the whole program so far in plain text: <a href="step4.txt">step 4</a>.</p></blockquote></blockquote></blockquote><p>&#22914;&#19978;&#25152;&#36848;&#26356;&#26032;&#20102; <span class="RktSym">serve</span> &#21644; <span class="RktSym">accept-and-handle</span> &#20989;&#25968;&#21518;,&#36825;&#37324;&#26159;&#20320;&#22914;&#20309;&#27169;&#25311;&#19968;&#20010;&#24694;&#24847;&#30340;&#23458;&#25143;&#31471;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=interactive.html%23%2528form._%2528%2528lib._racket%252Fenter..rkt%2529._enter%2521%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">enter!</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"serve.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;</span><span class="RktErr">[re-loading serve.rkt]</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serve</span><span class="hspace">&nbsp;</span><span class="RktVal">8081</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cin</span><span class="hspace">&nbsp;</span><span class="RktSym">cout</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-connect%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-connect</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"localhost"</span><span class="hspace">&nbsp;</span><span class="RktVal">8081</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#29616;&#22312;&#31561;&#24453; 10 &#31186;&#12290;
&#22914;&#26524;&#20320;&#23581;&#35797;&#20174; <span class="RktSym">cin</span> &#20013;&#35835;&#21462;&#25968;&#25454;,&#20063;&#23601;&#26159;&#23558;&#25968;&#25454;&#20174;&#26381;&#21153;&#22120;&#36865;&#22238;&#23458;&#25143;&#31471;&#30340;&#27969;,&#20320;&#20250;&#21457;&#29616;&#26381;&#21153;&#22120;&#24050;&#32463;&#20851;&#38381;&#20102;&#36830;&#25509;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Byte_and_String_Input.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read-line%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">read-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cin</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#&lt;eof&gt;</span></p></td></tr></table></blockquote><p>&#21478;&#22806;,&#22914;&#26524;&#20320;&#26126;&#30830;&#22320;&#20851;&#38381;&#20102;&#26381;&#21153;&#22120;,&#20320;&#23601;&#19981;&#24517;&#31561;&#24453; 10 &#31186;&#20102;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cin2</span><span class="hspace">&nbsp;</span><span class="RktSym">cout2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-connect%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">tcp-connect</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"localhost"</span><span class="hspace">&nbsp;</span><span class="RktVal">8081</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">stop</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Byte_and_String_Input.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read-line%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">read-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cin2</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#&lt;eof&gt;</span></p></td></tr></table></blockquote><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;调度&quot;">8<tt>&nbsp;</tt><a name="(part._~e8~b0~83~e5~ba~a6)"></a>&#35843;&#24230;</h3><p>&#29616;&#22312;&#32456;&#20110;&#21040;&#20102;&#25226;&#25105;&#20204;&#30340;&#26381;&#21153;&#22120;&#30340; "Hello, World!" &#21709;&#24212;&#27010;&#25324;&#25104;&#26356;&#26377;&#29992;&#30340;&#19996;&#35199;&#30340;&#26102;&#20505;&#20102;&#12290;
 &#35753;&#25105;&#20204;&#35843;&#25972;&#26381;&#21153;&#22120;,&#20197;&#20415;&#25105;&#20204;&#21487;&#20197;&#25554;&#20837;&#35843;&#24230;&#20989;&#25968;&#26469;&#22788;&#29702;&#23545;&#19981;&#21516; URL &#30340;&#35831;&#27714;&#12290;</p><p>&#20026;&#20102;&#35299;&#26512;&#20256;&#20837;&#30340; URL &#24182;&#26356;&#23481;&#26131;&#22320;&#26684;&#24335;&#21270; HTML &#36755;&#20986;,&#25105;&#20204;&#38656;&#35201;&#20004;&#20010;&#39069;&#22806;&#30340;&#24211;:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xml</span><span class="hspace">&nbsp;</span><span class="RktSym">net/url</span><span class="RktPn">)</span></p></blockquote><p><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">xml</span></a> &#24211;&#32473;&#25105;&#20204;&#25552;&#20379;&#20102; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fmain..rkt%2529._xexpr-%7E3estring%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">xexpr-&gt;string</a></span>,
&#23427;&#25509;&#25910;&#19968;&#20010;&#30475;&#36215;&#26469;&#20687; HTML &#30340; Racket &#20540;,&#24182;&#25226;&#23427;&#21464;&#25104;&#23454;&#38469;&#30340; HTML:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fmain..rkt%2529._xexpr-%7E3estring%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">xexpr-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Hello"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">"Hi!"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Hello&lt;/title&gt;&lt;/head&gt;&lt;body&gt;Hi!&lt;/body&gt;&lt;/html&gt;"</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#23558;&#20551;&#35774;&#25105;&#20204;&#30340;&#26032; <span class="RktSym">dispatch</span> &#20989;&#25968;(&#26377;&#24453;&#32534;&#20889;)&#25509;&#25910;&#19968;&#20010;&#35831;&#27714;&#30340; URL,
&#24182;&#20135;&#29983;&#19968;&#20010;&#36866;&#21512;&#19982; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fmain..rkt%2529._xexpr-%7E3estring%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">xexpr-&gt;string</a></span> &#19968;&#36215;&#20351;&#29992;&#30340;&#32467;&#26524;&#20540;,&#20197;&#36865;&#22238;&#32473;&#23458;&#25143;&#31471;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">handle</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">req</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Match the first line to extract the request:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp-match%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">regexp-match</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#rx"^GET (.+) HTTP/[0-9]+\\.[0-9]+"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Byte_and_String_Input.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read-line%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">read-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=when_unless.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._when%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">when</a></span><span class="hspace">&nbsp;</span><span class="RktSym">req</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Discard the rest of the header (up to blank line):</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp-match%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">regexp-match</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#rx"(\r\n|^)\r\n"</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Dispatch:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">xexpr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dispatch</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list-ref%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list-ref</a></span><span class="hspace">&nbsp;</span><span class="RktSym">req</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Send reply:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"HTTP/1.0 200 Okay\r\n"</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Server: k\r\nContent-Type: text/html\r\n\r\n"</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fmain..rkt%2529._xexpr-%7E3estring%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">xexpr-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xexpr</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">net/url</span></a> &#24211;&#32473;&#20102;&#25105;&#20204; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl..rkt%2529._string-%7E3eurl%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-&gt;url</a></span>,
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._url-path%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">url-path</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._path%252Fparam-path%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">path/param-path</a></span> &#21644; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._url-query%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">url-query</a></span>
,&#29992;&#20110;&#20174;&#19968;&#20010;&#23383;&#31526;&#20018;&#21040;&#23427;&#25152;&#20195;&#34920;&#30340; URL &#30340;&#37096;&#20998;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">u</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl..rkt%2529._string-%7E3eurl%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-&gt;url</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"http://localhost:8080/foo/bar?x=bye"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._url-path%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">url-path</a></span><span class="hspace">&nbsp;</span><span class="RktSym">u</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(list (path/param "foo" '()) (path/param "bar" '()))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._path%252Fparam-path%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">path/param-path</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._url-path%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">url-path</a></span><span class="hspace">&nbsp;</span><span class="RktSym">u</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'("foo" "bar")</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._url-query%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">url-query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">u</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'((x . "bye"))</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#20351;&#29992;&#36825;&#20123;&#37096;&#20998;&#26469;&#23454;&#29616; <span class="RktSym">dispatch</span> &#12290;
<span class="RktSym">dispatch</span> &#20989;&#25968;&#26597;&#35810;&#20102;&#19968;&#20010;&#21704;&#24076;&#34920;,&#35813;&#34920;&#23558;&#21021;&#22987;&#36335;&#24452;&#20803;&#32032;(&#22914; <span class="RktVal">"foo"</span> )&#26144;&#23556;&#21040;&#19968;&#20010;&#22788;&#29702;&#20989;&#25968;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dispatch</span><span class="hspace">&nbsp;</span><span class="RktSym">str-path</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Parse the request as a URL:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._url%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">url</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl..rkt%2529._string-%7E3eurl%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-&gt;url</a></span><span class="hspace">&nbsp;</span><span class="RktSym">str-path</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Extract the path part:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._path%252Fparam-path%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">path/param-path</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._url-path%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">url-path</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._url%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">url</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Find a handler based on the path</span><span class="RktCmt">'</span><span class="RktCmt">s first element:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">h</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-ref%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">hash-ref</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dispatch-table</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._car%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">car</a></span><span class="hspace">&nbsp;</span><span class="RktSym">path</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktSym">h</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Call a handler:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">h</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._url-query%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">url-query</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=net&amp;rel=url.html%23%2528def._%2528%2528lib._net%252Furl-structs..rkt%2529._url%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">url</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">No handler found:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Error"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">font</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">color</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Unknown page: "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">str-path</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dispatch-table</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-hash%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">make-hash</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#26377;&#20102;&#26032;&#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span> import &#21644;&#26032;&#30340; <span class="RktSym">handle</span>,
<span class="RktSym">dispatch</span> &#21644; <span class="RktSym">dispatch-table</span> &#23450;&#20041;,&#25105;&#20204;&#30340; "Hello World!" &#26381;&#21153;&#22120;&#23601;&#21464;&#25104;&#20102;&#19968;&#20010;&#38169;&#35823;&#26381;&#21153;&#22120;&#12290;
&#20320;&#19981;&#24517;&#20572;&#27490;&#26381;&#21153;&#22120;&#26469;&#23581;&#35797;&#23427;&#12290;
 &#22312;&#29992;&#26032;&#30340;&#37096;&#20998;&#20462;&#25913; <span class="stt">"serve.rkt"</span> &#21518;,&#35780;&#20272; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=interactive.html%23%2528form._%2528%2528lib._racket%252Fenter..rkt%2529._enter%2521%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">enter!</a></span><span class="stt"> </span><span class="RktVal">"serve.rkt"</span><span class="RktPn">)</span> ,&#28982;&#21518;&#20877;&#27425;&#23581;&#35797;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#12290;
 &#32593;&#32476;&#27983;&#35272;&#22120;&#24212;&#35813;&#26174;&#31034;&#19968;&#20010;&#32418;&#33394;&#30340; "&#26410;&#30693;&#39029;&#38754;" &#38169;&#35823;&#12290;</p><p>&#25105;&#20204;&#21487;&#20197;&#20687;&#36825;&#26679;&#20026; <span class="RktVal">"hello"</span> &#36335;&#24452;&#27880;&#20876;&#19968;&#20010;&#22788;&#29702;&#31243;&#24207;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2521%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">hash-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dispatch-table</span><span class="hspace">&nbsp;</span><span class="RktVal">"hello"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">query</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">"Hello, World!"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Here&rsquo;s the whole program so far in plain text: <a href="step5.txt">step 5</a>.</p></blockquote></blockquote></blockquote><p>&#22312;&#28155;&#21152;&#36825;&#20123;&#34892;&#24182;&#36827;&#34892;&#35780;&#20272; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=interactive.html%23%2528form._%2528%2528lib._racket%252Fenter..rkt%2529._enter%2521%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">enter!</a></span><span class="stt"> </span><span class="RktVal">"serve.rkt"</span><span class="RktPn">)</span> &#21518;,
&#25171;&#24320; <span class="stt">http://localhost:8081/hello</span> ,&#24212;&#35813;&#20250;&#20135;&#29983;&#26087;&#30340;&#38382;&#20505;&#35821;&#12290;</p><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;小程序和会话&quot;">9<tt>&nbsp;</tt><a name="(part._~e5~b0~8f~e7~a8~8b~e5~ba~8f~e5~92~8c~e4~bc~9a~e8~af~9d)"></a>&#23567;&#31243;&#24207;&#21644;&#20250;&#35805;</h3><p>&#20351;&#29992;&#30001; <span class="RktSym">dispatch</span> &#20256;&#36882;&#32473;&#22788;&#29702;&#31243;&#24207;&#30340; <span class="RktSym">query</span> &#21442;&#25968;,&#22788;&#29702;&#31243;&#24207;&#21487;&#20197;&#23545;&#29992;&#25143;&#36890;&#36807;&#34920;&#21333;&#25552;&#20379;&#30340;&#20540;&#20316;&#20986;&#21453;&#24212;&#12290;</p><p>&#19979;&#38754;&#30340;&#36741;&#21161;&#20989;&#25968;&#26500;&#36896;&#20102;&#19968;&#20010; HTML &#34920;&#21333;&#12290;
<span class="RktSym">label</span> &#21442;&#25968;&#26159;&#19968;&#20010;&#35201;&#26174;&#31034;&#32473;&#29992;&#25143;&#30340;&#23383;&#31526;&#20018;&#12290;
<span class="RktSym">next-url</span> &#21442;&#25968;&#26159;&#34920;&#21333;&#32467;&#26524;&#30340;&#19968;&#20010;&#30446;&#26631;&#12290;
<span class="RktSym">hidden</span> &#21442;&#25968;&#26159;&#19968;&#20010;&#20540;,&#20316;&#20026;&#19968;&#20010;&#38544;&#34255;&#23383;&#27573;&#22312;&#34920;&#21333;&#20013;&#20256;&#25773;&#12290;
 &#24403;&#29992;&#25143;&#20570;&#20986;&#21453;&#24212;&#26102;,&#34920;&#21333;&#20013;&#30340; <span class="RktVal">"number"</span> &#23383;&#27573;&#20250;&#20445;&#23384;&#29992;&#25143;&#30340;&#20540;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">build-request-page</span><span class="hspace">&nbsp;</span><span class="RktSym">label</span><span class="hspace">&nbsp;</span><span class="RktSym">next-url</span><span class="hspace">&nbsp;</span><span class="RktSym">hidden</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"Enter a Number to Add"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">bgcolor</span><span class="hspace">&nbsp;</span><span class="RktVal">"white"</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">form</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">action</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">next-url</span><span class="RktVal">]</span><span class="hspace">&nbsp;</span><span class="RktVal">[</span><span class="RktVal">method</span><span class="hspace">&nbsp;</span><span class="RktVal">"get"</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">label</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"text"</span><span class="RktVal">]</span><span class="hspace">&nbsp;</span><span class="RktVal">[</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"number"</span><span class="RktVal">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">[</span><span class="RktVal">value</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktVal">]</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"hidden"</span><span class="RktVal">]</span><span class="hspace">&nbsp;</span><span class="RktVal">[</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"hidden"</span><span class="RktVal">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">[</span><span class="RktVal">value</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym">hidden</span><span class="RktVal">]</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">input</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"submit"</span><span class="RktVal">]</span><span class="hspace">&nbsp;</span><span class="RktVal">[</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"enter"</span><span class="RktVal">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">[</span><span class="RktVal">value</span><span class="hspace">&nbsp;</span><span class="RktVal">"Enter"</span><span class="RktVal">]</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#20351;&#29992;&#36825;&#20010;&#36741;&#21161;&#20989;&#25968;,&#25105;&#20204;&#21487;&#20197;&#21019;&#24314;&#19968;&#20010; servlet,&#23427;&#21487;&#20197;&#25353;&#29031;&#29992;&#25143;&#30340;&#35201;&#27714;&#29983;&#25104;&#20219;&#24847;&#22810;&#30340; "hello":</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>&#21442;&#35265; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=for.html&amp;version=8.9" class="Sq" data-pltdoc="x">&#36845;&#20195;&#21644;&#25512;&#23548;</a> ,
&#20102;&#35299; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%252Flist%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">for/list</a></span> &#31561;&#34920;&#21333;&#30340;&#20171;&#32461;&#12290;</p></blockquote></blockquote></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">many</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">build-request-page</span><span class="hspace">&nbsp;</span><span class="RktVal">"Number of greetings:"</span><span class="hspace">&nbsp;</span><span class="RktVal">"/reply"</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">reply</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3enumber%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-&gt;number</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cdr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._assq%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">assq</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">number</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%252Flist%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">for/list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=sequences.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._in-range%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">in-range</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">" hello"</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2521%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">hash-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dispatch-table</span><span class="hspace">&nbsp;</span><span class="RktVal">"many"</span><span class="hspace">&nbsp;</span><span class="RktSym">many</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2521%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">hash-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dispatch-table</span><span class="hspace">&nbsp;</span><span class="RktVal">"reply"</span><span class="hspace">&nbsp;</span><span class="RktSym">reply</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Here&rsquo;s the whole program so far in plain text: <a href="step6.txt">step 6</a>.</p></blockquote></blockquote></blockquote><p>&#20687;&#24448;&#24120;&#19968;&#26679;,&#19968;&#26086;&#20320;&#25226;&#36825;&#20123;&#28155;&#21152;&#21040;&#20320;&#30340;&#31243;&#24207;&#20013;,&#29992; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=interactive.html%23%2528form._%2528%2528lib._racket%252Fenter..rkt%2529._enter%2521%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">enter!</a></span><span class="stt"> </span><span class="RktVal">"serve.rkt"</span><span class="RktPn">)</span> &#26356;&#26032;,
&#28982;&#21518;&#35775;&#38382; <span class="stt">http://localhost:8081/many</span> &#12290;
&#25552;&#20379;&#19968;&#20010;&#25968;&#23383;,&#20320;&#23601;&#20250;&#25910;&#21040;&#19968;&#20010;&#26032;&#30340;&#39029;&#38754;,&#19978;&#38754;&#26377;&#37027;&#20040;&#22810;&#30340; "hello"&#12290;</p><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;限制内存的使用&quot;">10<tt>&nbsp;</tt><a name="(part._~e9~99~90~e5~88~b6~e5~86~85~e5~ad~98~e7~9a~84~e4~bd~bf~e7~94~a8)"></a>&#38480;&#21046;&#20869;&#23384;&#30340;&#20351;&#29992;</h3><p>&#26377;&#20102;&#25105;&#20204;&#26368;&#26032;&#30340; <span class="RktVal">"many"</span> &#25105;&#20204;&#20284;&#20046;&#26377;&#20102;&#19968;&#20010;&#26032;&#30340;&#38382;&#39064;:
&#19968;&#20010;&#24694;&#24847;&#30340;&#23458;&#25143;&#31471;&#21487;&#20197;&#35831;&#27714;&#36825;&#20040;&#22810;&#30340; "hello",&#20197;&#33267;&#20110;&#26381;&#21153;&#22120;&#30340;&#20869;&#23384;&#32791;&#23613;&#12290;
 &#23454;&#38469;&#19978;,&#19968;&#20010;&#24694;&#24847;&#30340;&#23458;&#25143;&#31471;&#20063;&#21487;&#20197;&#25552;&#20379;&#19968;&#20010; HTTP &#35831;&#27714;,&#20854;&#31532;&#19968;&#34892;&#26159;&#20219;&#24847;&#38271;&#30340;&#12290;</p><p>&#35299;&#20915;&#36825;&#31867;&#38382;&#39064;&#30340;&#26041;&#27861;&#26159;&#38480;&#21046;&#36830;&#25509;&#30340;&#20869;&#23384;&#20351;&#29992;&#12290;
&#22312; <span class="RktSym">accept-and-handle</span> &#37324;&#38754;,&#22312; <span class="RktSym">cust</span> &#30340;&#23450;&#20041;&#21518;&#38754;,&#28155;&#21152;&#19968;&#34892;</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=custodians.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._custodian-limit-memory%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">custodian-limit-memory</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cust</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">50</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Here&rsquo;s the whole program so far in plain text: <a href="step7.txt">step 7</a>.</p></blockquote></blockquote></blockquote><p>&#25105;&#20204;&#20551;&#35774; 50MB &#23545;&#20110;&#20219;&#20309; servlet &#26469;&#35828;&#24212;&#35813;&#26159;&#36275;&#22815;&#30340;&#12290;
 &#22403;&#22334;&#25910;&#38598;&#22120;&#30340;&#24320;&#38144;&#24847;&#21619;&#30528;&#31995;&#32479;&#30340;&#23454;&#38469;&#20869;&#23384;&#20351;&#29992;&#21487;&#33021;&#26159; 50MB &#30340;&#26576;&#20010;&#23567;&#20493;&#25968;&#12290;
 &#28982;&#32780;,&#19968;&#20010;&#37325;&#35201;&#30340;&#20445;&#35777;&#26159;,&#19981;&#21516;&#30340;&#36830;&#25509;&#19981;&#20250;&#22240;&#20026;&#24444;&#27492;&#30340;&#20869;&#23384;&#20351;&#29992;&#32780;&#34987;&#25910;&#36153;,&#25152;&#20197;&#19968;&#20010;&#34892;&#20026;&#19981;&#31471;&#30340;&#36830;&#25509;&#19981;&#20250;&#24178;&#25200;&#21478;&#19968;&#20010;&#36830;&#25509;&#12290;</p><p>&#25152;&#20197;,&#26377;&#20102;&#19978;&#38754;&#30340;&#26032;&#34892;,&#24182;&#20551;&#35774;&#20320;&#26377;&#20960;&#30334;&#20806;&#30340;&#21487;&#29992;&#20869;&#23384;&#20379; <span class="stt">racket</span> &#36827;&#31243;&#20351;&#29992;,
&#20320;&#24212;&#35813;&#19981;&#20250;&#22240;&#20026;&#35831;&#27714;&#22823;&#37327;&#30340; "hello" &#32780;&#20351; Web &#26381;&#21153;&#22120;&#23849;&#28291;&#12290;</p><p>&#32771;&#34385;&#21040; <span class="RktVal">"many"</span> &#30340;&#20363;&#23376;,&#23545;&#20110;&#25509;&#21463;&#20219;&#24847; Racket &#20195;&#30721;&#22312;&#26381;&#21153;&#22120;&#19978;&#25191;&#34892;&#30340;&#32593;&#32476;&#26381;&#21153;&#22120;&#26469;&#35828;,&#36825;&#21482;&#26159;&#19968;&#20010;&#23567;&#27493;&#39588;&#12290;
 &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;,&#38500;&#20102;&#38480;&#21046;&#22788;&#29702;&#22120;&#26102;&#38388;&#21644;&#20869;&#23384;&#28040;&#32791;&#22806;,&#36824;&#26377;&#35768;&#22810;&#39069;&#22806;&#30340;&#23433;&#20840;&#38382;&#39064;&#12290;
<a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Sandboxed_Evaluation.html&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/sandbox</span></a> &#24211;&#25552;&#20379;&#20102;&#23545;&#25152;&#26377;&#36825;&#20123;&#20854;&#20182;&#38382;&#39064;&#30340;&#31649;&#29702;&#25903;&#25345;&#12290;</p><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;延续&quot;">11<tt>&nbsp;</tt><a name="(part._~e5~bb~b6~e7~bb~ad)"></a>&#24310;&#32493;</h3><p>&#20316;&#20026;&#19968;&#20010;&#31995;&#32479;&#30340;&#20363;&#23376;,&#23454;&#29616;&#19968;&#20010;&#32593;&#32476;&#26381;&#21153;&#22120;&#30340;&#38382;&#39064;&#26292;&#38706;&#20102;&#35768;&#22810;&#31995;&#32479;&#21644;&#23433;&#20840;&#38382;&#39064;,&#22312;&#36825;&#20123;&#38382;&#39064;&#19978;,&#32534;&#31243;&#35821;&#35328;&#21487;&#20197;&#25552;&#20379;&#24110;&#21161;&#12290;
 &#32593;&#32476;&#26381;&#21153;&#22120;&#30340;&#20363;&#23376;&#20063;&#24341;&#20986;&#20102;&#19968;&#20010;&#32463;&#20856;&#30340;&#12289;&#39640;&#32423;&#30340; Racket &#20027;&#39064;: <span style="font-style: italic">continuations</span> &#12290;
&#20107;&#23454;&#19978;,&#32593;&#32476;&#26381;&#21153;&#22120;&#30340;&#36825;&#20010;&#26041;&#38754;&#38656;&#35201; <span style="font-style: italic">delimited continuations</span>, &#32780; Racket &#25552;&#20379;&#20102;&#36825;&#31181;&#36830;&#32493;&#12290;</p><p>&#36830;&#32493;&#24615;&#25152;&#35299;&#20915;&#30340;&#38382;&#39064;&#19982; servlet &#20250;&#35805;&#21644;&#29992;&#25143;&#36755;&#20837;&#26377;&#20851;,&#20854;&#20013;&#19968;&#20010;&#35745;&#31639;&#36328;&#36234;&#20102;&#22810;&#20010;&#23458;&#25143;&#31471;&#36830;&#25509; [<a href="#%28cite._.Queinnec00%29" data-pltdoc="x">Queinnec00</a>] &#12290;
 &#36890;&#24120;,&#23458;&#25143;&#31471;&#35745;&#31639;(&#22914; AJAX)&#26159;&#38382;&#39064;&#30340;&#27491;&#30830;&#35299;&#20915;&#26041;&#26696;,&#20294;&#35768;&#22810;&#38382;&#39064;&#26368;&#22909;&#29992;&#28151;&#21512;&#25216;&#26415;&#26469;&#35299;&#20915;(&#20363;&#22914;,&#21033;&#29992;&#27983;&#35272;&#22120;&#30340; "&#36820;&#22238;" &#25353;&#38062;)&#12290;</p><p>&#38543;&#30528;&#22810;&#36830;&#25509;&#35745;&#31639;&#21464;&#24471;&#36234;&#26469;&#36234;&#22797;&#26434;,&#36890;&#36807; <span class="RktSym">query</span> &#20256;&#25773;&#21442;&#25968;&#21464;&#24471;&#36234;&#26469;&#36234;&#32321;&#29712;&#12290;
&#20363;&#22914;,&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;&#34920;&#21333;&#20013;&#30340;&#38544;&#34255;&#23383;&#27573;&#26469;&#35760;&#24518;&#31532;&#19968;&#20010;&#25968;&#23383;,&#23454;&#29616;&#19968;&#20010;&#38656;&#35201;&#20004;&#20010;&#25968;&#23383;&#30456;&#21152;&#30340; Servlet:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">build-request-page</span><span class="hspace">&nbsp;</span><span class="RktVal">"First number:"</span><span class="hspace">&nbsp;</span><span class="RktVal">"/one"</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">one</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">build-request-page</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second number:"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"/two"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cdr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._assq%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">assq</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">number</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">two</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3enumber%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-&gt;number</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cdr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._assq%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">assq</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">hidden</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3enumber%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-&gt;number</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cdr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._assq%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">assq</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">number</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">"The sum is "</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number-%7E3estring%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">number-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2521%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">hash-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dispatch-table</span><span class="hspace">&nbsp;</span><span class="RktVal">"sum"</span><span class="hspace">&nbsp;</span><span class="RktSym">sum</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2521%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">hash-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dispatch-table</span><span class="hspace">&nbsp;</span><span class="RktVal">"one"</span><span class="hspace">&nbsp;</span><span class="RktSym">one</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2521%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">hash-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dispatch-table</span><span class="hspace">&nbsp;</span><span class="RktVal">"two"</span><span class="hspace">&nbsp;</span><span class="RktSym">two</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Here&rsquo;s the whole program so far in plain text: <a href="step8.txt">step 8</a>.</p></blockquote></blockquote></blockquote><p>&#34429;&#28982;&#19978;&#38754;&#30340;&#26041;&#27861;&#21487;&#34892;,&#20294;&#25105;&#20204;&#26356;&#24076;&#26395;&#20197;&#30452;&#25509;&#30340;&#39118;&#26684;&#26469;&#20889;&#36825;&#31181;&#35745;&#31639;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum2</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">get-number</span><span class="hspace">&nbsp;</span><span class="RktVal">"First number:"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">get-number</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second number:"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">"The sum is "</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number-%7E3estring%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">number-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2521%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">hash-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dispatch-table</span><span class="hspace">&nbsp;</span><span class="RktVal">"sum2"</span><span class="hspace">&nbsp;</span><span class="RktSym">sum2</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#38382;&#39064;&#26159;, <span class="RktSym">get-number</span> &#38656;&#35201;&#20026;&#24403;&#21069;&#36830;&#25509;&#21457;&#36865;&#19968;&#20010; HTML &#21709;&#24212;,&#28982;&#21518;&#23427;&#24517;&#39035;&#36890;&#36807;&#19968;&#20010;&#26032;&#30340;&#36830;&#25509;&#33719;&#24471;&#21709;&#24212;&#12290;
 &#20063;&#23601;&#26159;&#35828;,&#23427;&#38656;&#35201;&#20197;&#26576;&#31181;&#26041;&#24335;&#23558; <span class="RktSym">build-request-page</span> &#29983;&#25104;&#30340;&#39029;&#38754;&#36716;&#25442;&#20026;&#19968;&#20010; <span class="RktSym">query</span> &#32467;&#26524;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">get-number</span><span class="hspace">&nbsp;</span><span class="RktSym">label</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">query</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">build-request-page</span><span class="hspace">&nbsp;</span><span class="RktSym">label</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number-%7E3estring%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">number-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cdr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._assq%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">assq</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">number</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#24310;&#32493;&#24615;&#35753;&#25105;&#20204;&#23454;&#29616;&#20102;&#19968;&#20010; <span class="RktSym">send/suspend</span> &#25805;&#20316;,&#27491;&#26159;&#25191;&#34892;&#20102;&#36825;&#20010;&#25805;&#20316;&#12290;
<span class="RktSym">send/suspend</span> &#31243;&#24207;&#29983;&#25104;&#19968;&#20010;&#20195;&#34920;&#24403;&#21069;&#36830;&#25509;&#30340;&#35745;&#31639;&#30340; URL,&#23558;&#20854;&#20316;&#20026;&#19968;&#20010;&#24310;&#32493;&#26469;&#25429;&#33719;&#12290;
 &#23427;&#23558;&#29983;&#25104;&#30340; URL &#20256;&#36882;&#32473;&#19968;&#20010;&#21019;&#24314;&#26597;&#35810;&#39029;&#38754;&#30340;&#36807;&#31243;;&#36825;&#20010;&#26597;&#35810;&#39029;&#38754;&#34987;&#29992;&#20316;&#24403;&#21069;&#36830;&#25509;&#30340;&#32467;&#26524;,&#32780;&#21608;&#22260;&#30340;&#35745;&#31639;(&#21363;&#24310;&#32493;)&#34987;&#20013;&#27490;&#12290;
 &#26368;&#21518;, <span class="RktSym">send/suspend</span> &#23433;&#25490;&#20102;&#19968;&#20010;&#23545;&#29983;&#25104;&#30340; URL &#30340;&#35831;&#27714;(&#22312;&#19968;&#20010;&#26032;&#30340;&#36830;&#25509;&#20013;)&#26469;&#24674;&#22797;&#34987;&#20013;&#27490;&#30340;&#35745;&#31639;&#12290;</p><p>&#22240;&#27492;, <span class="RktSym">get-number</span> &#30340;&#23454;&#29616;&#26041;&#27861;&#22914;&#19979;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">get-number</span><span class="hspace">&nbsp;</span><span class="RktSym">label</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">query</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Generate a URL for the current computation:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Receive the computation-as-URL here:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">k-url</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Generate the query-page result for this connection.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Send the query result to the saved-computation URL:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">build-request-page</span><span class="hspace">&nbsp;</span><span class="RktSym">label</span><span class="hspace">&nbsp;</span><span class="RktSym">k-url</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We arrive here later, in a new connection</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3enumber%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-&gt;number</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdr%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cdr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._assq%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">assq</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">number</span><span class="hspace">&nbsp;</span><span class="RktSym">query</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#25105;&#20204;&#20173;&#28982;&#35201;&#23454;&#29616; <span class="RktSym">send/suspend</span> &#12290;
 &#23545;&#20110;&#36825;&#39033;&#20219;&#21153;,&#25105;&#20204;&#23548;&#20837;&#20102;&#19968;&#20010;&#25511;&#21046;&#25805;&#20316;&#31526;&#24211;:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">racket/control</span><span class="RktPn">)</span></p></blockquote><p>&#20855;&#20307;&#26469;&#35828;,&#25105;&#20204;&#38656;&#35201; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528mod-path._racket%252Fcontrol%2529&amp;version=8.9" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/control</span></a> &#20013;&#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528form._%2528%2528lib._racket%252Fcontrol..rkt%2529._prompt%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">prompt</a></span> &#21644; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528def._%2528%2528lib._racket%252Fcontrol..rkt%2529._abort%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">abort</a></span> &#12290;
 &#25105;&#20204;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528form._%2528%2528lib._racket%252Fcontrol..rkt%2529._prompt%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">prompt</a></span> &#26469;&#26631;&#35760; servlet &#21551;&#21160;&#30340;&#22320;&#26041;,&#36825;&#26679;&#25105;&#20204;&#23601;&#21487;&#20197;&#20013;&#27490;&#23545;&#35813;&#28857;&#30340;&#35745;&#31639;&#12290;
 &#25913;&#21464; <span class="RktSym">handle</span> ,&#22312;&#35843;&#29992; <span class="RktSym">dispatch</span> &#30340;&#26102;&#20505;&#21253;&#35065;&#19968;&#20010; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528form._%2528%2528lib._racket%252Fcontrol..rkt%2529._prompt%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">prompt</a></span> :</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">handle</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktSym">out</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">....</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">xexpr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528form._%2528%2528lib._racket%252Fcontrol..rkt%2529._prompt%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">prompt</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dispatch</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list-ref%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list-ref</a></span><span class="hspace">&nbsp;</span><span class="RktSym">req</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">....</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#29616;&#22312;,&#25105;&#20204;&#21487;&#20197;&#23454;&#29616; <span class="RktSym">send/suspend</span> &#20102;&#12290;
 &#25105;&#20204;&#20197; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._let%252Fcc%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let/cc</a></span> &#30340;&#21517;&#20041;&#20351;&#29992; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._call%252Fcc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">call/cc</a></span>,&#23427;&#25429;&#33719;&#20102;&#24403;&#21069;&#30340;&#35745;&#31639;,
&#30452;&#21040;&#19968;&#20010;&#23553;&#38381;&#30340; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528form._%2528%2528lib._racket%252Fcontrol..rkt%2529._prompt%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">prompt</a></span> ,&#24182;&#23558;&#35813;&#35745;&#31639;&#32465;&#23450;&#21040;&#19968;&#20010;&#26631;&#35782;&#31526;&#8212;<wbr></wbr><span class="RktSym">k</span>, &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend</span><span class="hspace">&nbsp;</span><span class="RktSym">mk-page</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._let%252Fcc%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let/cc</a></span><span class="hspace">&nbsp;</span><span class="RktSym">k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#25509;&#19979;&#26469;,&#25105;&#20204;&#29983;&#25104;&#19968;&#20010;&#26032;&#30340;&#35843;&#24230;&#26631;&#31614;,&#24182;&#35760;&#24405;&#20174;&#26631;&#31614;&#21040; <span class="RktSym">k</span> &#30340;&#26144;&#23556;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend</span><span class="hspace">&nbsp;</span><span class="RktSym">mk-page</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._let%252Fcc%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let/cc</a></span><span class="hspace">&nbsp;</span><span class="RktSym">k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">tag</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"k~a"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=time.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-inexact-milliseconds%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">current-inexact-milliseconds</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2521%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">hash-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dispatch-table</span><span class="hspace">&nbsp;</span><span class="RktSym">tag</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#26368;&#21518;,&#25105;&#20204;&#25918;&#24323;&#24403;&#21069;&#30340;&#35745;&#31639;,&#36716;&#32780;&#25552;&#20379;&#36890;&#36807;&#23558;&#32473;&#23450;&#30340; <span class="RktSym">mk-page</span> &#24212;&#29992;&#20110;&#29983;&#25104;&#30340;&#26631;&#31614;&#30340; URL &#32780;&#24314;&#31435;&#30340;&#39029;&#38754;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send/suspend</span><span class="hspace">&nbsp;</span><span class="RktSym">mk-page</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._let%252Fcc%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let/cc</a></span><span class="hspace">&nbsp;</span><span class="RktSym">k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">tag</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"k~a"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=time.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-inexact-milliseconds%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">current-inexact-milliseconds</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2521%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">hash-set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dispatch-table</span><span class="hspace">&nbsp;</span><span class="RktSym">tag</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528def._%2528%2528lib._racket%252Fcontrol..rkt%2529._abort%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">abort</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">mk-page</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"/"</span><span class="hspace">&nbsp;</span><span class="RktSym">tag</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#24403;&#29992;&#25143;&#25552;&#20132;&#34920;&#21333;&#26102;,&#19982;&#34920;&#21333;&#30340; URL &#30456;&#20851;&#32852;&#30340;&#22788;&#29702;&#31243;&#24207;&#26159;&#26087;&#30340;&#35745;&#31639;,&#20316;&#20026;&#19968;&#20010;&#24310;&#32493;&#23384;&#20648;&#22312;&#35843;&#24230;&#34920;&#20013;&#12290;
&#35843;&#29992;&#36825;&#20010;&#24310;&#32493;(&#20687;&#19968;&#20010;&#20989;&#25968;)&#21487;&#20197;&#24674;&#22797;&#26087;&#30340;&#35745;&#31639;,&#25226; <span class="RktSym">query</span> &#21442;&#25968;&#20256;&#22238;&#32473;&#37027;&#20010;&#35745;&#31639;&#12290;</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Here&rsquo;s the final program in plain text: <a href="step9.txt">step 9</a>.</p></blockquote></blockquote></blockquote><p>&#32508;&#19978;&#25152;&#36848;,&#26032;&#30340;&#37096;&#20998;&#26159;: <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><span class="RktSym">racket/control</span><span class="RktPn">)</span>,
&#22312; <span class="RktSym">handle</span> &#37324;&#38754;&#28155;&#21152; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=cont.html%23%2528form._%2528%2528lib._racket%252Fcontrol..rkt%2529._prompt%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">prompt</a></span> &#65292;
<span class="RktSym">send/suspend</span>, <span class="RktSym">get-number</span> &#21644; <span class="RktSym">sum2</span> &#30340;&#23450;&#20041;,
&#20197;&#21450; <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2521%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">hash-set!</a></span><span class="stt"> </span><span class="RktSym">dispatch-table</span><span class="stt"> </span><span class="RktVal">"sum2"</span><span class="stt"> </span><span class="RktSym">sum2</span><span class="RktPn">)</span>  &#12290;
&#19968;&#26086;&#20320;&#23436;&#25104;&#20102;&#26381;&#21153;&#22120;&#30340;&#26356;&#26032;,&#35831;&#35775;&#38382; <span class="stt">http://localhost:8081/sum2</span> &#12290;</p><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;何去何从&quot;">12<tt>&nbsp;</tt><a name="(part._~e4~bd~95~e5~8e~bb~e4~bd~95~e4~bb~8e)"></a>&#20309;&#21435;&#20309;&#20174;</h3><p>Racket &#21457;&#34892;&#29256;&#21253;&#25324;&#19968;&#20010;&#20855;&#26377;&#29983;&#20135;&#36136;&#37327;&#30340;&#32593;&#32476;&#26381;&#21153;&#22120;,&#23427;&#35299;&#20915;&#20102;&#36825;&#37324;&#25552;&#21040;&#30340;&#25152;&#26377;&#35774;&#35745;&#35201;&#28857;&#20197;&#21450;&#26356;&#22810;&#38382;&#39064;&#12290;
&#35201;&#20102;&#35299;&#26356;&#22810;,&#35831;&#30475;&#25945;&#31243; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?tag=%28part._%28.%27%28lib._web-server%2Fscribblings%2Ftutorial%2Fcontinue..scrbl%29.%27._.%27top.%27%29%29&amp;version=8.9" class="Sq" data-pltdoc="x">Continue: Web Applications in Racket</a>, <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?tag=%28part._%28.%27%28lib._web-server%2Fscribblings%2Fweb-server..scrbl%29.%27._.%27top.%27%29%29&amp;version=8.9" class="Sq" data-pltdoc="x">theWeb Applications in Racketdocumentation</a>, &#25110;&#30740;&#31350;&#35770;&#25991; [<a href="#%28cite._.Krishnamurthi07%29" data-pltdoc="x">Krishnamurthi07</a>] &#12290;</p><p>&#21542;&#21017;,&#22914;&#26524;&#20320;&#26159;&#20316;&#20026; Racket &#20171;&#32461;&#30340;&#19968;&#37096;&#20998;&#26469;&#21040;&#36825;&#37324;,&#37027;&#20040;&#20320;&#30340;&#19979;&#19968;&#31449;&#21487;&#33021;&#26159; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=guide&amp;rel=index.html&amp;version=8.9" class="Sq" data-pltdoc="x">Racket &#25351;&#21335;</a> &#12290;</p><p>&#22914;&#26524;&#20320;&#23545;&#36825;&#37324;&#30340;&#20027;&#39064;&#24863;&#20852;&#36259;,&#20063;&#21487;&#20197;&#30475;&#30475; <a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.9" class="Sq" data-pltdoc="x">Racket &#21442;&#32771;</a> &#20013;&#30340;
<a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=concurrency.html&amp;version=8.9" class="Sq" data-pltdoc="x">Concurrency and Parallelism</a> &#21644;
<a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=security.html&amp;version=8.9" class="Sq" data-pltdoc="x">Reflection and Security</a> &#12290;</p><p>&#20854;&#20013;&#19968;&#20123;&#26448;&#26009;&#26159;&#22522;&#20110;&#30456;&#23545;&#36739;&#26032;&#30340;&#30740;&#31350;,&#26356;&#22810;&#30340;&#20449;&#24687;&#21487;&#20197;&#22312; Racket &#20316;&#32773;&#25776;&#20889;&#30340;&#35770;&#25991;&#20013;&#25214;&#21040;,
&#21253;&#25324;&#20851;&#20110; GRacket(&#20197;&#21069;&#30340; &ldquo;MrEd&rdquo;) [<a href="#%28cite._.Flatt99%29" data-pltdoc="x">Flatt99</a>],
&#20869;&#23384;&#26680;&#31639; [<a href="#%28cite._.Wick04%29" data-pltdoc="x">Wick04</a>], &#26432;&#25134;&#23433;&#20840;&#25277;&#35937; [<a href="#%28cite._.Flatt04%29" data-pltdoc="x">Flatt04</a>], &#20197;&#21450;&#38480;&#23450;&#36830;&#32493;&#30340;&#35770;&#25991; [<a href="#%28cite._.Flatt07%29" data-pltdoc="x">Flatt07</a>] &#12290;</p><h3 x-source-module="(lib &quot;scribblings/more/more.scrbl&quot;)" x-source-pkg="racket-doc" x-part-tag="&quot;doc-bibliography&quot;"><a name="(part._doc-bibliography)"></a>Bibliography</h3><p><table cellspacing="0" cellpadding="0" class="RBibliography"><tr><td><a name="(cite._.Flatt99)"></a>[Flatt99]</td><td><span class="hspace">&nbsp;</span></td><td><span class="bibentry">Matthew Flatt, Robert Bruce Findler, Shriram Krishnamurthi, and Matthias Felleisen, &ldquo;Programming Languages as Operating Systems
(<span class="emph">or</span> Revenge of the Son of the Lisp Machine),&rdquo; International Conference on Functional Programming, 1999. <a href="http://www.ccs.neu.edu/scheme/pubs/icfp99-ffkf.pdf"><span class="stt">http://www.ccs.neu.edu/scheme/pubs/icfp99-ffkf.pdf</span></a></span></td></tr><tr><td><a name="(cite._.Flatt04)"></a>[Flatt04]</td><td><span class="hspace">&nbsp;</span></td><td><span class="bibentry">Matthew Flatt and Robert Bruce Findler, &ldquo;Kill-Safe Synchronization Abstractions,&rdquo; Programming Language Design and Implementation, 2004. <a href="http://www.cs.utah.edu/plt/publications/pldi04-ff.pdf"><span class="stt">http://www.cs.utah.edu/plt/publications/pldi04-ff.pdf</span></a></span></td></tr><tr><td><a name="(cite._.Flatt07)"></a>[Flatt07]</td><td><span class="hspace">&nbsp;</span></td><td><span class="bibentry">Matthew Flatt, Gang Yu, Robert Bruce Findler, and Matthias Felleisen, &ldquo;Adding Delimited and Composable Control to a Production Programming Environment,&rdquo; International Conference on Functional Programming, 2007. <a href="http://www.cs.utah.edu/plt/publications/icfp07-fyff.pdf"><span class="stt">http://www.cs.utah.edu/plt/publications/icfp07-fyff.pdf</span></a></span></td></tr><tr><td><a name="(cite._.Krishnamurthi07)"></a>[Krishnamurthi07]</td><td><span class="hspace">&nbsp;</span></td><td><span class="bibentry">Shriram Krishnamurthi, Peter Hopkins, Jay McCarthy, Paul T. Graunke, Greg Pettyjohn, and Matthias Felleisen, &ldquo;Implementation and Use of the PLT Scheme Web Server,&rdquo; <span style="font-style: italic">Higher-Order and Symbolic Computation</span>, 2007. <a href="http://www.cs.brown.edu/~sk/Publications/Papers/Published/khmgpf-impl-use-plt-web-server-journal/paper.pdf"><span class="stt">http://www.cs.brown.edu/~sk/Publications/Papers/Published/khmgpf-impl-use-plt-web-server-journal/paper.pdf</span></a></span></td></tr><tr><td><a name="(cite._.Queinnec00)"></a>[Queinnec00]</td><td><span class="hspace">&nbsp;</span></td><td><span class="bibentry">Christian Queinnec, &ldquo;The Influence of Browsers on Evaluators or, Continuations to Program Web Servers,&rdquo; International Conference on Functional Programming, 2000. <a href="http://pagesperso-systeme.lip6.fr/Christian.Queinnec/PDF/webcont.pdf"><span class="stt">http://pagesperso-systeme.lip6.fr/Christian.Queinnec/PDF/webcont.pdf</span></a></span></td></tr><tr><td><a name="(cite._.Wick04)"></a>[Wick04]</td><td><span class="hspace">&nbsp;</span></td><td><span class="bibentry">Adam Wick and Matthew Flatt, &ldquo;Memory Accounting without Partitions,&rdquo; International Symposium on Memory Management, 2004. <a href="http://www.cs.utah.edu/plt/publications/ismm04-wf.pdf"><span class="stt">http://www.cs.utah.edu/plt/publications/ismm04-wf.pdf</span></a></span></td></tr></table></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.9&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>