<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;查询</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">DB:<span class="mywbr"> &nbsp;</span> &#25968;&#25454;&#24211;&#36830;&#25509;</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="using-db.html" class="tocviewlink" data-pltdoc="x">&#20351;&#29992;&#25968;&#25454;&#24211;&#36830;&#25509;</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="connect.html" class="tocviewlink" data-pltdoc="x">Connections</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">&#26597;&#35810;</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="sql-types.html" class="tocviewlink" data-pltdoc="x">SQL &#31867;&#22411;&#36716;&#25442;</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="util.html" class="tocviewlink" data-pltdoc="x">&#23454;&#29992;&#24037;&#20855;</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="notes.html" class="tocviewlink" data-pltdoc="x">&#31508;&#35760;</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">&#26597;&#35810;</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._query-statements%29" class="tocviewlink" data-pltdoc="x">&#35821;&#21477;</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._~e7~ae~80~e5~8d~95~e6~9f~a5~e8~af~a2%29" class="tocviewlink" data-pltdoc="x">&#31616;&#21333;&#26597;&#35810;</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="#%28part._~e4~b8~80~e8~88~ac~e6~9f~a5~e8~af~a2~e6~94~af~e6~8c~81%29" class="tocviewlink" data-pltdoc="x">&#19968;&#33324;&#26597;&#35810;&#25903;&#25345;</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="#%28part._~e9~a2~84~e5~a4~87~e8~af~ad~e5~8f~a5%29" class="tocviewlink" data-pltdoc="x">&#39044;&#22791;&#35821;&#21477;</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="#%28part._transactions%29" class="tocviewlink" data-pltdoc="x">&#20132;&#26131;</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="#%28part._.S.Q.L_~e9~94~99~e8~af~af%29" class="tocviewlink" data-pltdoc="x">SQL &#38169;&#35823;</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="#%28part._~e6~95~b0~e6~8d~ae~e5~ba~93~e7~9b~ae~e5~bd~95~e4~bf~a1~e6~81~af%29" class="tocviewlink" data-pltdoc="x">&#25968;&#25454;&#24211;&#30446;&#24405;&#20449;&#24687;</a></td></tr><tr><td align="right">3.8&nbsp;</td><td><a href="#%28part._~e5~88~9b~e5~bb~ba~e6~96~b0~e7~b1~bb~e5~9e~8b~e7~9a~84~e8~af~ad~e5~8f~a5%29" class="tocviewlink" data-pltdoc="x">&#21019;&#24314;&#26032;&#31867;&#22411;&#30340;&#35821;&#21477;</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._query-statements%29" class="tocsubseclink" data-pltdoc="x">&#35821;&#21477;</a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">statement?</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._~e7~ae~80~e5~8d~95~e6~9f~a5~e8~af~a2%29" class="tocsubseclink" data-pltdoc="x">&#31616;&#21333;&#26597;&#35810;</a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">query-<wbr></wbr>exec</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-rows%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">query-<wbr></wbr>rows</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">query-<wbr></wbr>list</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-row%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">query-<wbr></wbr>row</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-maybe-row%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">query-<wbr></wbr>maybe-<wbr></wbr>row</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">query-<wbr></wbr>value</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-maybe-value%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">query-<wbr></wbr>maybe-<wbr></wbr>value</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">in-<wbr></wbr>query</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#%28part._~e4~b8~80~e8~88~ac~e6~9f~a5~e8~af~a2~e6~94~af~e6~8c~81%29" class="tocsubseclink" data-pltdoc="x">&#19968;&#33324;&#26597;&#35810;&#25903;&#25345;</a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._simple-result%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">simple-<wbr></wbr>result</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-result%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">rows-<wbr></wbr>result</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">query</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._group-rows%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">group-<wbr></wbr>rows</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-~3edict%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">rows-<wbr></wbr>&gt;dict</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#%28part._~e9~a2~84~e5~a4~87~e8~af~ad~e5~8f~a5%29" class="tocsubseclink" data-pltdoc="x">&#39044;&#22791;&#35821;&#21477;</a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepare%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">prepare</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepared-statement~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">prepared-<wbr></wbr>statement?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepared-statement-parameter-types%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">prepared-<wbr></wbr>statement-<wbr></wbr>parameter-<wbr></wbr>types</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepared-statement-result-types%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">prepared-<wbr></wbr>statement-<wbr></wbr>result-<wbr></wbr>types</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._bind-prepared-statement%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">bind-<wbr></wbr>prepared-<wbr></wbr>statement</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement-binding~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">statement-<wbr></wbr>binding?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._virtual-statement%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">virtual-<wbr></wbr>statement</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._virtual-statement~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">virtual-<wbr></wbr>statement?</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.5<tt>&nbsp;</tt></span><a href="#%28part._transactions%29" class="tocsubseclink" data-pltdoc="x">&#20132;&#26131;</a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._start-transaction%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">start-<wbr></wbr>transaction</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._commit-transaction%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">commit-<wbr></wbr>transaction</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rollback-transaction%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">rollback-<wbr></wbr>transaction</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._in-transaction~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">in-<wbr></wbr>transaction?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._needs-rollback~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">needs-<wbr></wbr>rollback?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._call-with-transaction%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">call-<wbr></wbr>with-<wbr></wbr>transaction</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.6<tt>&nbsp;</tt></span><a href="#%28part._.S.Q.L_~e9~94~99~e8~af~af%29" class="tocsubseclink" data-pltdoc="x">SQL &#38169;&#35823;</a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._exn~3afail~3asql%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">exn:<span class="mywbr"> &nbsp;</span>fail:<span class="mywbr"> &nbsp;</span>sql</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.7<tt>&nbsp;</tt></span><a href="#%28part._~e6~95~b0~e6~8d~ae~e5~ba~93~e7~9b~ae~e5~bd~95~e4~bf~a1~e6~81~af%29" class="tocsubseclink" data-pltdoc="x">&#25968;&#25454;&#24211;&#30446;&#24405;&#20449;&#24687;</a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._list-tables%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">list-<wbr></wbr>tables</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._table-exists~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">table-<wbr></wbr>exists?</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.8<tt>&nbsp;</tt></span><a href="#%28part._~e5~88~9b~e5~bb~ba~e6~96~b0~e7~b1~bb~e5~9e~8b~e7~9a~84~e8~af~ad~e5~8f~a5%29" class="tocsubseclink" data-pltdoc="x">&#21019;&#24314;&#26032;&#31867;&#22411;&#30340;&#35821;&#21477;</a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prop~3astatement%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">prop:<span class="mywbr"> &nbsp;</span>statement</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prop~3astatement~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">prop:<span class="mywbr"> &nbsp;</span>statement?</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.9&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="connect.html" title="backward to &quot;2 Connections&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;DB: 数据库连接&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="sql-types.html" title="forward to &quot;4 SQL 类型转换&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;query-api&quot;">3<tt>&nbsp;</tt><a name="(part._query-api)"></a>&#26597;&#35810;</h3><p>&#36825;&#20010;&#24211;&#25552;&#20379;&#20102;&#19968;&#20010;&#39640;&#23618;&#27425;&#30340;&#20989;&#25968;&#24335;&#26597;&#35810; API,&#19982;&#20854;&#20182;&#35768;&#22810;&#25968;&#25454;&#24211;&#24211;&#19981;&#21516;,&#23427;&#20204;&#20026;&#26597;&#35810;&#25552;&#20379;&#20102;&#19968;&#20010;&#26377;&#29366;&#24577;&#30340;&#12289;&#22522;&#20110;&#36845;&#20195;&#30340;&#25509;&#21475;&#12290;
&#24403;&#19968;&#20010;&#26597;&#35810;&#20989;&#25968;&#34987;&#35843;&#29992;&#26102;,&#23427;&#35201;&#20040;&#36820;&#22238;&#19968;&#20010;&#32467;&#26524;,&#35201;&#20040;,&#22914;&#26524;&#26597;&#35810;&#36896;&#25104;&#20102;&#38169;&#35823;,&#21017;&#24341;&#21457;&#19968;&#20010;&#24322;&#24120;&#12290;
 &#19981;&#21516;&#30340;&#26597;&#35810;&#20989;&#25968;&#23545;&#26597;&#35810;&#32467;&#26524;&#26045;&#21152;&#19981;&#21516;&#30340;&#32422;&#26463;,&#24182;&#25552;&#20379;&#19981;&#21516;&#30340;&#26426;&#21046;&#26469;&#22788;&#29702;&#32467;&#26524;&#12290;</p><p><div class="SIntrapara"><span style="font-weight: bold">&#38169;&#35823;</span><span class="hspace">&nbsp;</span> &#22312;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;,&#26597;&#35810;&#38169;&#35823;&#19981;&#20250;&#23548;&#33268;&#36830;&#25509;&#34987;&#26029;&#24320;&#12290;
&#20855;&#20307;&#26469;&#35828;,&#20197;&#19979;&#31867;&#22411;&#30340;&#38169;&#35823;&#19981;&#24212;&#35813;&#23548;&#33268;&#36830;&#25509;&#26029;&#24320;:
</div><div class="SIntrapara"><ul><li><p>SQL &#35821;&#27861;&#38169;&#35823;,&#20363;&#22914;&#23545;&#26410;&#23450;&#20041;&#30340;&#34920;&#12289;&#21015;&#25110;&#25805;&#20316;&#30340;&#24341;&#29992;,&#31561;&#31561;&#12290;</p></li><li><p>SQL &#36816;&#34892;&#26102;&#38169;&#35823;,&#22914;&#36829;&#21453;&#23436;&#25972;&#24615;&#32422;&#26463;&#26465;&#20214;</p></li><li><p>&#36829;&#21453;&#19987;&#38376;&#30340;&#26597;&#35810;&#21151;&#33021;&#30340;&#39044;&#26399;,&#20363;&#22914;&#22312;&#36820;&#22238;&#22810;&#21015;&#30340;&#26597;&#35810;&#20013;&#20351;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span></p></li><li><p>&#20026;&#20934;&#22791;&#22909;&#30340;&#26597;&#35810;&#25552;&#20379;&#20102;&#38169;&#35823;&#30340;&#21442;&#25968;&#25968;&#37327;&#25110;&#38169;&#35823;&#30340;&#21442;&#25968;&#31867;&#22411;,&#29992;&#38169;&#35823;&#30340;&#36830;&#25509;&#25191;&#34892;&#20934;&#22791;&#22909;&#30340;&#26597;&#35810;,&#31561;&#31561;&#12290;</p></li></ul></div><div class="SIntrapara">&#20197;&#19979;&#20960;&#31181;&#38169;&#35823;&#21487;&#33021;&#23548;&#33268;&#36830;&#25509;&#34987;&#26029;&#24320;:
</div><div class="SIntrapara"><ul><li><p>&#25913;&#21464;&#36890;&#20449;&#35774;&#32622;,&#22914;&#25913;&#21464;&#36830;&#25509;&#30340;&#23383;&#31526;&#32534;&#30721;</p></li><li><p>&#36890;&#35759;&#25925;&#38556;&#21644;&#22270;&#20070;&#39302;&#30340;&#20869;&#37096;&#38169;&#35823;</p></li><li><p>&#36830;&#25509;&#25805;&#20316;&#36807;&#31243;&#20013;&#21457;&#29983;&#30340;
<a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=breakhandler.html&amp;version=8.9" class="Sq" data-pltdoc="x">break</a></p></li></ul></div><div class="SIntrapara">&#20851;&#20110;&#38169;&#35823;&#22914;&#20309;&#24433;&#21709;&#20132;&#26131;&#29366;&#24577;&#30340;&#20449;&#24687;,&#35831;&#21442;&#35265; <a href="#%28part._transactions%29" data-pltdoc="x">&#20132;&#26131;</a> &#12290;</div></p><p><span style="font-weight: bold">&#23383;&#31526;&#32534;&#30721;</span><span class="hspace">&nbsp;</span> &#36825;&#20010;&#24211;&#34987;&#35774;&#35745;&#29992;&#26469;&#19982;&#20351;&#29992; UTF-8 &#23383;&#31526;&#32534;&#30721;&#30340;&#25968;&#25454;&#24211;&#31995;&#32479;&#36827;&#34892;&#20132;&#20114;&#12290;
&#36830;&#25509;&#20989;&#25968;&#35797;&#22270;&#22312;&#27599;&#27425;&#36830;&#25509;&#24320;&#22987;&#26102;&#21327;&#21830; UTF-8 &#36890;&#20449;,
&#20294;&#26377;&#20123;&#31995;&#32479;&#20063;&#20801;&#35768;&#36890;&#36807; SQL &#21629;&#20196;(&#20363;&#22914;, <span class="stt">SET NAMES</span>)&#25913;&#21464;&#23383;&#31526;&#32534;&#30721;&#12290;
&#22914;&#26524;&#21457;&#29983;&#36825;&#31181;&#24773;&#20917;,&#23458;&#25143;&#31471;&#21487;&#33021;&#26080;&#27861;&#19982;&#25968;&#25454;&#24211;&#36827;&#34892;&#21487;&#38752;&#30340;&#36890;&#20449;,&#25968;&#25454;&#21487;&#33021;&#22312;&#20256;&#36755;&#20013;&#34987;&#30772;&#22351;&#12290;
 &#36991;&#20813;&#25913;&#21464;&#36830;&#25509;&#30340;&#23383;&#31526;&#32534;&#30721;&#12290;&#22312;&#21487;&#33021;&#30340;&#24773;&#20917;&#19979;,&#36830;&#25509;&#20250;&#35266;&#23519;&#21040;&#36825;&#20010;&#21464;&#21270;,&#24182;&#33258;&#21160;&#26029;&#24320;&#36830;&#25509;,&#24182;&#20986;&#29616;&#38169;&#35823;&#12290;</p><p><span style="font-weight: bold">&#21516;&#27493;</span><span class="hspace">&nbsp;</span> &#36830;&#25509;&#26159;&#20869;&#37096;&#21516;&#27493;&#30340;:&#20174;&#19981;&#21516;&#30340;&#32447;&#31243;&#21516;&#26102;&#20351;&#29992;&#19968;&#20010;&#36830;&#25509;&#26159;&#23433;&#20840;&#30340;&#12290;
&#22823;&#22810;&#25968;&#36830;&#25509;&#19981;&#26159;&#26432;&#25134;&#23433;&#20840;&#30340;:&#26432;&#27515;&#19968;&#20010;&#27491;&#22312;&#20351;&#29992;&#36830;&#25509;&#30340;&#32447;&#31243;&#21487;&#33021;&#20250;&#20351;&#36830;&#25509;&#34987;&#38145;&#23450;,&#23548;&#33268;&#26410;&#26469;&#30340;&#25805;&#20316;&#34987;&#26080;&#38480;&#26399;&#22320;&#38459;&#22622;&#12290;
&#21442;&#35265; <a href="connect.html#%28part._kill-safe%29" data-pltdoc="x">&#26432;&#27515;&#23433;&#20840;&#36830;&#25509;</a> &#12290;</p><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;query-statements&quot;">3.1<tt>&nbsp;</tt><a name="(part._query-statements)"></a>&#35821;&#21477;</h4><p><div class="SIntrapara">&#25152;&#26377;&#30340;&#26597;&#35810;&#20989;&#25968;&#37117;&#38656;&#35201;&#19968;&#20010;&#36830;&#25509;&#21644;&#19968;&#20010; <a name="(tech._statement)"></a><span style="font-style: italic">statement</span> ,&#35821;&#21477;&#26159;&#20197;&#19979;&#30340;&#19968;&#31181;:
</div><div class="SIntrapara"><ul><li><p>&#19968;&#20010;&#21253;&#21547;&#21333;&#20010; SQL &#35821;&#21477;&#30340;&#23383;&#31526;&#20018;</p></li><li><p>&#19968;&#20010;&#30001; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepare%29%29" class="RktValLink" data-pltdoc="x">prepare</a></span> &#20135;&#29983;&#30340; <a href="#%28tech._prepared._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">prepared statement</span></a></p></li><li><p>&#30001; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._virtual-statement%29%29" class="RktValLink" data-pltdoc="x">virtual-statement</a></span> &#20135;&#29983;&#30340;&#19968;&#20010; <a href="#%28tech._virtual._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">virtual statement</span></a></p></li><li><p>&#30001; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._bind-prepared-statement%29%29" class="RktValLink" data-pltdoc="x">bind-prepared-statement</a></span> &#20135;&#29983;&#30340;&#19968;&#20010;&#35821;&#21477;&#32465;&#23450;&#20540;</p></li><li><p>&#23454;&#29616; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prop~3astatement%29%29" class="RktValLink" data-pltdoc="x">prop:statement</a></span> &#30340;&#32467;&#26500;&#31867;&#22411;&#30340;&#19968;&#20010;&#23454;&#20363;&#12290;</p></li></ul></div></p><p>&#19968;&#20010; SQL &#35821;&#21477;&#21487;&#33021;&#21253;&#21547;&#20195;&#34920; SQL &#26631;&#37327;&#20540;&#30340;&#21442;&#25968;&#21344;&#20301;&#31526;;
&#36825;&#26679;&#30340;&#35821;&#21477;&#34987;&#31216;&#20026; <a name="(tech._parameterized._query)"></a><span style="font-style: italic">parameterized queries</span> &#12290;
 &#21442;&#25968;&#20540;&#24517;&#39035;&#22312;&#35821;&#21477;&#25191;&#34892;&#26102;&#25552;&#20379;;&#21442;&#25968;&#21270;&#35821;&#21477;&#21644;&#21442;&#25968;&#20540;&#20250;&#34987;&#21457;&#36865;&#21040;&#25968;&#25454;&#24211;&#21518;&#31471;,&#21518;&#32773;&#20250;&#27491;&#30830;&#12289;&#23433;&#20840;&#22320;&#32452;&#21512;&#23427;&#20204;&#12290;</p><p>&#20351;&#29992;&#21442;&#25968;&#32780;&#19981;&#26159; Racket &#23383;&#31526;&#20018;&#25805;&#20316;(&#20363;&#22914;,<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">format</a></span> &#25110; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string-append</a></span>) ,
&#20197;&#36991;&#20813; <a href="using-db.html#%28part._dbsec-sql-injection%29" data-pltdoc="x">SQL &#27880;&#20837;</a> &#12290;</p><p>&#21344;&#20301;&#31526;&#30340;&#35821;&#27861;&#26681;&#25454;&#25968;&#25454;&#24211;&#31995;&#32479;&#30340;&#19981;&#21516;&#32780;&#19981;&#21516;&#12290;
&#27604;&#22914;&#35828;:</p><blockquote class="SCentered"><table cellspacing="0" cellpadding="0"><tr><td><p>PostgreSQL:   </p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p>  <span class="stt">select * from the_numbers where n &gt; $1;</span> </p></td></tr><tr><td><p>
MySQL, ODBC:  </p></td><td><p></p></td><td><p>  <span class="stt">select * from the_numbers where n &gt; ?;</span> </p></td></tr><tr><td><p>
SQLite:       </p></td><td><p></p></td><td><p>  &#25903;&#25345;&#36825;&#20004;&#31181;&#35821;&#27861;(&#21152;&#19978;&#20854;&#20182;)&#12290;</p></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._statement~3f))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">statement?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#22914;&#26524; <span class="RktVar">x</span> &#26159;&#19968;&#20010; <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a>,&#36820;&#22238; <span class="RktVal">#t</span> ,&#21542;&#21017;&#36820;&#22238; <span class="RktVal">#f</span> &#12290;</div></p><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;简单查询&quot;">3.2<tt>&nbsp;</tt><a name="(part._~e7~ae~80~e5~8d~95~e6~9f~a5~e8~af~a2)"></a>&#31616;&#21333;&#26597;&#35810;</h4><p>&#31616;&#21333;&#26597;&#35810; API &#30001;&#19968;&#32452;&#19987;&#38376;&#29992;&#20110;&#21508;&#31181;&#31867;&#22411;&#26597;&#35810;&#30340;&#20989;&#25968;&#32452;&#25104;&#12290;
&#20363;&#22914;, <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span> &#19987;&#38376;&#29992;&#20110;&#36820;&#22238;&#27491;&#22909;&#26159;&#19968;&#21015;&#30340;&#19968;&#26465;&#35760;&#24405;&#30340;&#26597;&#35810;&#12290;</p><p>&#22914;&#26524;&#19968;&#20010;&#35821;&#21477;&#38656;&#35201;&#21442;&#25968;,&#21442;&#25968;&#20540;&#23558;&#20316;&#20026;&#38468;&#21152;&#21442;&#25968;&#32039;&#38543; SQL &#35821;&#21477;&#20043;&#21518;&#32473;&#20986;&#12290;
&#21482;&#26377;&#20197;&#23383;&#31526;&#20018;&#12289; <a href="#%28tech._prepared._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">prepared statement</span></a>, &#25110;
<a href="#%28tech._virtual._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">virtual statement</span></a> &#30340;&#24418;&#24335;&#32473;&#20986;&#30340;&#35821;&#21477;&#21487;&#20197;&#32473;&#20986; "&#20869;&#32852;" &#21442;&#25968;;&#22914;&#26524;&#35821;&#21477;&#26159;&#19968;&#20010;&#35821;&#21477;&#32465;&#23450;,&#21017;&#19981;&#20801;&#35768;&#20869;&#32852;&#21442;&#25968;&#12290;</p><p>&#21442;&#25968;&#21644;&#36820;&#22238;&#23383;&#27573;&#30340;&#31867;&#22411;&#22312; <a href="sql-types.html" data-pltdoc="x">SQL &#31867;&#22411;&#36716;&#25442;</a> &#20013;&#25551;&#36848;&#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._query-exec))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="RktValDef RktValLink" data-pltdoc="x">query-exec</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="RktValLink" data-pltdoc="x">statement?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#25191;&#34892;&#19968;&#20010;SQL&#35821;&#21477;&#30340;&#25928;&#26524;&#12290;</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="RktValLink" data-pltdoc="x">query-exec</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"insert into the_numbers values (42, 'the answer')"</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-exec%29%29" class="RktValLink" data-pltdoc="x">query-exec</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"delete from the_numbers where n = $1"</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._query-rows))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-rows%29%29" class="RktValDef RktValLink" data-pltdoc="x">query-rows</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">connection</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">stmt</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:group</span><span class="hspace">&nbsp;</span><span class="RktVar">groupings</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:group-mode</span><span class="hspace">&nbsp;</span><span class="RktVar">group-mode</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=vectors.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._vector%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">vector?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="RktValLink" data-pltdoc="x">statement?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">groupings</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%252A%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">field/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">grouping/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">field/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fvector..rkt%2529._vectorof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">vectorof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">field/c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">grouping/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">grouping/c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">null</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">group-mode</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">preserve-null</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">list</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">null</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#25191;&#34892;&#19968;&#20010; SQL &#26597;&#35810;,&#35813;&#26597;&#35810;&#24517;&#39035;&#20135;&#29983;&#34892;,&#24182;&#36820;&#22238;&#26597;&#35810;&#30340;&#34892;&#21015;&#34920;(&#20316;&#20026;&#21521;&#37327;)&#12290;</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-rows%29%29" class="RktValLink" data-pltdoc="x">query-rows</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select * from the_numbers where n = $1"</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(#(2 "company"))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-rows%29%29" class="RktValLink" data-pltdoc="x">query-rows</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktVal">"select 17"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(#(17))</span></p></td></tr></table></blockquote></div></p><p>&#22914;&#26524; <span class="RktVar">groupings</span> &#19981;&#26159;&#31354;&#30340;,&#20854;&#32467;&#26524;&#19982;&#22312;&#32467;&#26524;&#34892;&#19978;&#35843;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._group-rows%29%29" class="RktValLink" data-pltdoc="x">group-rows</a></span> &#30340;&#32467;&#26524;&#30456;&#21516;&#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._query-list))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValDef RktValLink" data-pltdoc="x">query-list</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="RktValLink" data-pltdoc="x">statement?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#25191;&#34892;&#19968;&#20010; SQL &#26597;&#35810;,&#35813;&#26597;&#35810;&#24517;&#39035;&#20135;&#29983;&#27491;&#22909;&#26159;&#19968;&#21015;&#30340;&#34892;,&#24182;&#36820;&#22238;&#26597;&#35810;&#30340;&#20540;&#30340;&#21015;&#34920;&#12290;</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktVal">"select n from the_numbers where n &lt; 2"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(0 1)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktVal">"select 'hello'"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'("hello")</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._query-row))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-row%29%29" class="RktValDef RktValLink" data-pltdoc="x">query-row</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=vectors.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._vector%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">vector?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="RktValLink" data-pltdoc="x">statement?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#25191;&#34892;&#19968;&#20010; SQL &#26597;&#35810;,&#35813;&#26597;&#35810;&#24517;&#39035;&#20135;&#29983;&#31934;&#30830;&#30340;&#19968;&#34892;,&#24182;&#23558;&#20854;(&#21333;&#19968;)&#34892;&#32467;&#26524;&#20316;&#20026;&#19968;&#20010;&#21521;&#37327;&#36820;&#22238;&#12290;</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-row%29%29" class="RktValLink" data-pltdoc="x">query-row</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select * from the_numbers where n = $1"</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'#(2 "company")</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-row%29%29" class="RktValLink" data-pltdoc="x">query-row</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select min(n), max(n) from the_numbers"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'#(0 3)</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._query-maybe-row))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-maybe-row%29%29" class="RktValDef RktValLink" data-pltdoc="x">query-maybe-row</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=vectors.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._vector%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">vector?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="RktValLink" data-pltdoc="x">statement?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#19982; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-row%29%29" class="RktValLink" data-pltdoc="x">query-row</a></span> &#31867;&#20284;,&#20294;&#35813;&#26597;&#35810;&#21487;&#33021;&#20135;&#29983;&#38646;&#34892;;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;,&#36820;&#22238; <span class="RktVal">#f</span> &#12290;</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-maybe-row%29%29" class="RktValLink" data-pltdoc="x">query-maybe-row</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select * from the_numbers where n = $1"</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-maybe-row%29%29" class="RktValLink" data-pltdoc="x">query-maybe-row</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktVal">"select 17"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'#(17)</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._query-value))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValDef RktValLink" data-pltdoc="x">query-value</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="RktValLink" data-pltdoc="x">statement?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#25191;&#34892;&#19968;&#20010; SQL &#26597;&#35810;,&#35813;&#26597;&#35810;&#24517;&#39035;&#20135;&#29983;&#31934;&#30830;&#21040;&#19968;&#21015;&#30340;&#34892;,&#24182;&#36820;&#22238;&#20854;&#21333;&#19968;&#20540;&#30340;&#32467;&#26524;&#12290;</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select timestamp 'epoch'"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(sql-timestamp 1970 1 1 0 0 0 0 #f)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select d from the_numbers where n = $1"</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"a crowd"</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._query-maybe-value))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-maybe-value%29%29" class="RktValDef RktValLink" data-pltdoc="x">query-maybe-value</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="RktValLink" data-pltdoc="x">statement?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#19982; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span> &#31867;&#20284;,&#20294;&#35813;&#26597;&#35810;&#21487;&#33021;&#20135;&#29983;&#38646;&#34892;;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;,&#23558;&#36820;&#22238; <span class="RktVal">#f</span> &#12290;</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-maybe-value%29%29" class="RktValLink" data-pltdoc="x">query-maybe-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select d from the_numbers where n = $1"</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-maybe-value%29%29" class="RktValLink" data-pltdoc="x">query-maybe-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktVal">"select count(*) from the_numbers"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">4</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._in-query))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="RktValDef RktValLink" data-pltdoc="x">in-query</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">connection</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">stmt</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:fetch</span><span class="hspace">&nbsp;</span><span class="RktVar">fetch-size</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:group</span><span class="hspace">&nbsp;</span><span class="RktVar">groupings</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:group-mode</span><span class="hspace">&nbsp;</span><span class="RktVar">group-mode</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=sequences.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._sequence%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">sequence?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="RktValLink" data-pltdoc="x">statement?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fetch-size</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">groupings</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%252A%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">field/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">grouping/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">field/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fvector..rkt%2529._vectorof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">vectorof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">field/c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">grouping/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">grouping/c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">null</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">group-mode</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">preserve-null</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">list</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">null</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#25191;&#34892;&#19968;&#20010; SQL &#26597;&#35810;,&#35813;&#26597;&#35810;&#24517;&#39035;&#20135;&#29983;&#34892;,&#24182;&#36820;&#22238;&#19968;&#20010;&#24207;&#21015;&#12290;&#24207;&#21015;&#20013;&#30340;&#27599;&#19968;&#27493;&#20135;&#29983;&#30340;&#20540;&#19982;&#34892;&#30340;&#21015;&#25968;&#19968;&#26679;&#22810;&#12290;</div></p><p>&#22914;&#26524; <span class="RktVar">fetch-size</span> &#26159; <span class="RktVal">+inf.0</span>,&#37027;&#20040;&#24403;&#24207;&#21015;&#34987;&#21019;&#24314;&#26102;,&#25152;&#26377;&#30340;&#34892;&#37117;&#34987;&#21462;&#36208;&#12290;
&#22914;&#26524; <span class="RktVar">fetch-size</span> &#26159;&#26377;&#38480;&#30340;,&#37027;&#20040;&#23601;&#20250;&#21019;&#24314;&#19968;&#20010; <a name="(tech._cursor)"></a><span style="font-style: italic">cursor</span> ,
 &#24182;&#19988;&#27599;&#27425;&#37117;&#20250;&#33719;&#21462; <span class="RktVar">fetch-size</span> &#30340;&#34892;,&#20801;&#35768;&#22788;&#29702;&#19982;&#26816;&#32034;&#20132;&#38169;&#36827;&#34892;&#12290;
&#22312;&#19968;&#20123;&#25968;&#25454;&#24211;&#31995;&#32479;&#20013;,&#32467;&#26463;&#19968;&#20010;&#20107;&#21153;&#20250;&#38544;&#21547;&#22320;&#20851;&#38381;&#25152;&#26377;&#25171;&#24320;&#30340;&#28216;&#26631;;&#35797;&#22270;&#33719;&#21462;&#26356;&#22810;&#30340;&#34892;&#21487;&#33021;&#20250;&#22833;&#36133;&#12290;
&#22312; PostgreSQL &#20013;,&#28216;&#26631;&#21482;&#33021;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;&#34987;&#25171;&#24320;&#12290;</p><p>&#22914;&#26524; <span class="RktVar">groupings</span> &#19981;&#26159;&#31354;&#30340;,&#37027;&#20040;&#32467;&#26524;&#19982;&#22312;&#32467;&#26524;&#34892;&#19978;&#35843;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._group-rows%29%29" class="RktValLink" data-pltdoc="x">group-rows</a></span> &#30340;&#32467;&#26524;&#26159;&#19968;&#26679;&#30340;&#12290;
 &#22914;&#26524; <span class="RktVar">groupings</span> &#19981;&#26159;&#31354;&#30340;,&#37027;&#20040; <span class="RktVar">fetch-size</span> &#24517;&#39035;&#26159; <span class="RktVal">+inf.0</span>;
 &#21542;&#21017;,&#20250;&#20135;&#29983;&#19968;&#20010;&#24322;&#24120;&#12290;</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%252Flist%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">for/list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="RktValLink" data-pltdoc="x">in-query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select n from the_numbers where n &lt; 2"</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'(0 1)</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._call-with-transaction%29%29" class="RktValLink" data-pltdoc="x">call-with-transaction</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">for</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="RktValLink" data-pltdoc="x">in-query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select * from the_numbers where n &lt; $1"</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:fetch</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"~a: ~a\n"</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">0: nothing</span></p></td></tr><tr><td><p><span class="RktOut">1: the loneliest number</span></p></td></tr><tr><td><p><span class="RktOut">2: company</span></p></td></tr><tr><td><p><span class="RktOut">3: a crowd</span></p></td></tr></table></td></tr></table></blockquote></div></p><p>&#24403; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="RktValLink" data-pltdoc="x">in-query</a></span> &#24212;&#29992;&#31243;&#24207;&#30452;&#25509;&#20986;&#29616;&#22312; <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">for</a></span> &#21477;&#20013;&#26102;,&#23427;&#21487;&#20197;&#25552;&#20379;&#26356;&#22909;&#30340;&#24615;&#33021;&#12290;
&#27492;&#22806;,&#23427;&#21487;&#20197;&#26681;&#25454;&#23376;&#21477;&#24038;&#20391;&#30340;&#21464;&#37327;&#25968;&#37327;,&#23545;&#26597;&#35810;&#36820;&#22238;&#30340;&#21015;&#25968;&#36827;&#34892;&#26356;&#20005;&#26684;&#30340;&#26816;&#26597;:</p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">for</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._in-query%29%29" class="RktValLink" data-pltdoc="x">in-query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select * from the_numbers"</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktErr">in-query: query returned wrong number of columns</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">statement: "select * from the_numbers"</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">expected: 1</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">got: 2</span></p></td></tr></table></blockquote></div></p><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;一般查询支持&quot;">3.3<tt>&nbsp;</tt><a name="(part._~e4~b8~80~e8~88~ac~e6~9f~a5~e8~af~a2~e6~94~af~e6~8c~81)"></a>&#19968;&#33324;&#26597;&#35810;&#25903;&#25345;</h4><p>&#19968;&#33324;&#30340;&#26597;&#35810;&#32467;&#26524;&#26159;&#19968;&#20010; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._simple-result%29%29" class="RktValLink" data-pltdoc="x">simple-result</a></span> &#25110;&#19968;&#20010; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-result%29%29" class="RktValLink" data-pltdoc="x">rows-result</a></span> &#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._db/base..rkt)._simple-result-info))"></a><a name="(def._((lib._db/base..rkt)._simple-result~3f))"></a><a name="(def._((lib._db/base..rkt)._struct~3asimple-result))"></a><a name="(def._((lib._db/base..rkt)._simple-result))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._simple-result%29%29" class="RktValDef RktValLink" data-pltdoc="x">simple-result</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">info</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">info</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._cons%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">&#20195;&#34920;&#19968;&#20010;&#19981;&#36820;&#22238;&#20851;&#31995;&#30340; SQL &#35821;&#21477;&#30340;&#32467;&#26524;,&#27604;&#22914; <span class="stt">INSERT</span> &#25110; <span class="stt">DELETE</span> &#35821;&#21477;&#12290;</div></p><p><span class="RktSym">info</span> &#23383;&#27573;&#26159;&#19968;&#20010;&#20851;&#32852;&#21015;&#34920;,&#20294;&#26159;&#23427;&#30340;&#20869;&#23481;&#26681;&#25454;&#25968;&#25454;&#24211;&#31995;&#32479;&#30340;&#19981;&#21516;&#32780;&#19981;&#21516;,
 &#22312;&#36825;&#20010;&#24211;&#30340;&#26410;&#26469;&#29256;&#26412;&#20013;&#21487;&#33021;&#20250;&#21457;&#29983;&#21464;&#21270;(&#29978;&#33267;&#26159;&#26032;&#30340;&#27425;&#35201;&#29256;&#26412;)&#12290;
&#22312;&#22810;&#20010;&#25968;&#25454;&#24211;&#31995;&#32479;&#20013;,&#25903;&#25345;&#20197;&#19979;&#38190;:</p><ul><li><p><span class="RktVal">'</span><span class="RktVal">insert-id</span>: &#22914;&#26524;&#35813;&#20540;&#26159;&#19968;&#20010;&#27491;&#25972;&#25968;,&#35828;&#26126;&#35813;&#35821;&#21477;&#26159;&#19968;&#20010; <span class="stt">INSERT</span> &#35821;&#21477;,
   &#35813;&#20540;&#26159;&#25554;&#20837;&#30340;&#34892;&#30340;&#31995;&#32479;&#29305;&#23450;&#26631;&#35782;&#31526;&#12290;
&#23545;&#20110; PostgreSQL &#26469;&#35828;,&#22914;&#26524;&#34920;&#26377; OID &#30340;&#35805;,
   &#36825;&#20010;&#20540;&#26159;&#35813;&#34892;&#30340; OID(&#20851;&#20110;&#21478;&#19968;&#20010;&#36873;&#25321;,&#35831;&#30475; <span class="stt">INSERT ... RETURNING</span> &#35821;&#21477;)&#12290;
&#23545;&#20110; MySQL &#26469;&#35828;,&#35813;&#20540;&#19982;
<a href="http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id">last_insert_id</a>
&#20989;&#25968;&#30340;&#32467;&#26524;&#30456;&#21516;,&#21363;&#35813;&#34892;&#30340; <span class="stt">AUTO_INCREMENT</span> &#23383;&#27573;&#30340;&#20540;&#12290;
 &#22914;&#26524;&#27809;&#26377;&#36825;&#26679;&#30340;&#23383;&#27573;,&#20540;&#26159; <span class="RktVal">#f</span> &#12290;
   &#23545;&#20110; SQLite &#26469;&#35828;,&#36825;&#20010;&#20540;&#19982;
<a href="http://www.sqlite.org/lang_corefunc.html#last_insert_rowid">last_insert_rowid</a>
&#20989;&#25968;&#30340;&#32467;&#26524;&#30456;&#21516;,&#21363;&#25554;&#20837;&#34892;&#30340;
<a href="http://www.sqlite.org/lang_createtable.html#rowid">ROWID</a> &#12290;</p></li><li><p><span class="RktVal">'</span><span class="RktVal">affected-rows</span>: &#30001; <span class="stt">INSERT</span> &#35821;&#21477;&#25554;&#20837;&#30340;,&#30001; <span class="stt">UPDATE</span> &#35821;&#21477;&#20462;&#25913;&#30340;,
   &#25110;&#30001; <span class="stt">DELETE</span> &#35821;&#21477;&#21024;&#38500;&#30340;&#34892;&#30340;&#25968;&#37327;(&#38750;&#36127;&#25972;&#25968;)&#12290;
&#21482;&#26377;&#30452;&#25509;&#21463;&#24433;&#21709;&#30340;&#34892;&#34987;&#35745;&#31639;&#22312;&#20869;;&#30001;&#20110;&#35302;&#21457;&#22120;&#25110;&#23436;&#25972;&#24615;&#32422;&#26463;&#21160;&#20316;&#32780;&#21463;&#24433;&#21709;&#30340;&#34892;&#19981;&#34987;&#35745;&#31639;&#22312;&#20869;&#12290;</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._db/base..rkt)._rows-result-rows))"></a><a name="(def._((lib._db/base..rkt)._rows-result-headers))"></a><a name="(def._((lib._db/base..rkt)._rows-result~3f))"></a><a name="(def._((lib._db/base..rkt)._struct~3arows-result))"></a><a name="(def._((lib._db/base..rkt)._rows-result))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-result%29%29" class="RktValDef RktValLink" data-pltdoc="x">rows-result</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">headers</span><span class="stt"> </span><span class="RktSym">rows</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">headers</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">rows</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=vectors.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._vector%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">vector?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">&#20195;&#34920;&#20135;&#29983;&#20851;&#31995;&#30340;SQL&#35821;&#21477;&#30340;&#32467;&#26524;,&#20363;&#22914; <span class="stt">SELECT</span> &#26597;&#35810;&#12290;</div></p><p><span class="RktSym">headers</span> &#23383;&#27573;&#26159;&#19968;&#20010;&#21015;&#34920;,&#20854;&#38271;&#24230;&#26159;&#32467;&#26524;&#34892;&#30340;&#21015;&#25968;&#12290;
&#27599;&#20010;&#22836;&#36890;&#24120;&#26159;&#19968;&#20010;&#21253;&#21547;&#21015;&#30340;&#20449;&#24687;&#30340;&#20851;&#32852;&#21015;&#34920;,&#20294;&#26159;&#19981;&#35201;&#20381;&#36182;&#23427;&#30340;&#20869;&#23481;;
 &#23427;&#26681;&#25454;&#25968;&#25454;&#24211;&#31995;&#32479;&#30340;&#19981;&#21516;&#32780;&#21464;&#21270;,&#24182;&#19988;&#21487;&#33021;&#22312;&#36825;&#20010;&#24211;&#30340;&#26410;&#26469;&#29256;&#26412;&#20013;&#25913;&#21464;(&#29978;&#33267;&#26032;&#30340;&#27425;&#35201;&#29256;&#26412;)&#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._query))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query%29%29" class="RktValDef RktValLink" data-pltdoc="x">query</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._simple-result~3f%29%29" class="RktValLink" data-pltdoc="x">simple-result?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-result~3f%29%29" class="RktValLink" data-pltdoc="x">rows-result?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="RktValLink" data-pltdoc="x">statement?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#25191;&#34892;&#19968;&#20010;&#26597;&#35810;,&#36820;&#22238;&#19968;&#20010;&#25551;&#36848;&#32467;&#26524;&#30340;&#32467;&#26500;&#12290;
&#19982;&#26356;&#19987;&#19994;&#30340;&#26597;&#35810;&#20989;&#25968;&#19981;&#21516;, <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query%29%29" class="RktValLink" data-pltdoc="x">query</a></span> &#26082;&#25903;&#25345;&#36820;&#22238;&#34892;,&#20063;&#25903;&#25345;&#21482;&#36820;&#22238;&#25928;&#26524;&#30340;&#26597;&#35810;&#12290;</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._group-rows))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._group-rows%29%29" class="RktValDef RktValLink" data-pltdoc="x">group-rows</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">result</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:group</span><span class="hspace">&nbsp;</span><span class="RktVar">groupings</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:group-mode</span><span class="hspace">&nbsp;</span><span class="RktVar">group-mode</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-result~3f%29%29" class="RktValLink" data-pltdoc="x">rows-result?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">result</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-result~3f%29%29" class="RktValLink" data-pltdoc="x">rows-result?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">groupings</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%252A%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">field/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">grouping/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">field/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fvector..rkt%2529._vectorof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">vectorof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">field/c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">grouping/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">grouping/c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">group-mode</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">preserve-null</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">list</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">null</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#22914;&#26524; <span class="RktVar">groupings</span> &#26159;&#19968;&#20010;&#21521;&#37327;,&#20854;&#20803;&#32032;&#24517;&#39035;&#26159; <span class="RktVar">result</span> &#20013;&#23383;&#27573;&#30340;&#21517;&#31216;,
 <span class="RktVar">result</span> &#30340;&#34892;&#23558;&#20351;&#29992;&#32473;&#23450;&#30340;&#23383;&#27573;&#36827;&#34892;&#37325;&#26032;&#20998;&#32452;&#12290;
 &#27599;&#20010;&#20998;&#32452;&#30340;&#34892;&#21253;&#21547; N+1 &#20010;&#23383;&#27573;;&#21069; N &#20010;&#23383;&#27573;&#26159; <span class="RktVar">groupings</span> ,&#26368;&#21518;&#19968;&#20010;&#23383;&#27573;&#26159;&#20854;&#20313;&#23383;&#27573;&#30340; "&#21097;&#20313;&#34892;" &#30340;&#21015;&#34920;&#12290;
 &#38500;&#38750; <span class="RktVar">group-mode</span> &#21253;&#21547; <span class="RktVal">'</span><span class="RktVal">preserve-null</span>,
 &#21542;&#21017;&#25152;&#26377; NULL &#30340;&#21097;&#20313;&#34892;&#20250;&#34987;&#20002;&#24323;(&#20026;&#20102;&#26041;&#20415;&#22788;&#29702; <span class="stt">OUTER JOIN</span> &#30340;&#32467;&#26524;)&#12290;
 &#22914;&#26524; <span class="RktVar">group-mode</span> &#21253;&#21547; <span class="RktVal">'</span><span class="RktVal">list</span>, &#21017;&#24517;&#39035;&#26377;&#19968;&#20010;&#21097;&#20313;&#23383;&#27573;,
 &#24182;&#19988;&#23427;&#30340;&#20540;&#22312;&#27809;&#26377;&#21521;&#37327;&#21253;&#35013;&#30340;&#24773;&#20917;&#19979;&#34987;&#21253;&#25324;&#22312;&#20869;(&#19982; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span> &#31867;&#20284;)&#12290;</div></p><p>&#21442;&#35265; <a href="using-db.html#%28part._dbperf-n%2B1%29" data-pltdoc="x">N+1 &#36873;&#25321;&#38382;&#39064;</a> &#12290;</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">vehicles-result</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-result%29%29" class="RktValLink" data-pltdoc="x">rows-result</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">"type"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">"maker"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">"model"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"car"</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"honda"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"civic"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"car"</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"ford"</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"focus"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"car"</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"ford"</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"pinto"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"bike"</span><span class="hspace">&nbsp;</span><span class="RktVal">"giant"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"boulder"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"bike"</span><span class="hspace">&nbsp;</span><span class="RktVal">"schwinn"</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktSym"><a href="sql-types.html#%28def._%28%28lib._db%2Fbase..rkt%29._sql-null%29%29" class="RktValLink" data-pltdoc="x">sql-null</a></span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._group-rows%29%29" class="RktValLink" data-pltdoc="x">group-rows</a></span><span class="hspace">&nbsp;</span><span class="RktSym">vehicles-result</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:group</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"type"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">(rows-result</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">'(((name . "type"))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">((name . "grouped") (grouped ((name . "maker")) ((name . "model")))))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">'(#("car" (#("honda" "civic") #("ford" "focus") #("ford" "pinto")))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#("bike" (#("giant" "boulder") #("schwinn" #&lt;sql-null&gt;)))))</span></p></td></tr></table></td></tr></table></blockquote></div></p><p>&#20998;&#32452;&#21518;&#30340;&#26368;&#32456;&#21015;&#34987;&#21629;&#21517;&#20026; <span class="RktVal">"grouped"</span> &#12290;</p><p><span class="RktVar">groupings</span> &#21442;&#25968;&#20063;&#21487;&#20197;&#26159;&#19968;&#20010;&#21521;&#37327;&#21015;&#34920;;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;,&#20998;&#32452;&#36807;&#31243;&#20250;&#23545;&#27599;&#19968;&#32452;&#20998;&#32452;&#23383;&#27573;&#37325;&#22797;&#36827;&#34892;&#12290;
 &#20998;&#32452;&#23383;&#27573;&#24517;&#39035;&#26159;&#19981;&#21516;&#30340;&#12290;</p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._group-rows%29%29" class="RktValLink" data-pltdoc="x">group-rows</a></span><span class="hspace">&nbsp;</span><span class="RktSym">vehicles-result</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:group</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"type"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"maker"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:group-mode</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">list</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">(rows-result</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">'(((name . "type"))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">((name . "grouped")</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(grouped</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">((name . "maker"))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">((name . "grouped") (grouped ((name . "model")))))))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">'(#("car" (#("honda" ("civic")) #("ford" ("focus" "pinto"))))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#("bike" (#("giant" ("boulder")) #("schwinn" ())))))</span></p></td></tr></table></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._rows-~3edict))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-~3edict%29%29" class="RktValDef RktValLink" data-pltdoc="x">rows-&gt;dict</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">result</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:key</span><span class="hspace">&nbsp;</span><span class="RktVar">key-field/s</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:value</span><span class="hspace">&nbsp;</span><span class="RktVar">value-field/s</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:value-mode</span><span class="hspace">&nbsp;</span><span class="RktVar">value-mode</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=dicts.html%23%2528def._%2528%2528lib._racket%252Fdict..rkt%2529._dict%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">dict?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">result</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-result~3f%29%29" class="RktValLink" data-pltdoc="x">rows-result?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">key-field/s</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">field/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">field/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fvector..rkt%2529._vectorof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">vectorof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">field/c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">value-field/s</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">field/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">field/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fvector..rkt%2529._vectorof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">vectorof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">field/c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">value-mode</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">preserve-null</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">null</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#21019;&#24314;&#19968;&#20010;&#26144;&#23556; <span class="RktVar">key-field/s</span> &#21040; <span class="RktVar">value-field/s</span> &#30340;&#23383;&#20856;&#12290;
&#22914;&#26524; <span class="RktVar">key-field/s</span> &#26159;&#19968;&#20010;&#21333;&#29420;&#30340;&#23383;&#27573;&#21517;&#25110;&#32034;&#24341;,&#38190;&#26159;&#23383;&#27573;&#20540;;
 &#22914;&#26524; <span class="RktVar">key-field/s</span> &#26159;&#19968;&#20010;&#21521;&#37327;,&#38190;&#26159;&#23383;&#27573;&#20540;&#30340;&#21521;&#37327;&#12290;
&#23545;&#20110; <span class="RktVar">value-field/s</span> &#20063;&#26159;&#22914;&#27492;&#12290;</div></p><p>&#22914;&#26524; <span class="RktVar">value-mode</span> &#21253;&#21547; <span class="RktVal">'</span><span class="RktVal">list</span>, &#27599;&#20010;&#38190;&#30340;&#20540;&#23558;&#34987;&#32047;&#31215;;&#21542;&#21017;,&#27599;&#20010;&#38190;&#24517;&#39035;&#26377;&#26368;&#22810;&#19968;&#20010;&#20540;&#12290;
 &#38500;&#38750; <span class="RktVar">value-mode</span> &#21253;&#21547; <span class="RktVal">'</span><span class="RktVal">preserve-null</span>,
 &#21542;&#21017;&#30001;&#25152;&#26377; <span class="RktSym"><a href="sql-types.html#%28def._%28%28lib._db%2Fbase..rkt%29._sql-null~3f%29%29" class="RktValLink" data-pltdoc="x">sql-null?</a></span> &#32452;&#25104;&#30340;&#20540;&#23558;&#34987;&#21024;&#38500;&#12290;</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-~3edict%29%29" class="RktValLink" data-pltdoc="x">rows-&gt;dict</a></span><span class="hspace">&nbsp;</span><span class="RktSym">vehicles-result</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:key</span><span class="hspace">&nbsp;</span><span class="RktVal">"model"</span><span class="hspace">&nbsp;</span><span class="RktPn">#:value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"type"</span><span class="hspace">&nbsp;</span><span class="RktVal">"maker"</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">'#hash(("focus" . #("car" "ford"))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">("civic" . #("car" "honda"))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(#&lt;sql-null&gt; . #("bike" "schwinn"))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">("boulder" . #("bike" "giant"))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">("pinto" . #("car" "ford")))</span></p></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rows-~3edict%29%29" class="RktValLink" data-pltdoc="x">rows-&gt;dict</a></span><span class="hspace">&nbsp;</span><span class="RktSym">vehicles-result</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:key</span><span class="hspace">&nbsp;</span><span class="RktVal">"maker"</span><span class="hspace">&nbsp;</span><span class="RktPn">#:value</span><span class="hspace">&nbsp;</span><span class="RktVal">"model"</span><span class="hspace">&nbsp;</span><span class="RktPn">#:value-mode</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">list</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">'#hash(("ford" . ("focus" "pinto"))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">("giant" . ("boulder"))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">("honda" . ("civic"))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">("schwinn" . ()))</span></p></td></tr></table></td></tr></table></blockquote></div></p><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;预备语句&quot;">3.4<tt>&nbsp;</tt><a name="(part._~e9~a2~84~e5~a4~87~e8~af~ad~e5~8f~a5)"></a>&#39044;&#22791;&#35821;&#21477;</h4><p>&#19968;&#20010; <a name="(tech._prepared._statement)"></a><span style="font-style: italic">prepared statement</span> &#26159;&#35843;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepare%29%29" class="RktValLink" data-pltdoc="x">prepare</a></span> &#30340;&#32467;&#26524;&#12290;</p><p>&#20219;&#20309;&#19982;&#20934;&#22791;&#22909;&#30340;&#35821;&#21477;&#30456;&#20851;&#30340;&#26381;&#21153;&#22120;&#31471;&#25110;&#26412;&#22320;&#24211;&#36164;&#28304;&#37117;&#20250;&#22312;&#20934;&#22791;&#22909;&#30340;&#35821;&#21477;&#34987;&#22403;&#22334;&#22238;&#25910;&#25110;&#25317;&#26377;&#35813;&#35821;&#21477;&#30340;&#36830;&#25509;&#34987;&#20851;&#38381;&#26102;&#34987;&#37322;&#25918;;
&#20934;&#22791;&#22909;&#30340;&#35821;&#21477;&#19981;&#38656;&#35201;(&#20063;&#19981;&#33021;)&#34987;&#26126;&#30830;&#20851;&#38381;&#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._prepare))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepare%29%29" class="RktValDef RktValLink" data-pltdoc="x">prepare</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span><span class="RktVar">stmt</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepared-statement~3f%29%29" class="RktValLink" data-pltdoc="x">prepared-statement?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._virtual-statement~3f%29%29" class="RktValLink" data-pltdoc="x">virtual-statement?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">&#20934;&#22791;&#19968;&#20010;&#35821;&#21477;&#12290;
&#25152;&#20135;&#29983;&#30340; <a href="#%28tech._prepared._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">prepared statement</span></a> &#19982;&#20934;&#22791;&#23427;&#30340;&#36830;&#25509;&#30456;&#32852;&#31995;;&#35797;&#22270;&#29992;&#21478;&#19968;&#20010;&#36830;&#25509;&#26469;&#25191;&#34892;&#23427;&#23558;&#35302;&#21457;&#19968;&#20010;&#24322;&#24120;&#12290;
&#20934;&#22791;&#22909;&#30340;&#35821;&#21477;&#23545;&#20854;&#36830;&#25509;&#30340;&#20445;&#25252;&#24456;&#24369;;&#23545;&#20934;&#22791;&#22909;&#30340;&#35821;&#21477;&#30340;&#24341;&#29992;&#23558;&#19981;&#20250;&#20351;&#36830;&#25509;&#19981;&#34987;&#22403;&#22334;&#22238;&#25910;&#12290;</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._prepared-statement~3f))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepared-statement~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">prepared-statement?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#22914;&#26524; <span class="RktVar">x</span> &#26159;&#19968;&#20010;&#30001; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepare%29%29" class="RktValLink" data-pltdoc="x">prepare</a></span> &#21019;&#24314;&#30340; <a href="#%28tech._prepared._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">prepared statement</span></a>,
&#36820;&#22238; <span class="RktVal">#t</span> ,&#21542;&#21017;&#36820;&#22238; <span class="RktVal">#f</span> &#12290;</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._prepared-statement-parameter-types))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepared-statement-parameter-types%29%29" class="RktValDef RktValLink" data-pltdoc="x">prepared-statement-parameter-types</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pst</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._list%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepared-statement~3f%29%29" class="RktValLink" data-pltdoc="x">prepared-statement?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#36820;&#22238;&#19968;&#20010;&#21015;&#34920;,&#20854;&#20013;&#26377;&#19968;&#20010;&#20803;&#32032;&#20195;&#34920;&#20934;&#22791;&#22909;&#30340;&#35821;&#21477;&#30340;&#27599;&#20010;&#21442;&#25968;&#12290;&#27599;&#20010;&#20803;&#32032;&#26412;&#36523;&#26159;&#19968;&#20010;&#22914;&#19979;&#24418;&#24335;&#30340;&#21015;&#34920;:</div></p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVar">supported?</span><span class="hspace">&nbsp;</span><span class="RktVar">type</span><span class="hspace">&nbsp;</span><span class="RktVar">typeid</span><span class="RktPn">)</span></p></blockquote><p><span class="RktVar">supported?</span> &#23383;&#27573;&#34920;&#31034;&#35813;&#31867;&#22411;&#26159;&#21542;&#34987;&#36825;&#20010;&#24211;&#25152;&#25903;&#25345;;
 <span class="RktVar">type</span> &#23383;&#27573;&#26159;&#19968;&#20010;&#31526;&#21495;,&#23545;&#24212;&#20110; <a href="sql-types.html#%28part._db-types%29" data-pltdoc="x">SQL Type &#31867;&#22411;</a> &#20013;&#30340;&#19968;&#20010;&#34920;&#30340;&#26465;&#30446;;
 <span class="RktVar">typeid</span> &#23383;&#27573;&#26159;&#19968;&#20010;&#31995;&#32479;&#29305;&#23450;&#30340;&#31867;&#22411;&#26631;&#35782;&#31526;&#12290;
&#22312;&#26412;&#24211;&#30340;&#26410;&#26469;&#29256;&#26412;&#20013;,&#31867;&#22411;&#25551;&#36848;&#21015;&#34920;&#30340;&#26684;&#24335;&#21487;&#33021;&#20250;&#34987;&#25193;&#23637;,&#22686;&#21152;&#26356;&#22810;&#30340;&#20449;&#24687;&#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._prepared-statement-result-types))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepared-statement-result-types%29%29" class="RktValDef RktValLink" data-pltdoc="x">prepared-statement-result-types</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pst</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._list%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepared-statement~3f%29%29" class="RktValLink" data-pltdoc="x">prepared-statement?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#22914;&#26524; <span class="RktVar">pst</span> &#26159;&#19968;&#20010;&#36820;&#22238;&#34892;&#30340;&#35821;&#21477;(&#20363;&#22914;, <span class="stt">SELECT</span>),
 &#36820;&#22238;&#19968;&#20010;&#22914;&#19978;&#25152;&#36848;&#30340;&#31867;&#22411;&#25551;&#36848;&#21015;&#34920;,&#30830;&#23450;&#32467;&#26524;&#21015;&#30340; SQL &#31867;&#22411;(&#25110;&#20266;&#31867;&#22411;)&#12290;
&#22914;&#26524; <span class="RktVar">pst</span> &#19981;&#26159;&#19968;&#20010;&#36820;&#22238;&#34892;&#30340;&#35821;&#21477;,&#35813;&#20989;&#25968;&#36820;&#22238;&#31354;&#21015;&#34920;&#12290;</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._bind-prepared-statement))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._bind-prepared-statement%29%29" class="RktValDef RktValLink" data-pltdoc="x">bind-prepared-statement</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pst</span><span class="hspace">&nbsp;</span><span class="RktVar">params</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement-binding~3f%29%29" class="RktValLink" data-pltdoc="x">statement-binding?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepared-statement~3f%29%29" class="RktValLink" data-pltdoc="x">prepared-statement?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">params</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">&#21019;&#24314;&#19968;&#20010;&#35821;&#21477;&#32465;&#23450;&#20540;,&#23558; <span class="RktVar">pst</span> &#19982; <span class="RktVar">params</span> &#37197;&#23545;,params &#26159;&#19968;&#20010;&#21442;&#25968;&#21015;&#34920;&#12290;
&#35813;&#32467;&#26524;&#21487;&#20197;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query%29%29" class="RktValLink" data-pltdoc="x">query</a></span> &#25110;&#20854;&#20182;&#20219;&#20309;&#26597;&#35810;&#20989;&#25968;&#26469;&#25191;&#34892;,&#20294;&#23427;&#24517;&#39035;&#19982;&#21019;&#24314; <span class="RktVar">pst</span> &#30340;&#21516;&#19968;&#36830;&#25509;&#26469;&#20351;&#29992;&#12290;</div></p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%252A%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">get-name-pst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prepare%29%29" class="RktValLink" data-pltdoc="x">prepare</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select d from the_numbers where n = $1"</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">get-name2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._bind-prepared-statement%29%29" class="RktValLink" data-pltdoc="x">bind-prepared-statement</a></span><span class="hspace">&nbsp;</span><span class="RktSym">get-name-pst</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">get-name3</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._bind-prepared-statement%29%29" class="RktValLink" data-pltdoc="x">bind-prepared-statement</a></span><span class="hspace">&nbsp;</span><span class="RktSym">get-name-pst</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktSym">get-name2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-value%29%29" class="RktValLink" data-pltdoc="x">query-value</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktSym">get-name3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'("company" "a crowd")</span></p></td></tr></table></blockquote></div></p><p>&#22823;&#22810;&#25968;&#26597;&#35810;&#20989;&#25968;&#38544;&#21547;&#22320;&#25191;&#34892;&#32465;&#23450;&#27493;&#39588;&#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._statement-binding~3f))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement-binding~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">statement-binding?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#22914;&#26524; <span class="RktVar">x</span> &#26159;&#19968;&#20010;&#30001; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._bind-prepared-statement%29%29" class="RktValLink" data-pltdoc="x">bind-prepared-statement</a></span> &#21019;&#24314;&#30340;&#35821;&#21477;,
&#36820;&#22238; <span class="RktVal">#t</span> ,&#21542;&#21017;&#36820;&#22238; <span class="RktVal">#f</span> &#12290;</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._virtual-statement))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._virtual-statement%29%29" class="RktValDef RktValLink" data-pltdoc="x">virtual-statement</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">gen</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._virtual-statement~3f%29%29" class="RktValLink" data-pltdoc="x">virtual-statement?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">gen</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._dbsystem~3f%29%29" class="RktValLink" data-pltdoc="x">dbsystem?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">&#21019;&#24314;&#19968;&#20010; <a name="(tech._virtual._statement)"></a><span style="font-style: italic">virtual statement</span>, <span class="RktVar">stmt</span>, &#23427;&#23553;&#35013;&#20102;&#36830;&#25509;&#21040;&#20934;&#22791;&#22909;&#30340;&#35821;&#21477;&#30340;&#24369;&#26144;&#23556;&#12290;
 &#24403;&#29992; <span class="RktVar">stmt</span> &#21644;&#19968;&#20010;&#36830;&#25509;&#35843;&#29992;&#19968;&#20010;&#26597;&#35810;&#20989;&#25968;&#26102;,&#20250;&#26597;&#35810;&#24369;&#21704;&#24076;,&#30475;&#26159;&#21542;&#24050;&#32463;&#20026;&#35813;&#36830;&#25509;&#20934;&#22791;&#20102;&#35821;&#21477;&#12290;
 &#22914;&#26524;&#26159;,&#21017;&#20351;&#29992;&#20934;&#22791;&#22909;&#30340;&#35821;&#21477;;&#21542;&#21017;,&#35821;&#21477;&#34987;&#20934;&#22791;&#24182;&#23384;&#20648;&#22312;&#34920;&#20013;&#12290;</div></p><p><span class="RktVar">gen</span> &#21442;&#25968;&#24517;&#39035;&#26159;&#19968;&#20010; SQL &#23383;&#31526;&#20018;&#25110;&#19968;&#20010;&#25509;&#21463;&#25968;&#25454;&#24211;&#31995;&#32479;&#23545;&#35937;&#24182;&#20135;&#29983;&#19968;&#20010; SQL &#23383;&#31526;&#20018;&#30340;&#20989;&#25968;&#12290;
 &#20989;&#25968;&#30340;&#21464;&#20307;&#20801;&#35768;&#20026;&#20351;&#29992;&#20013;&#30340;&#25968;&#25454;&#24211;&#31995;&#32479;&#21160;&#24577;&#22320;&#23450;&#21046; SQL &#35821;&#27861;&#12290;</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._virtual-statement%29%29" class="RktValLink" data-pltdoc="x">virtual-statement</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dbsys</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=case.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._case%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">case</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._dbsystem-name%29%29" class="RktValLink" data-pltdoc="x">dbsystem-name</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dbsys</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">postgresql</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"select n from the_numbers where n &lt; $1"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">sqlite3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"select n from the_numbers where n &lt; ?"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._else%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._error%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"unknown system"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktSym">pst</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(0 1 2)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query-list%29%29" class="RktValLink" data-pltdoc="x">query-list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">slc</span><span class="hspace">&nbsp;</span><span class="RktSym">pst</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(0 1 2)</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._virtual-statement~3f))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._virtual-statement~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">virtual-statement?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#22914;&#26524; <span class="RktVar">x</span> &#26159;&#19968;&#20010;&#30001; <a href="#%28tech._virtual._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">virtual statement</span></a> &#21019;&#24314;&#30340; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._virtual-statement%29%29" class="RktValLink" data-pltdoc="x">virtual-statement</a></span>,
&#21017;&#36820;&#22238; <span class="RktVal">#t</span> ,&#21542;&#21017;&#36820;&#22238; <span class="RktVal">#f</span> &#12290;</div></p><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;transactions&quot;">3.5<tt>&nbsp;</tt><a name="(part._transactions)"></a>&#20132;&#26131;</h4><p>&#26412;&#33410;&#25551;&#36848;&#30340;&#20989;&#25968;&#20026;&#20132;&#26131;&#25552;&#20379;&#20102;&#19968;&#20010;&#19968;&#33268;&#30340;&#25509;&#21475;&#12290;</p><p>&#19968;&#20010; <a name="(tech._managed._transaction)"></a><span style="font-style: italic">managed transaction</span> &#26159;&#36890;&#36807;
<span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._start-transaction%29%29" class="RktValLink" data-pltdoc="x">start-transaction</a></span> &#25110; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._call-with-transaction%29%29" class="RktValLink" data-pltdoc="x">call-with-transaction</a></span> &#21019;&#24314;&#30340;&#12290;
&#30456;&#21453;, <a name="(tech._unmanaged._transaction)"></a><span style="font-style: italic">unmanaged transaction</span> &#26159;&#36890;&#36807;&#35780;&#20272; SQL &#35821;&#21477;(&#22914; <span class="stt">START TRANSACTION</span> &#21019;&#24314;&#30340;&#12290;
<a name="(tech._nested._transaction)"></a><span style="font-style: italic">nested transaction</span> &#26159;&#22312;&#29616;&#26377;&#20132;&#26131;&#30340;&#33539;&#22260;&#20869;&#21019;&#24314;&#30340;&#20132;&#26131;&#12290;
&#22914;&#26524;&#19968;&#20010;&#23884;&#22871;&#30340;&#20107;&#21153;&#34987;&#25552;&#20132;,&#23427;&#30340;&#21464;&#21270;&#20250;&#34987;&#25512;&#24191;&#21040;&#21253;&#22260;&#30340;&#20107;&#21153;&#20013;,&#32780;&#36825;&#20010;&#20107;&#21153;&#26412;&#36523;&#21487;&#33021;&#34987;&#25552;&#20132;&#25110;&#22238;&#28378;&#12290;
 &#22914;&#26524;&#19968;&#20010;&#23884;&#22871;&#30340;&#20107;&#21153;&#34987;&#22238;&#28378;,&#23427;&#30340;&#21464;&#21270;&#34987;&#20002;&#24323;,&#20294;&#26159;&#21253;&#22260;&#30340;&#20107;&#21153;&#20173;&#28982;&#20445;&#25345;&#24320;&#25918;&#12290;
 &#23884;&#22871;&#20107;&#21153;&#36890;&#36807; <span class="stt">SAVEPOINT</span>, <span class="stt">RELEASE SAVEPOINT</span> &#21644; <span class="stt">ROLLBACK TO SAVEPOINT</span> &#23454;&#29616;&#12290;</p><p>ODBC &#36830;&#25509;&#24517;&#39035;&#23436;&#20840;&#20351;&#29992; <a href="#%28tech._managed._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">managed transactions</span></a>;&#20351;&#29992;&#25913;&#21464;&#20107;&#21153;&#30340; SQL &#21487;&#33021;&#23548;&#33268;&#36825;&#20123;&#20989;&#25968;&#34892;&#20026;&#19981;&#27491;&#30830;,
&#24182;&#21487;&#33021;&#22312; ODBC &#39537;&#21160;&#20013;&#24341;&#36215;&#39069;&#22806;&#30340;&#38382;&#39064;&#12290;
 ODBC &#36830;&#25509;&#19981;&#25903;&#25345; <a href="#%28tech._nested._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">nested transactions</span></a> &#12290;</p><p>PostgreSQL, MySQL &#21644; SQLite &#36830;&#25509;&#19981;&#33021;&#28151;&#21512;&#20351;&#29992;
<a href="#%28tech._managed._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">managed</span></a> &#21644;
<a href="#%28tech._unmanaged._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">unmanaged</span></a> &#20107;&#21153;&#12290;
 &#20363;&#22914;,&#35843;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._start-transaction%29%29" class="RktValLink" data-pltdoc="x">start-transaction</a></span> ,&#28982;&#21518;&#25191;&#34892; <span class="stt">ROLLBACK</span> &#35821;&#21477;&#26159;&#19981;&#20801;&#35768;&#30340;&#12290;
 &#35831;&#27880;&#24847;,&#22312; MySQL &#20013;,&#19968;&#20123; SQL &#35821;&#21477;&#20855;&#26377;
<a href="http://dev.mysql.com/doc/refman/5.0/en/implicit-commit.html">implicit transaction effects</a> &#12290;
 &#20363;&#22914;,&#22312; MySQL &#20013;, <span class="stt">CREATE TABLE</span> &#35821;&#21477;&#38544;&#21547;&#22320;&#25552;&#20132;&#20102;&#24403;&#21069;&#20107;&#21153;&#12290;
 &#36825;&#20123;&#35821;&#21477;&#20063;&#19981;&#33021;&#22312; <a href="#%28tech._managed._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">managed transactions</span></a> &#20013;&#20351;&#29992;&#12290;(&#30456;&#21453;,PostgreSQL &#21644; SQLite &#37117;&#25903;&#25345;&#20107;&#21153;&#24615; DDL)&#12290;</p><p><div class="SIntrapara"><span style="font-weight: bold">&#38169;&#35823;</span><span class="hspace">&nbsp;</span> &#26597;&#35810;&#38169;&#35823;&#21487;&#33021;&#20197;&#19977;&#31181;&#26041;&#24335;&#20043;&#19968;&#24433;&#21709;&#19968;&#20010;&#24320;&#25918;&#30340;&#20107;&#21153;:
</div><div class="SIntrapara"><ol><li><p>&#20132;&#26131;&#20445;&#25345;&#24320;&#25918;&#19988;&#19981;&#25913;&#21464;</p></li><li><p>&#20132;&#26131;&#34987;&#33258;&#21160;&#22238;&#28378;</p></li><li><p>&#20107;&#21153;&#25104;&#20026;&#19968;&#20010; <a name="(tech._invalid._transaction)"></a><span style="font-style: italic">invalid transaction</span>; &#25152;&#26377;&#21518;&#32493;&#30340;&#26597;&#35810;&#37117;&#20250;&#22833;&#36133;,&#30452;&#21040;&#20107;&#21153;&#34987;&#22238;&#28378;&#12290;</p></li></ol></div><div class="SIntrapara">&#20026;&#20102;&#36991;&#20813;&#20449;&#24687;&#30340;&#26080;&#22768;&#25439;&#22833;,&#36825;&#20010;&#24211;&#35797;&#22270;&#36890;&#36807;&#23558;&#20107;&#21153;&#26631;&#35760;&#20026;&#26080;&#25928;(3)&#26469;&#23436;&#20840;&#36991;&#20813;&#36825;&#31181;&#34892;&#20026;(2)&#12290;
 &#26080;&#25928;&#30340;&#20107;&#21153;&#21487;&#20197;&#36890;&#36807; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._needs-rollback~3f%29%29" class="RktValLink" data-pltdoc="x">needs-rollback?</a></span> &#20989;&#25968;&#26469;&#35782;&#21035;&#12290;
 &#19979;&#38754;&#30340;&#21015;&#34920;&#26159;&#23545;&#21738;&#20123;&#38169;&#35823;&#23548;&#33268;&#21738;&#20123;&#34892;&#20026;&#30340;&#31895;&#30053;&#25351;&#23548;:
</div><div class="SIntrapara"><ul><li><p>&#25152;&#26377;&#30001;&#36825;&#20010;&#24211;&#25191;&#34892;&#30340;&#26816;&#26597;&#24341;&#36215;&#30340;&#38169;&#35823;,&#20363;&#22914;&#21442;&#25968;&#30340; arity &#21644;&#31867;&#22411;&#38169;&#35823;,&#37117;&#20250;&#20351;&#20107;&#21153;&#20445;&#25345;&#24320;&#25918;&#21644;&#19981;&#21464;(1)&#12290;</p></li><li><p>&#25152;&#26377;&#26469;&#33258; PostgreSQL &#30340;&#38169;&#35823;&#23548;&#33268;&#20132;&#26131; <a href="#%28tech._invalid._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> (3) &#12290;</p></li><li><p>&#22823;&#22810;&#25968;&#26469;&#33258; MySQL &#30340;&#38169;&#35823;&#20351;&#20107;&#21153;&#20445;&#25345;&#24320;&#25918;&#21644;&#19981;&#21464;(1),
 &#20294;&#20063;&#26377;&#23569;&#25968;&#38169;&#35823;&#23548;&#33268;&#20107;&#21153; <a href="#%28tech._invalid._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> (3)&#12290;
&#22312;&#21518;&#19968;&#31181;&#24773;&#20917;&#19979;,MySQL &#30340;&#22522;&#26412;&#34892;&#20026;&#26159;&#22238;&#28378;&#20107;&#21153;,
 &#20294; <span class="emph">leave it open</span> (&#35265;
 <a href="http://dev.mysql.com/doc/refman/5.1/en/innodb-error-handling.html">the MySQL documentation</a>)&#12290;
&#36825;&#20010;&#24211;&#21487;&#20197;&#26816;&#27979;&#21040;&#36825;&#20123;&#24773;&#20917;,&#24182;&#26631;&#35760;&#20107;&#21153; <a href="#%28tech._invalid._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> &#12290;</p></li><li><p>&#22823;&#22810;&#25968;&#26469;&#33258; SQLite &#30340;&#38169;&#35823;&#20250;&#35753;&#20107;&#21153;&#20445;&#25345;&#24320;&#25918;&#21644;&#19981;&#21464;(1),
 &#20294;&#20063;&#26377;&#23569;&#25968;&#38169;&#35823;&#20250;&#23548;&#33268;&#20107;&#21153; <a href="#%28tech._invalid._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> (3)&#12290;
&#22312;&#21518;&#19968;&#31181;&#24773;&#20917;&#19979;,SQLite &#30340;&#22522;&#26412;&#34892;&#20026;&#26159;&#22238;&#28378;&#20107;&#21153;(&#35265;
 <a href="http://www.sqlite.org/lang_transaction.html">the SQLite documentation</a>)&#12290;
&#36825;&#20010;&#24211;&#21487;&#20197;&#26816;&#27979;&#21040;&#36825;&#20123;&#24773;&#20917;,&#24182;&#23558;&#20107;&#21153;&#26631;&#35760;&#20026; <a href="#%28tech._invalid._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> &#12290;</p></li><li><p>&#25152;&#26377;&#26469;&#33258;ODBC&#39537;&#21160;&#30340;&#38169;&#35823;&#37117;&#20250;&#23548;&#33268;&#20107;&#21153; <a href="#%28tech._invalid._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> (3)&#12290;
ODBC &#39537;&#21160;&#31243;&#24207;&#30340;&#22522;&#26412;&#34892;&#20026;&#24046;&#24322;&#24456;&#22823;,&#32780;&#19988; ODBC &#27809;&#26377;&#25552;&#20379;&#20219;&#20309;&#26426;&#21046;&#26469;&#26816;&#27979;&#29616;&#26377;&#30340;&#20107;&#21153;&#26159;&#21542;&#34987;&#22238;&#28378;,
 &#25152;&#20197;&#36825;&#20010;&#24211;&#25318;&#25130;&#20102;&#25152;&#26377;&#30340;&#38169;&#35823;&#24182;&#23558;&#20107;&#21153;&#26631;&#35760;&#20026; <a href="#%28tech._invalid._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> &#12290;</p></li></ul></div><div class="SIntrapara">&#22914;&#26524;&#19968;&#20010;&#34987;&#26631;&#35760;&#20026; <a href="#%28tech._invalid._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a> &#30340;&#23884;&#22871;&#20107;&#21153;&#34987;&#22238;&#28378;,
&#37027;&#20040;&#21253;&#22260;&#30340;&#20107;&#21153;&#36890;&#24120;&#20173;&#28982;&#26377;&#25928;&#12290;</div></p><p>&#22914;&#26524;&#19968;&#20010;&#20107;&#21153;&#22312;&#36830;&#25509;&#26029;&#24320;&#26102;&#26159;&#24320;&#25918;&#30340;,&#23427;&#23558;&#34987;&#38544;&#21547;&#22320;&#22238;&#28378;&#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._start-transaction))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._start-transaction%29%29" class="RktValDef RktValLink" data-pltdoc="x">start-transaction</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">c</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:isolation</span><span class="hspace">&nbsp;</span><span class="RktVar">isolation-level</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:option</span><span class="hspace">&nbsp;</span><span class="RktVar">option</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">isolation-level</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">serializable</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">repeatable-read</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">read-committed</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">read-uncommitted</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#f</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">option</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">&#21551;&#21160;&#19968;&#20010;&#20855;&#26377;&#38548;&#31163;&#24230; <span class="RktVar">isolation-level</span> &#30340;&#20107;&#21153;&#12290;
&#22914;&#26524; <span class="RktVar">isolation-level</span> &#26159; <span class="RktVal">#f</span>, &#37027;&#20040;&#38548;&#31163;&#26159;&#20381;&#36182;&#20110;&#25968;&#25454;&#24211;&#30340;;
 &#23427;&#21487;&#33021;&#26159;&#19968;&#20010;&#40664;&#35748;&#30340;&#38548;&#31163;&#32423;&#21035;,&#20063;&#21487;&#33021;&#26159;&#21069;&#19968;&#20010;&#20107;&#21153;&#30340;&#38548;&#31163;&#32423;&#21035;&#12290;</div></p><p><div class="SIntrapara"><span class="RktVar">option</span> &#30340;&#34892;&#20026;&#21462;&#20915;&#20110;&#25968;&#25454;&#24211;&#31995;&#32479;:
  </div><div class="SIntrapara"><ul><li><p>PostgreSQL &#25903;&#25345; <span class="RktVal">'</span><span class="RktVal">read-only</span> &#21644; <span class="RktVal">'</span><span class="RktVal">read-write</span>
&#30340; <a href="http://www.postgresql.org/docs/9.0/static/sql-set-transaction.html">corresponding
transaction options</a> &#12290;</p></li><li><p>SQLite &#25903;&#25345; <span class="RktVal">'</span><span class="RktVal">deferred</span>, <span class="RktVal">'</span><span class="RktVal">immediate</span> &#21644; <span class="RktVal">'</span><span class="RktVal">exclusive</span> &#30340;
<a href="http://www.sqlite.org/lang_transaction.html">corresponding locking modes</a> &#12290;</p></li><li><p>MySQL &#21644; ODBC &#19981;&#25903;&#25345;&#20219;&#20309;&#36873;&#39033;&#12290;</p></li></ul></div><div class="SIntrapara">&#22914;&#26524; <span class="RktVar">option</span> &#19981;&#34987;&#25903;&#25345;,&#20250;&#20135;&#29983;&#19968;&#20010;&#24322;&#24120;&#12290;</div></p><p>&#22914;&#26524; <span class="RktVar">c</span> &#24050;&#32463;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;,
 <span class="RktVar">isolation-level</span> &#21644; <span class="RktVar">option</span> &#24517;&#39035;&#37117;&#26159; <span class="RktVal">#f</span>,
 &#24182;&#19988;&#20250;&#25171;&#24320;&#19968;&#20010; <a href="#%28tech._nested._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">nested transaction</span></a> &#12290;</p><p>&#21442;&#35265; <a href="using-db.html#%28part._dbperf-concurrency%29" data-pltdoc="x">&#20107;&#21153;&#21644;&#24182;&#21457;&#24615;</a> &#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._commit-transaction))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._commit-transaction%29%29" class="RktValDef RktValLink" data-pltdoc="x">commit-transaction</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#22914;&#26524;&#24403;&#21069;&#30340;&#20107;&#21153;&#26159;&#24320;&#25918;&#30340;,&#21017;&#35797;&#22270;&#25552;&#20132;&#35813;&#20107;&#21153;&#12290;
&#22914;&#26524;&#20107;&#21153;&#19981;&#33021;&#34987;&#25552;&#20132;(&#20363;&#22914;,&#22914;&#26524;&#23427;&#26159; <a href="#%28tech._invalid._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid</span></a>), &#20250;&#24341;&#21457;&#19968;&#20010;&#24322;&#24120;&#12290;</div></p><p>&#22914;&#26524;&#24403;&#21069;&#20107;&#21153;&#26159;&#19968;&#20010; <a href="#%28tech._nested._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">nested transaction</span></a>, &#23884;&#22871;&#30340;&#20107;&#21153;&#34987;&#20851;&#38381;,
 &#23427;&#30340;&#21464;&#21270;&#34987;&#24182;&#20837;&#21253;&#22260;&#30340;&#20107;&#21153;,&#21253;&#22260;&#30340;&#20107;&#21153;&#34987;&#24674;&#22797;&#12290;</p><p>&#22914;&#26524;&#27809;&#26377;&#20107;&#21153;&#34987;&#25171;&#24320;,&#36825;&#20010;&#20989;&#25968;&#27809;&#26377;&#20316;&#29992;&#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._rollback-transaction))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rollback-transaction%29%29" class="RktValDef RktValLink" data-pltdoc="x">rollback-transaction</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#22914;&#26524;&#24403;&#21069;&#20107;&#21153;&#26159;&#24320;&#25918;&#30340;,&#21017;&#22238;&#28378;&#24403;&#21069;&#20107;&#21153;&#12290;</div></p><p>&#22914;&#26524;&#24403;&#21069;&#20107;&#21153;&#26159;&#19968;&#20010; <a href="#%28tech._nested._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">nested transaction</span></a>, &#23884;&#22871;&#30340;&#20107;&#21153;&#34987;&#20851;&#38381;,&#23427;&#30340;&#21464;&#21270;&#34987;&#25918;&#24323;,&#21253;&#22260;&#30340;&#20107;&#21153;&#34987;&#24674;&#22797;&#12290;</p><p>&#22914;&#26524;&#27809;&#26377;&#25171;&#24320;&#30340;&#20107;&#21153;,&#36825;&#20010;&#20989;&#25968;&#27809;&#26377;&#20219;&#20309;&#20316;&#29992;&#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._in-transaction~3f))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._in-transaction~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">in-transaction?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#22914;&#26524; <span class="RktVar">c</span> &#26377;&#19968;&#20010;&#24320;&#25918;&#30340;&#20107;&#21153;
(<a href="#%28tech._managed._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">managed</span></a> &#25110; <a href="#%28tech._unmanaged._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">unmanaged</span></a>),
&#36820;&#22238; <span class="RktVal">#t</span> ,&#21542;&#21017;&#36820;&#22238; <span class="RktVal">#f</span> &#12290;</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._needs-rollback~3f))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._needs-rollback~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">needs-rollback?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#22914;&#26524; <span class="RktVar">c</span> &#22788;&#20110;&#19968;&#20010; <a href="#%28tech._invalid._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">invalid transaction</span></a> &#20013;,&#21017;&#36820;&#22238; <span class="RktVal">#t</span> &#12290;
&#20351;&#29992; <span class="RktVar">c</span> &#25191;&#34892;&#30340;&#25152;&#26377;&#26597;&#35810;&#37117;&#20250;&#22833;&#36133;,
&#30452;&#21040;&#20132;&#26131;&#34987;&#22238;&#28378;(&#22914;&#26524;&#20132;&#26131;&#26159;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._start-transaction%29%29" class="RktValLink" data-pltdoc="x">start-transaction</a></span> &#21019;&#24314;&#30340;,
&#21017;&#20351;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rollback-transaction%29%29" class="RktValLink" data-pltdoc="x">rollback-transaction</a></span> ,
&#25110;&#32773;&#24403;&#20256;&#36882;&#32473; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._call-with-transaction%29%29" class="RktValLink" data-pltdoc="x">call-with-transaction</a></span> &#30340;&#36807;&#31243;&#36820;&#22238;&#26102;)&#12290;</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._call-with-transaction))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._call-with-transaction%29%29" class="RktValDef RktValLink" data-pltdoc="x">call-with-transaction</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">c</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">proc</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:isolation</span><span class="hspace">&nbsp;</span><span class="RktVar">isolation-level</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:option</span><span class="hspace">&nbsp;</span><span class="RktVar">option</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">any</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">isolation-level</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">serializable</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">repeatable-read</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">read-committed</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">read-uncommitted</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#f</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">option</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">&#22312;&#19968;&#20010;&#26032;&#30340;&#20107;&#21153;&#30340;&#19978;&#19979;&#25991;&#20013;&#35843;&#29992; <span class="RktVar">proc</span> ,&#20854;&#38548;&#31163;&#32423;&#21035;&#20026; <span class="RktVar">isolation-level</span> &#12290;
&#22914;&#26524; <span class="RktVar">proc</span> &#27491;&#24120;&#23436;&#25104;,&#21017;&#25552;&#20132;&#35813;&#20107;&#21153;,&#24182;&#36820;&#22238; <span class="RktVar">proc</span> &#30340;&#32467;&#26524;&#12290;
&#22914;&#26524; <span class="RktVar">proc</span> &#24341;&#21457;&#24322;&#24120;(&#25110;&#32773;&#26368;&#21518;&#30340;&#38544;&#24335;&#25552;&#20132;&#24341;&#21457;&#24322;&#24120;),&#21017;&#20107;&#21153;&#22238;&#28378;&#24182;&#37325;&#26032;&#24341;&#21457;&#24322;&#24120;&#12290;</div></p><p><div class="SIntrapara">&#22914;&#26524;&#22312;&#20107;&#21153;&#20013;&#35843;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._call-with-transaction%29%29" class="RktValLink" data-pltdoc="x">call-with-transaction</a></span> ,
  <span class="RktVar">isolation-level</span> &#24517;&#39035;&#26159; <span class="RktVal">#f</span>, &#24182;&#19988;&#20250;&#21019;&#24314;&#19968;&#20010; <a href="#%28tech._nested._transaction%29" class="techoutside" data-pltdoc="x"><span class="techinside">nested transaction</span></a> &#12290;
 &#22312;&#35843;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._call-with-transaction%29%29" class="RktValLink" data-pltdoc="x">call-with-transaction</a></span> &#33539;&#22260;&#20869;,&#20107;&#21153;&#24517;&#39035;&#34987;&#27491;&#30830;&#23884;&#22871;&#12290;&#29305;&#21035;&#26159;:
  </div><div class="SIntrapara"><ul><li><p>&#24403;&#35843;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._call-with-transaction%29%29" class="RktValLink" data-pltdoc="x">call-with-transaction</a></span> &#21019;&#24314;&#30340;&#24320;&#25918;&#20107;&#21153;&#26102;,
&#35843;&#29992; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._commit-transaction%29%29" class="RktValLink" data-pltdoc="x">commit-transaction</a></span> &#25110; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._rollback-transaction%29%29" class="RktValLink" data-pltdoc="x">rollback-transaction</a></span> &#20250;&#23548;&#33268;&#20135;&#29983;&#19968;&#20010;&#24322;&#24120;&#12290;</p></li><li><p>&#22914;&#26524; <span class="RktVar">proc</span> &#23436;&#25104;&#26102;&#36824;&#26377;&#19968;&#20010;&#23884;&#22871;&#30340;&#20107;&#21153;&#26159;&#24320;&#25918;&#30340;
(&#20063;&#23601;&#26159;&#30001;&#19981;&#21305;&#37197;&#30340; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._start-transaction%29%29" class="RktValLink" data-pltdoc="x">start-transaction</a></span> &#35843;&#29992;&#21019;&#24314;&#30340;),
&#21017;&#20250;&#24341;&#21457;&#24322;&#24120;,&#30001; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._call-with-transaction%29%29" class="RktValLink" data-pltdoc="x">call-with-transaction</a></span> &#21019;&#24314;&#30340;&#23884;&#22871;&#20107;&#21153;&#20250;&#34987;&#22238;&#28378;&#12290;</p></li></ul></div></p><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;SQL_错误&quot;">3.6<tt>&nbsp;</tt><a name="(part._.S.Q.L_~e9~94~99~e8~af~af)"></a>SQL &#38169;&#35823;</h4><p>SQL &#38169;&#35823;&#30001; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._exn~3afail~3asql%29%29" class="RktValLink" data-pltdoc="x">exn:fail:sql</a></span> &#24322;&#24120;&#31867;&#22411;&#34920;&#31034;&#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._db/base..rkt)._exn~3afail~3asql-info))"></a><a name="(def._((lib._db/base..rkt)._exn~3afail~3asql-sqlstate))"></a><a name="(def._((lib._db/base..rkt)._make-exn~3afail~3asql))"></a><a name="(def._((lib._db/base..rkt)._exn~3afail~3asql~3f))"></a><a name="(def._((lib._db/base..rkt)._struct~3aexn~3afail~3asql))"></a><a name="(def._((lib._db/base..rkt)._exn~3afail~3asql))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._exn~3afail~3asql%29%29" class="RktValDef RktValLink" data-pltdoc="x">exn:fail:sql</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._exn%7E3afail%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">exn:fail</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sqlstate</span><span class="stt"> </span><span class="RktSym">info</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._make-exn~3afail~3asql%29%29" class="RktValLink" data-pltdoc="x">make-exn:fail:sql</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">sqlstate</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">info</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._cons%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">&#20195;&#34920;&#19968;&#20010;&#26469;&#33258;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;&#25110;&#26412;&#22320;&#24211;&#30340; SQL &#38169;&#35823;&#12290;
 <span class="RktSym">sqlstate</span> &#23383;&#27573;&#21253;&#21547;&#20102; PostgreSQL&#12289;MySQL &#25110; ODBC &#36830;&#25509;&#30340;&#38169;&#35823;&#30340; SQLSTATE &#20195;&#30721;(&#19968;&#20010; 5 &#20010;&#23383;&#31526;&#30340;&#23383;&#31526;&#20018;),
 &#25110; SQLite &#36830;&#25509;&#30340;&#19968;&#20010;&#31526;&#21495;&#12290;
&#20851;&#20110;&#38169;&#35823;&#20195;&#30721;&#30340;&#23450;&#20041;,&#35831;&#21442;&#32771;&#25968;&#25454;&#24211;&#31995;&#32479;&#30340;&#25991;&#26723;:</div></p><ul><li><p><a href="http://www.postgresql.org/docs/9.0/static/errcodes-appendix.html">PostgreSQL SQLSTATE &#20195;&#30721;</a></p></li><li><p><a href="http://dev.mysql.com/doc/refman/5.5/en/error-messages-server.html">MySQL SQLSTATE &#20195;&#30721;</a></p></li><li><p><a href="http://www.sqlite.org/c3ref/c_abort.html">SQLite &#38169;&#35823;&#20195;&#30721;</a>; &#38169;&#35823;&#20197;&#22522;&#20110;&#38169;&#35823;&#24120;&#37327;&#21517;&#31216;&#30340;&#31526;&#21495;&#34920;&#31034;,&#22914; <span class="RktVal">'</span><span class="RktVal">busy</span> &#34920;&#31034; <span class="stt">SQLITE_BUSY</span>;
&#19977;&#20010;&#20195;&#30721;&#20197;&#25193;&#23637;&#24418;&#24335;&#25552;&#20379;: <span class="RktVal">'</span><span class="RktVal">ioerr-blocked</span>,
<span class="RktVal">'</span><span class="RktVal">ioerr-locked</span> &#21644; <span class="RktVal">'</span><span class="RktVal">readonly-rollback</span> &#12290;</p></li><li><p>ODBC: &#35265;&#25968;&#25454;&#24211;&#31995;&#32479;&#30340;&#25991;&#26723;</p></li></ul><p><span class="RktSym">info</span> &#23383;&#27573;&#21253;&#21547;&#25152;&#26377;&#20851;&#20110;&#38169;&#35823;&#30340;&#21487;&#29992;&#20449;&#24687;,&#20316;&#20026;&#19968;&#20010;&#20851;&#32852;&#21015;&#34920;&#12290;
 &#21487;&#29992;&#30340;&#38190;&#19981;&#21516;,&#20294;&#26159; <span class="RktVal">'</span><span class="RktVal">message</span> &#38190;&#36890;&#24120;&#26159;&#23384;&#22312;&#30340;;&#23427;&#30340;&#20540;&#26159;&#19968;&#20010;&#21253;&#21547;&#38169;&#35823;&#20449;&#24687;&#30340;&#23383;&#31526;&#20018;&#12290;</p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._with-handlers%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x">with-handlers</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._exn~3afail~3asql~3f%29%29" class="RktValLink" data-pltdoc="x">exn:fail:sql?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._exn~3afail~3asql-info%29%29" class="RktValLink" data-pltdoc="x">exn:fail:sql-info</a></span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._query%29%29" class="RktValLink" data-pltdoc="x">query</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pgc</span><span class="hspace">&nbsp;</span><span class="RktVal">"select * from nosuchtable"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">'((severity . "ERROR")</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(severity* . "ERROR")</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(code . "42P01")</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(message . "relation \"nosuchtable\" does not exist")</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(position . "15")</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(file . "parse_relation.c")</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(line . "1194")</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(routine . "parserOpenTable"))</span></p></td></tr></table></td></tr></table></blockquote></div></p><p>&#28304;&#33258; <a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">db</span></a> &#24211;&#30340;&#38169;&#35823;,&#22914; arity &#21644; contract &#38169;&#35823;,
 &#31867;&#22411;&#36716;&#25442;&#38169;&#35823;&#31561;,&#19981;&#30001; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._exn~3afail~3asql%29%29" class="RktValLink" data-pltdoc="x">exn:fail:sql</a></span> &#34920;&#31034;&#12290;</p><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;数据库目录信息&quot;">3.7<tt>&nbsp;</tt><a name="(part._~e6~95~b0~e6~8d~ae~e5~ba~93~e7~9b~ae~e5~bd~95~e4~bf~a1~e6~81~af)"></a>&#25968;&#25454;&#24211;&#30446;&#24405;&#20449;&#24687;</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._list-tables))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._list-tables%29%29" class="RktValDef RktValLink" data-pltdoc="x">list-tables</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span><span class="RktOpt">[</span><span class="RktPn">#:schema</span><span class="hspace">&nbsp;</span><span class="RktVar">schema</span><span class="RktOpt">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">schema</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">search-or-current</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">search</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">current</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">'</span><span class="RktVal">search-or-current</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">&#36820;&#22238;&#24403;&#21069;&#25968;&#25454;&#24211;&#20013;&#23450;&#20041;&#30340;&#34920;(&#21644;&#35270;&#22270;)&#30340;&#38750;&#38480;&#23450;&#21517;&#31216;&#30340;&#21015;&#34920;&#12290;</div></p><p>&#22914;&#26524; <span class="RktVar">schema</span> &#26159; <span class="RktVal">'</span><span class="RktVal">search</span>, &#36825;&#20010;&#21015;&#34920;&#21253;&#21547;&#20102;&#24403;&#21069;&#27169;&#24335;&#25628;&#32034;&#36335;&#24452;&#20013;&#30340;&#25152;&#26377;&#34920;(&#21487;&#33021;&#19981;&#21253;&#25324;&#31995;&#32479;&#34920;);
 &#22914;&#26524;&#25628;&#32034;&#36335;&#24452;&#26080;&#27861;&#30830;&#23450;,&#20250;&#24341;&#21457;&#19968;&#20010;&#24322;&#24120;&#12290;
&#22914;&#26524; <span class="RktVar">schema</span> &#26159; <span class="RktVal">'</span><span class="RktVal">current</span>, &#21015;&#34920;&#20013;&#21253;&#21547;&#24403;&#21069;&#27169;&#24335;&#20013;&#30340;&#25152;&#26377;&#34920;&#12290;
&#22914;&#26524; <span class="RktVar">schema</span> &#26159; <span class="RktVal">'</span><span class="RktVal">search-or-current</span> (&#32570;&#30465;),&#22914;&#26524;&#21487;&#20197;&#30830;&#23450;&#25628;&#32034;&#36335;&#24452;,&#21017;&#20351;&#29992;&#25628;&#32034;&#36335;&#24452;;
 &#21542;&#21017;&#20351;&#29992;&#24403;&#21069;&#27169;&#24335;&#12290;
&#23545;&#20110;&#22522;&#20110; ODBC &#30340;&#36830;&#25509;,&#27169;&#24335;&#30340;&#25628;&#32034;&#36335;&#24452;&#26080;&#27861;&#30830;&#23450;&#12290;</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._table-exists~3f))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._table-exists~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">table-exists?</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">c</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">table-name</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:schema</span><span class="hspace">&nbsp;</span><span class="RktVar">schema</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:case-sensitive?</span><span class="hspace">&nbsp;</span><span class="RktVar">case-sensitive?</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">table-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">schema</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">search-or-current</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">search</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">current</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">'</span><span class="RktVal">search-or-current</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">case-sensitive?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">&#34920;&#31034;&#19968;&#20010;&#21517;&#20026; <span class="RktVar">table-name</span> &#30340;&#34920;(&#25110;&#35270;&#22270;)&#26159;&#21542;&#23384;&#22312;&#12290;
 <span class="RktVar">schema</span> &#21442;&#25968;&#30340;&#21547;&#20041;&#19982; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._list-tables%29%29" class="RktValLink" data-pltdoc="x">list-tables</a></span> &#30456;&#21516;,
 <span class="RktVar">case-sensitive?</span> &#21442;&#25968;&#25511;&#21046;&#34920;&#21517;&#30340;&#27604;&#36739;&#26041;&#24335;&#12290;</div></p><h4 x-source-module="(lib &quot;db/scribblings/db.scrbl&quot;)" x-source-pkg="db-doc" x-part-tag="&quot;创建新类型的语句&quot;">3.8<tt>&nbsp;</tt><a name="(part._~e5~88~9b~e5~bb~ba~e6~96~b0~e7~b1~bb~e5~9e~8b~e7~9a~84~e8~af~ad~e5~8f~a5)"></a>&#21019;&#24314;&#26032;&#31867;&#22411;&#30340;&#35821;&#21477;</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><table cellspacing="0" cellpadding="0" class="argcontract RForeground"><tr><td valign="top"><a name="(def._((lib._db/base..rkt)._prop~3astatement))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prop~3astatement%29%29" class="RktValDef RktValLink" data-pltdoc="x">prop:statement</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=Structure_Type_Property_Contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract..rkt%2529._struct-type-property%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">struct-type-property/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.9" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="connect.html#%28def._%28%28lib._db%2Fbase..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._statement~3f%29%29" class="RktValLink" data-pltdoc="x">statement?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">&#19968;&#20010;&#29992;&#20110;&#21019;&#24314;&#26032;&#31181;&#31867;&#35821;&#21477;&#30340;&#32467;&#26500;&#31867;&#22411;&#23646;&#24615;&#12290;
 &#35813;&#23646;&#24615;&#20540;&#34987;&#24212;&#29992;&#20110;&#32467;&#26500;&#23454;&#20363;&#21644;&#36830;&#25509;,&#23427;&#24517;&#39035;&#36820;&#22238;&#19968;&#20010; <a href="#%28tech._statement%29" class="techoutside" data-pltdoc="x"><span class="techinside">statement</span></a> &#12290;</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._db/base..rkt)._prop~3astatement~3f))"></a><span title="Provided from: db, db/base | Package: db-lib"><span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prop~3astatement~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">prop:statement?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.9/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.9" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">&#22914;&#26524; <span class="RktVar">v</span> &#26159;&#19968;&#20010;&#23454;&#29616; <span class="RktSym"><a href="#%28def._%28%28lib._db%2Fbase..rkt%29._prop~3astatement%29%29" class="RktValLink" data-pltdoc="x">prop:statement</a></span> &#30340;&#32467;&#26500;&#23454;&#20363;,
 &#21017;&#36820;&#22238; <span class="RktVal">#t</span> ,&#21542;&#21017;&#36820;&#22238; <span class="RktVal">#f</span> &#12290;</div></p><p class="SHistory">Added in version 1.5 of package <span class="stt">db-lib</span>.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.9&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.9&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="connect.html" title="backward to &quot;2 Connections&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;DB: 数据库连接&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="sql-types.html" title="forward to &quot;4 SQL 类型转换&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>